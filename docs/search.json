[
  {
    "objectID": "resources.html",
    "href": "resources.html",
    "title": "All my favorite resources",
    "section": "",
    "text": "this is an h1 element\n\n\nthis is an h1 element with the title class\n\n\nthis paragraph is butterscotch\n\n\nthis paragraph is centered\n\n\nthis paragraph is centered and butterscotch\n\n\nHere’s where I’m describing something fun that I enjoy doing\n\nThis\nis\nall\nbutterscotch\n\n\nThis\nis\nall\ncentered"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "I am currently a student who works"
  },
  {
    "objectID": "about.html#what-i-do-for-work",
    "href": "about.html#what-i-do-for-work",
    "title": "About",
    "section": "",
    "text": "I am currently a student who works"
  },
  {
    "objectID": "about.html#what-i-do-for-fun",
    "href": "about.html#what-i-do-for-fun",
    "title": "About",
    "section": "What I do for fun",
    "text": "What I do for fun\nLeague of Legends; give the ppl what they want."
  },
  {
    "objectID": "posts/extreme_weather_events/index.html",
    "href": "posts/extreme_weather_events/index.html",
    "title": "Extreme Weather Events",
    "section": "",
    "text": "This is where the body of my blog post begins! I’m going to add a footnote here 1 Here’s and inline footnote2\nCiting reference (Shanny-Csik 2022)\nlets cite a paper using the DOI (Gaynor et al. 2022)"
  },
  {
    "objectID": "posts/extreme_weather_events/index.html#footnotes",
    "href": "posts/extreme_weather_events/index.html#footnotes",
    "title": "Extreme Weather Events",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nHere is some additional context that might be helpful↩︎\nhere’s my inline note↩︎"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Peter Vitale",
    "section": "",
    "text": "I’m a marine biologist with a passion for ocean life, data visualization, and science communication. I studied Marine Biology at UC Santa Cruz and have worked in environmental education, field research, and data analysis. I enjoy finding creative ways to connect people with the natural world and make environmental data more engaging and accessible."
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Blog Posts",
    "section": "",
    "text": "Extreme Weather Events\n\n\n\nMEDS\n\nR\n\nGeospatial\n\n\n\nExamining blackouts in Houston,TX following a 2021 storm\n\n\n\nPeter Vitale\n\n\nNov 12, 2025\n\n\n\n\n\n\n\n\n\n\n\nAquaculture and EEZ’s\n\n\n\nMEDS\n\nR\n\nGeospatial\n\n\n\nExamining where in the North Pacific Economic Exclusive Zone is best for aquaculture of different species\n\n\n\nPeter Vitale\n\n\nNov 12, 2025\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html",
    "href": "posts/aquaculture_and_eezs/index.html",
    "title": "Aquaculture and EEZ’s",
    "section": "",
    "text": "DESCRIPTION OF EEZ”S AND WHY I LIKE THIS\nCode\npacman::p_load('tidyverse', \n               'sf', \n               'here',\n               'tmap', \n               'kableExtra',\n               'patchwork',\n               'stars',\n               'terra')"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#data-import",
    "href": "posts/aquaculture_and_eezs/index.html#data-import",
    "title": "Aquaculture and EEZ’s",
    "section": "Data import",
    "text": "Data import\n\nSurface temperature from: [@noaa_crw_sst31]\n\n\nCode\nsst_2008 &lt;- rast(here('posts', 'aquaculture_and_eezs','data',\n                      'average_annual_sst_2008.tif')) \n\nsst_2009 &lt;- rast(here('posts', 'aquaculture_and_eezs','data',\n                      'average_annual_sst_2009.tif'))\nsst_2010 &lt;- rast(here('posts', 'aquaculture_and_eezs', 'data',\n                      'average_annual_sst_2010.tif'))\nsst_2011 &lt;- rast(here('posts', 'aquaculture_and_eezs','data',\n                      'average_annual_sst_2011.tif'))\nsst_2012 &lt;- rast(here('posts', 'aquaculture_and_eezs', 'data',\n                      'average_annual_sst_2012.tif'))\n\n\n\n\nBathymetry\nFrom: [@gebcobathymetriccompilationgroup20252025]\n\n\nCode\nbathy &lt;- rast(here('posts', 'aquaculture_and_eezs', 'data','depth.tif')) %&gt;% \n  project(\"EPSG:4326\") # Coerce into correct crs \n\n\n\n\nExclusive Economic Zones\nFrom: [@marine_regions_eez_v12]\n\n\nCode\neez &lt;- st_read(here('posts', 'aquaculture_and_eezs','data',\n                    'wc_regions_clean.shp'), quiet = TRUE) %&gt;% \n  st_transform(\"EPSG:4326\") # STARS OBJECT"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#surface-temperature-mean",
    "href": "posts/aquaculture_and_eezs/index.html#surface-temperature-mean",
    "title": "Aquaculture and EEZ’s",
    "section": "Surface temperature mean",
    "text": "Surface temperature mean\n\n\nCode\n# Stacked raster\nstacked_sst &lt;- c(sst_2008, sst_2009, sst_2010, sst_2011, sst_2012) %&gt;% # Here we stack our temperatures and then transform crs\n  project(\"EPSG:4326\") \n\n# Take mean of stacked raster and transform from Kelvin to Celsius\nmean_sst &lt;- mean(stacked_sst) - 273.15"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#bathymetry-1",
    "href": "posts/aquaculture_and_eezs/index.html#bathymetry-1",
    "title": "Aquaculture and EEZ’s",
    "section": "Bathymetry",
    "text": "Bathymetry\n\n\nCode\n# First we need to assure this data is in the same crs as sst\ndepth_projected &lt;- project(bathy, mean_sst) # Project the crs of mean sst on depth \n\ncrs(depth_projected) == crs(mean_sst)\n\n\n[1] TRUE\n\n\nCode\n# We are going to crop the depth raster to the eez\ndepth_cropped &lt;- crop(depth_projected, mean_sst)\n\n# And resample to make sure our pixel sizes match \ndepth_resampled &lt;- resample(depth_projected, mean_sst)"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#oyster-reclassification",
    "href": "posts/aquaculture_and_eezs/index.html#oyster-reclassification",
    "title": "Aquaculture and EEZ’s",
    "section": "Oyster Reclassification",
    "text": "Oyster Reclassification\nWe need to reclassify for oysters, which enjoy depth between -70 meters and 0 meters and temperatures between 11 and 30 degrees celcius\n\n\nCode\nrcl_depth &lt;- matrix(c(-Inf, -70, 0, # Anything below 70 m becomes a 0\n                    -70, 0, 1, # Between 70 and 0 becomes 1\n                    0, Inf, 0), # And above 0 becomes a 0\n                    nrow = 3, \n                    byrow = TRUE)\n\nrcl_temp &lt;- matrix(c(-Inf, 11, 0, # Below 11 degrees becomes 0\n                     11, 30, 1, # Between 11 and 30 becomes 1\n                     30, Inf, 0), # Above 30 becomes 0\n                   nrow =3,\n                   byrow = TRUE)\n# Apply those matrices\ndepth_rcl &lt;- classify(depth_resampled, rcl_depth) \n\nsst_rcl &lt;- classify(mean_sst, rcl_temp)\n\n\nWe want to keep where both sst and depth equal one, so we can multiply the two rasters.\n\n\nCode\nsuitable_cells &lt;- sst_rcl * depth_rcl\n\n# And make all 0's NA\nsuitable_cells[suitable_cells == 0] &lt;- NA\n\n# Finally, since we only have ones, change that to suitable\nnames(suitable_cells) &lt;- 'Suitable'\n\n\n\n\nCode\n# Now we want to see the area of the suitable cells, which we can get by multiplying suitable_cells and the cellSize of each cell\narea_raster &lt;- suitable_cells * cellSize(suitable_cells, unit = 'km')  \n\n\n\n\nCode\n# Here we extract where that area touches our eez\narea_extracted &lt;- terra::extract(area_raster, \n                                 eez, \n                                 touches = TRUE) %&gt;%  \n  group_by(ID) %&gt;% # Then we group_by and summarise the total suitable area per eez region\n  summarise(suitable_area = sum(Suitable, na.rm = TRUE)) %&gt;% \n  mutate(rgn = eez$rgn)\n\n\n\n\nCode\n# Lastly we want to left join to preserve the area information of each eez region\nregion_suitable_area &lt;- left_join(x = eez,\n                                  y = area_extracted, \n                                  by = \"rgn\") %&gt;% \n  select(-ID) # Get rid of ID column\n\n\n\nMap\nNow we have our final mapping data frame and can build our map\n\n\nCode\ntm_basemap(\"Esri.WorldTopoMap\")+# I found this basemap fit the best\ntm_shape(region_suitable_area)+\n  tm_polygons(fill = 'suitable_area',\n              fill.scale = tm_scale(values = c('#E1DABD', # Add my color palette \n                                              '#ABC798',\n                                              '#FFC4EB',\n                                              '#E6983F',\n                                              '#A0185A'),\n                                    breaks = c(0, \n                                               800, # Specify breaks \n                                               1600,\n                                               2400, \n                                               3200,\n                                               4000)),\n              fill.legend = tm_legend( '        Total \\nSuitable area (km)'))+ # The blank space makes 'Total' centered\n  tm_title(text = paste('Suitable area for farming Oysters in West Coast EEZ'), \n           position = tm_pos_out(\"center\", \"top\", pos.h = \"center\"))+ # Add title and position in center\n  tm_layout(component.autoscale = FALSE)+ # Autoscale makes our title tiny so we turn it off\n  tm_graticules(alpha = .5)+ # Add graticules (lighter)\n  tm_text('rgn', size = .7)+ # This adds the region name on each polygon centroid\ntm_shape(suitable_cells)+ # I want to add the visual representation of where the suitable area is \n  tm_raster(col  =  'Suitable',\n             col.scale =  tm_scale(values = '#90AFDA', # This color is also part of my palette\n            labels = 'Suitable Area'), # In place of a title  we will be specific with our legend text\n            col.legend = tm_legend(title = \"\")) # No need for a legend title with a single raster variable\n\n\nThe visual variable `col` of the layer \"raster\" contains a unique value.\nTherefore a discrete scale is applied (tm_scale_discrete).\n\n\n\n\n\n\n\n\n\n\n\nTable\nI also want to be able to see a table of our exact suitable area in each region so we can use kable\n\n\nCode\nregion_suitable_area %&gt;% \n  st_drop_geometry() %&gt;% # The only way to lose geometry\n  select(-rgn_key, -rgn_id, -area_m2) %&gt;% # Drop unnecesary columns\nkbl(col.names = c('Region', 'Total Area (Km2)', 'Suitable Area (Km2)')) %&gt;%  # Rename the columns in our table\n  kable_classic(full_width = F, # This is my favorite type of table\n                html_font = \"Cambria\") %&gt;% \n  footnote(number = paste('EEZ region suitable area for farming Oysters')) # Add a footnote\n\n\n\n\n\nRegion\nTotal Area (Km2)\nSuitable Area (Km2)\n\n\n\n\nOregon\n179994.06\n1147.883\n\n\nNorthern California\n164378.81\n194.126\n\n\nCentral California\n202738.33\n3673.514\n\n\nSouthern California\n206860.78\n3259.485\n\n\nWashington\n66898.31\n2524.804\n\n\n\n1 EEZ region suitable area for farming Oysters"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#function",
    "href": "posts/aquaculture_and_eezs/index.html#function",
    "title": "Aquaculture and EEZ’s",
    "section": "Function",
    "text": "Function\nNow that I have my workflow solidified I can turn it into a function, so with just the species name it can output a map.\n\n\nCode\n#' Map EEZ\n#' Make a map of a suitable area of a species in west coast EEZ's\n#' @param species \n#' The name of your species, MUST be wrapped AND Uppercase eg: ('Pacific Oyster')\n#' @returnsA list containing:\n#'   - $map   : tmap object\n#'   - $table : kable table\n#' @export\n#' @examples\n#' \nmap_eez &lt;- function(species){\n\n  species_dict &lt;- list(\n  \n  # -----------------------------\n  # SHELLFISH\n  # -----------------------------\n  \n  \"Pacific Oyster\" = list(\n    t_lwr = 11, t_upr = 30,\n    d_lower = 70, d_upr = 0\n  ),\n\n  \"Olympia Oyster\" = list(\n    t_lwr = 8,  t_upr = 20,\n    d_lower = 40, d_upr = 0\n  ),\n\n  \"Geoduck\" = list(\n    t_lwr = 5, t_upr = 18,\n    d_lower = 100, d_upr = 5\n  ),\n\n  \"Razor Clam\" = list(\n    t_lwr = 5, t_upr = 17,\n    d_lower = 20, d_upr = 0\n  ),\n\n  \"Blue Mussel\" = list(\n    t_lwr = 5, t_upr = 20,\n    d_lower = 30, d_upr = 0\n  ),\n\n  \"Mediterranean Mussel\" = list(\n    t_lwr = 8, t_upr = 26,\n    d_lower = 40, d_upr = 0\n  ),\n\n  \"Scallop\" = list(\n    t_lwr = 8, t_upr = 20,\n    d_lower = 50, d_upr = 0\n  ),\n  \n  # -----------------------------\n  # KELP + SEAWEEDS\n  # -----------------------------\n  \n  \"Bull Kelp\" = list(\n    t_lwr = 10, t_upr = 18,\n    d_lower = 40, d_upr = 0\n  ),\n  \n  \"Giant Kelp\" = list(\n    t_lwr = 6,  t_upr = 20,\n    d_lower = 30, d_upr = 0\n  ),\n  \n  \"Sugar Kelp\" = list(\n    t_lwr = -2, t_upr = 15,\n    d_lower = 50, d_upr = 1\n  ),\n  \n  \"Dulse\" = list(\n    t_lwr = 5,  t_upr = 15,\n    d_lower = 10, d_upr = 0\n  ),\n  \n  \"Sea Lettuce\" = list(\n    t_lwr = 5,  t_upr = 25,\n    d_lower = 10, d_upr = 0\n  ),\n  \n  \"Winged Kelp\" = list(\n    t_lwr = 2, t_upr = 15,\n    d_lower = 40, d_upr = 0\n  ),\n\n  \"Pyropia (Nori)\" = list(\n    t_lwr = 5,  t_upr = 15,\n    d_lower = 10, d_upr = 0\n  ),\n  \n  # -----------------------------\n  # ECHINODERMS (URCHINS)\n  # -----------------------------\n  \n  \"Green Sea Urchin\" = list(\n    t_lwr = 0, t_upr = 15,\n    d_lower = 200, d_upr = 0\n  ),\n\n  \"Red Sea Urchin\" = list(\n    t_lwr = 5, t_upr = 20,\n    d_lower = 100, d_upr = 3\n  ),\n  \n  # -----------------------------\n  # FINFISH\n  # -----------------------------\n\n  \"Chinook Salmon\" = list(\n    t_lwr = 8,  t_upr = 14,\n    d_lower = 200, d_upr = 0\n  ),\n\n  \"Coho Salmon\" = list(\n    t_lwr = 7, t_upr = 14,\n    d_lower = 150, d_upr = 0\n  ),\n\n  \"Steelhead Trout\" = list(\n    t_lwr = 7, t_upr = 17,\n    d_lower = 100, d_upr = 0\n  ),\n\n  \"Pacific Halibut\" = list(\n    t_lwr = 3,  t_upr = 12,\n    d_lower = 450, d_upr = 20\n  ),\n\n  \"Sablefish\" = list(\n    t_lwr = 4,  t_upr = 12,\n    d_lower = 1500, d_upr = 50\n  ),\n\n  \"Pacific Sardine\" = list(\n    t_lwr = 12, t_upr = 20,\n    d_lower = 0, d_upr = 50\n  ),\n\n  \"Northern Anchovy\" = list(\n    t_lwr = 12, t_upr = 20,\n    d_lower = 0, d_upr = 50\n  ),\n  \n  # -----------------------------\n  # CRUSTACEANS\n  # -----------------------------\n\n  \"Dungeness Crab\" = list(\n    t_lwr = 7, t_upr = 18,\n    d_lower = 100, d_upr = 0\n  )\n)\n\n# Extract parameters from the dictionary\nparams &lt;- species_dict[[species]]\nif (is.null(params)) stop(\"Species not found in dictionary. Check spelling.\")\n\n# Access individual values\nt_lwr &lt;- params$t_lwr\nt_upr &lt;- params$t_upr\nd_lower &lt;- params$d_lower\nd_upr   &lt;- params$d_upr\n\n# Reclassification matrices\nrcl_depth &lt;- matrix(c(-Inf, -d_lower, 0, # Use variables like values\n                      -d_lower, -d_upr, 1,\n                      -d_upr, Inf, 0), \n                    nrow = 3, \n                    byrow = TRUE)\n\nrcl_temp &lt;- matrix(c(-Inf, t_lwr, 0,\n                     t_lwr, t_upr, 1,\n                     t_upr, Inf, 0), \n                   nrow =3,\n                   byrow = TRUE)\n\n# Reclassify \ndepth_rcl &lt;- classify(depth_resampled, rcl_depth)\n\nsst_rcl &lt;- classify(mean_sst, rcl_temp)\n\n# Calculate suitable cells\nsuitable_cells &lt;- sst_rcl * depth_rcl\n\nsuitable_cells[suitable_cells == 0] &lt;- NA\n\nnames(suitable_cells) &lt;- 'Suitable'\n\n# Calculate area of suitable cells\narea_raster &lt;- suitable_cells * cellSize(suitable_cells, unit = 'km')\n\n# Extract suitable areas \narea_extracted &lt;- terra::extract(area_raster, \n                                 eez, \n                                 touches = TRUE) %&gt;%  \n  group_by(ID) %&gt;% \n  summarise(suitable_area = sum(Suitable, na.rm = TRUE)) %&gt;% \n  mutate(rgn = eez$rgn)\n\n# Create geodf with suitable area and eez area\nregion_suitable_area &lt;- left_join(x = eez,\n                                  y = area_extracted, \n                                  by = \"rgn\") %&gt;% \n  select(-ID)\n\n\n# Create map\nmap &lt;- tm_basemap(\"Esri.WorldTopoMap\")+\n  tm_shape(region_suitable_area)+\n  tm_polygons(fill = 'suitable_area',\n              fill.scale = tm_scale(values = c('#E1DABD',\n                                               '#ABC798',\n                                               '#FFC4EB',\n                                               '#E6983F',\n                                               '#A0185A'),\n                                    n = 5), # Set 5 breaks\n              fill.legend = tm_legend( '        Total \\nSuitable area (km)'))+\n  tm_title(text = paste('Suitable area for farming', species, 'in West Coast EEZ'), position = tm_pos_out(\"center\", \"top\", pos.h = \"center\"))+ # Paste allows us to manipulate the title of the plot\n  tm_layout(component.autoscale = FALSE)+\n  tm_graticules(alpha = .5)+\n  tm_text('rgn', size = .7)+\ntm_shape(suitable_cells)+\n  tm_raster(col  =  'Suitable',\n             col.scale =  tm_scale(values = '#90AFDA', \n            labels = 'Suitable Area'),\n            col.legend = tm_legend(title = \"\"))\n\n# Create table\ntable &lt;- region_suitable_area %&gt;% \n  st_drop_geometry() %&gt;% \n  select(-rgn_key, -rgn_id, -area_m2) %&gt;% \nkbl(col.names = c('Region', \n                  'Total Area (Km2)', \n                  'Suitable Area (Km2)')) %&gt;% \n  kable_classic(full_width = F, \n                html_font = \"Cambria\") %&gt;% \n  footnote(number = paste('EEZ region suitable area for farming', species)) # Paste again\n\nreturn(list( # Make a list of our map and table so they can be called with a buck\n    map = map, \n    table = table\n  ))\n}\n\n\nNow we can call the function for bull kelp values: 10-18 degrees celsius, 40-0 meters deep according to [@weigel2023] and [@cdfw_kelp]\n\nbull_kelp &lt;- map_eez('Bull Kelp')\n\nCall the map\n\nbull_kelp$map\n\nThe visual variable `col` of the layer \"raster\" contains a unique value.\nTherefore a discrete scale is applied (tm_scale_discrete).\n\n\n\n\n\n\n\n\n\nCall the table\n\nbull_kelp$table\n\n\n\n\nRegion\nTotal Area (Km2)\nSuitable Area (Km2)\n\n\n\n\nOregon\n179994.06\n1065.055\n\n\nNorthern California\n164378.81\n1023.031\n\n\nCentral California\n202738.33\n1674.401\n\n\nSouthern California\n206860.78\n1622.344\n\n\nWashington\n66898.31\n3246.458\n\n\n\n1 EEZ region suitable area for farming Bull Kelp"
  }
]