[
  {
    "objectID": "resources.html",
    "href": "resources.html",
    "title": "All my favorite resources",
    "section": "",
    "text": "this is an h1 element\n\n\nthis is an h1 element with the title class\n\n\nthis paragraph is butterscotch\n\n\nthis paragraph is centered\n\n\nthis paragraph is centered and butterscotch\n\n\nHere’s where I’m describing something fun that I enjoy doing\n\nThis\nis\nall\nbutterscotch\n\n\nThis\nis\nall\ncentered"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "I am currently a student who works"
  },
  {
    "objectID": "about.html#what-i-do-for-work",
    "href": "about.html#what-i-do-for-work",
    "title": "About",
    "section": "",
    "text": "I am currently a student who works"
  },
  {
    "objectID": "about.html#what-i-do-for-fun",
    "href": "about.html#what-i-do-for-fun",
    "title": "About",
    "section": "What I do for fun",
    "text": "What I do for fun\nLeague of Legends; give the ppl what they want."
  },
  {
    "objectID": "posts/sf_bay_catches/index.html",
    "href": "posts/sf_bay_catches/index.html",
    "title": "San Fransisco Bay Catch Dynamics",
    "section": "",
    "text": "Wooldridge (2020)\n\n\nThe San Francisco Bay is a large estuarine bay in Northern California which spans 60 miles (Britannica, n.d.). The San Francisco Estuary is the largest estuary in California, with rivers from the ridgeline of the Sierra Nevada mountains leading to the strait of the Golden Gate, including almost 60,000 square miles and nearly 40% of California (Partnership, n.d.). As of 2002, San Francisco Bay sustains nearly 500 species of fish, invertebrates, birds, mammals, insects and amphibians. It is an essential resting place, feeding area, and wintering ground for millions of birds on the Pacific Flyway. Nearly half of the state’s waterfowl and shorebirds and two-third of the state’s salmon pass through the Bay during their migrations (Conservation and Commission 2002).\nIn recent years harmful algal blooms (HABs) have decimated many populations in the bay. HABs are becoming more frequent and more intense across California as waters warm. Decreased flows from inland rivers and streams, and increased concentrations of nutrients and other land-based pollutants additionally exacerbate the growth of algae and cyanotoxins (Council 2022).\nWhen monitoring the bay, it is often difficult to monitor less populated species to the extent of more frequent species. To combat this in this project I will be comparing populations of Northern Anchovy, the most populous species in the bay, to that of other more niche species. For example while we might catch thousands of Northern Anchovy in a season, there may be only one or two Tonguefish.\nThis project is organized in this way:\n\nDirected Acyclic Graph\nData import and preliminary analysis\nIndicator species analysis\nSimulate data to test Hurdle model validity\nCreate function for Hurdle model\nCall function on indicator species in the four regions of the bay:\n\nSouth Bay\nCentral Bay\nSan Pablo Bay\nSuisun Bay\n\n\n\nDAG\nThis analysis is predicated on the same environmental factors effecting Northern Anchovies and other species at similar levels. This leads to a DAG which looks like this:\n\n\nCode\ndag &lt;- dagitty::dagitty('dag {\nbb=\"0,0,1,1\"\n\"Bay Region\" [pos=\"0.375,0.496\"]\n\"Environmental Variables (EG. Toxic algal bloom)\" [pos=\"0.378,0.222\"]\n\"Northern Anchovy Population\" [pos=\"0.277,0.343\"]\n\"Indicator Sp Population\" [pos=\"0.495,0.341\"]\n\"Bay Region\" -&gt; \"Environmental Variables (EG. Toxic algal bloom)\"\n\"Bay Region\" -&gt; \"Northern Anchovy Population\"\n\"Bay Region\" -&gt; \"Indicator Sp Population\"\n\"Environmental Variables (EG. Toxic algal bloom)\" -&gt; \"Northern Anchovy Population\"\n\"Environmental Variables (EG. Toxic algal bloom)\" -&gt; \"Indicator Sp Population\"\n}')\n\npar(mar = c(5,5,5,5))\nplot(dagitty::graphLayout(dag))\n\n\n\n\n\n\n\n\n\n\n\nImport packages\n\n\nCode\npacman::p_load('tidyverse', \n               'here',\n               'janitor',\n               'indicspecies',\n               'MASS',\n               'ggthemes',\n               'stargazer',\n               'broom',\n               'knitr',\n               'kableExtra',\n               'htmltools')\n\n\n\n\nImport and clean data\nFirst we import data which was requested from (Institute n.d.). This data encapsulates individual otter trawls which were taken in the Bay between 1972 and 2017. The net is kept in the water for 5 minutes and then retrieved. A majority of the trawls are taken in the South Bay, however there are consistent year over year trawls in the other regions (Central bay, San Pablo bay, and Suisun bay).\n\n\nCode\n# Raw catch data\ncatch_raw &lt;- read_csv(here::here('posts', 'sf_bay_catches', 'data', 'catch_9218.csv'))\n\n# For easy reference we also import species key \nspecies_key &lt;- read_csv(here::here('posts', 'sf_bay_catches','data', 'species_key.csv'), col_names = FALSE)\n\n\nNow we can clean up the messy dataset and make a functional species key\n\n\nCode\n# The species key has some very difficult first columns so we need to restrict it down to just species code and name\nspecies_key_clean &lt;- species_key[c(4,5),3:125] %&gt;% \n  row_to_names(row_number = 1) %&gt;% \n  clean_names() %&gt;% \n  remove_empty(which = \"rows\") %&gt;% \n  pivot_longer(cols = everything(),names_to = 'species_code', values_to = 'species_name')%&gt;% \n  mutate(species_code = str_to_upper(species_code),\n                                     species_name = str_to_title(str_to_lower(species_name)))\n\nspecies_key_clean %&gt;% \n   kable( format = \"html\", digits = 3,\n      caption = \"Species Key\") %&gt;% \n  kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = FALSE,\n    position   = \"center\",\n    font_size  = 14\n  ) %&gt;% \n  row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;%  # header\n  row_spec(1:nrow(species_key_clean), color = \"black\", background = \"#FFC4EB\") %&gt;% \n  scroll_box(width = \"300px\", height = \"600px\")\n\n\n\n\n\nSpecies Key\n\n\nspecies_code\nspecies_name\n\n\n\n\nAG\nArrow Goby\n\n\nAS\nAmerican Shad\n\n\nBBC\nBrown Bullhead Catfish\n\n\nBG\nBay Goby\n\n\nBHS\nBonyhead Sculpin\n\n\nBOC\nBocaccio Rockfish\n\n\nBP\nBlack Perch\n\n\nBPF\nBay Pipefish\n\n\nBR\nBat Ray\n\n\nBRF\nBolinas Rockfish\n\n\nBRO\nBrown Rockfish\n\n\nBS\nBrown Smoothhound\n\n\nBSC\nBuffalo Sculpin\n\n\nBSF\nBlacktail Snailfish\n\n\nBSK\nBig Skate\n\n\nBSP\nBarred Surfperch\n\n\nCAL\nCalico Surfperch\n\n\nCBZ\nCabezon\n\n\nCG\nChameleon Goby\n\n\nCH\nCalifornia Halibut\n\n\nCLF\nCalifornia Lizardfish\n\n\nCOT\nC-O Turbot\n\n\nCRF\nCopper Rockfish\n\n\nCRL\nCurlfin Turbot\n\n\nCSG\nCheekspot Goby\n\n\nCT\nCalifornia Tonguefish\n\n\nDS\nDover Sole\n\n\nDSP\nDwarf Surfperch\n\n\nDT\nDiamond Turbot\n\n\nEP\nEel Pout\n\n\nES\nEnglish Sole\n\n\nGBY\nGoby Sp.\n\n\nGRF\nGrass Rockfish\n\n\nGRU\nCalif (Silverside) Grunion\n\n\nGS\nGreen Sturgeon\n\n\nHB\nHalibut Sp.\n\n\nHH\nHornyhead Turbot\n\n\nHMP\nHalf Moon Perch\n\n\nJS\nJacksmelt\n\n\nKF\nKelp Fish\n\n\nKG\nKelp Greenling\n\n\nKP\nKelp Pipefish\n\n\nKS\nKing Salmon\n\n\nLC\nLing Cod\n\n\nLFS\nLongfin Smelt\n\n\nLS\nLeopard Shark\n\n\nLSD\nLongfin Sanddab\n\n\nMFE\nMonkey Face Eel\n\n\nMS\nMudsucker\n\n\nNA\nNorthern Anchovy\n\n\nNEW\nNA\n\n\nNMS\nNorthern Midshipman\n\n\nNS\nNight Smelt\n\n\nPB\nPacific Butterfish\n\n\nPEN\nPenpoint Gunnel\n\n\nPER\nPacific Electric Ray\n\n\nPH\nPacific Herring\n\n\nPHB\nPacific Halibut\n\n\nPL\nPacific Lamprey\n\n\nPM\nPacific Mackerel\n\n\nPMS\nPlainfin Midshipman\n\n\nPOM\nPompano\n\n\nPP\nPrickleback\n\n\nPS\nPacific Sardine\n\n\nPSD\nPacific Sanddab\n\n\nPSP\nPile Surfperch\n\n\nPT\nPacific Tomcod\n\n\nRED\nRedtail Surfperch\n\n\nRF\nRockfish\n\n\nRH\nRound Herring\n\n\nRL\nRed Irish Lord\n\n\nRP\nReef Perch\n\n\nRS\nRex Sole\n\n\nRSP\nRainbow Surfperch\n\n\nRUB\nRubberlip Surfperch\n\n\nSAL\nSalmon Species\n\n\nSB\nStriped Bass\n\n\nSBG\nSaddleback Gunnel\n\n\nSC\nSculpin Sp.\n\n\nSCA\nScalyfin Sole\n\n\nSD\nSanddab Sp.\n\n\nSDF\nSpiny Dogfish\n\n\nSF\nStarry Flounder\n\n\nSFS\nSpotfin Surfperch\n\n\nSGF\nShovelnose Guitarfish\n\n\nSGS\nSevengill Shark\n\n\nSH\nUnidentified Shad\n\n\nSHI\nShimofuri Goby\n\n\nSHO\nShokihaze Gobi\n\n\nSHS\nStaghorn Sculpin\n\n\nSIL\nSilver Surfperch\n\n\nSIS\nSilverside\n\n\nSKF\nSpotted Kelpfish\n\n\nSM\nSmelt Sp.\n\n\nSMS\nSpecked Fin Midshipman\n\n\nSN\nSnailfish Sp.\n\n\nSPT\nSpotted Turbot\n\n\nSS\nSand Sole\n\n\nSSD\nSpeckled Sanddab\n\n\nSSN\nShowy Snailfish\n\n\nSSP\nShiner Surfperch\n\n\nSTU\nSturgeon Species\n\n\nSUR\nSurf Smelt\n\n\nTC\nTomcod\n\n\nTFS\nThreadfin Shad\n\n\nTHS\nThorny Sculpin\n\n\nTP\nTule Perch\n\n\nTPS\nTidepool Sculpin\n\n\nTR\nThornback Ray\n\n\nTS\nTopsmelt\n\n\nTSS\nThree Spine Stickleback\n\n\nUG\nUnknown Goby Species\n\n\nUMS\nUnidentified Midshipman\n\n\nUS\nUnknown Sole Species\n\n\nUSP\nSurfperch, Species Unknown\n\n\nWBS\nWhitebait Smelt\n\n\nWC\nWhite Croaker\n\n\nWHS\nWhite Surfperch\n\n\nWS\nWhite Sturgeon\n\n\nWSB\nWhite Seabass\n\n\nWSP\nWalleye Surfperch\n\n\nYG\nYellowfin Goby\n\n\nYR\nYellowtail Rockfish\n\n\n\n\n\n\n\n\n\nCode\n# The catch data is much cleaner, all we need is a quick clean names\ncatch_clean &lt;- catch_raw %&gt;% \n  clean_names()\n\ncatch_clean$species_code[is.na(catch_clean$species_code)] &lt;- 'NA'\n\ncatch_clean %&gt;% \n  head(100) %&gt;% \n  kable( format = \"html\", digits = 3,\n      caption = tags$caption(\n      \"100 Rows of Catch Data\",\n      style = \"caption-side: top; text-align: left; font-weight: bold; color: #A0185A; font-size: 16px;\"\n    )) %&gt;% \n  kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = FALSE,\n    position   = \"left\",\n    font_size  = 14\n  ) %&gt;% \n  row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;%  # header\n  scroll_box(width = \"800px\", height = \"300px\")\n\n\n\n100 Rows of Catch Data\n \n  \n    catch_info_trawl_id \n    species_code \n    size \n    class \n    number \n    sex \n    trawl_map_trawl_id \n    locale \n    trawl_map_training_trawl \n    trawl_map_data_audit \n    expr1 \n    expr2 \n    trawl_info_trawl_id \n    hydro_id \n    scientists \n    intern \n    date \n    school \n    trawl_time_begin \n    trawl_time_end \n    trawl_time_total \n    depth_of_trawl \n    tidal_current \n    last_slack_time \n    last_slack_tide \n    last_slack_height \n    sample_station \n    water_type \n    substrate \n    net_drag_bottom \n    line_length \n    start_latitude \n    start_longitude \n    end_latitude \n    end_longitude \n    field0 \n    field1 \n  \n \n\n  \n    10 \n    SSP \n    0 \n    NA \n    1 \n    NA \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    SSP \n    90 \n    NA \n    1 \n    NA \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    SSP \n    56 \n    NA \n    1 \n    NA \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    NA \n    NA \n    NA \n    15 \n    NA \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    CH \n    NA \n    NA \n    4 \n    NA \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    BS \n    480 \n    NA \n    1 \n    F \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    BS \n    370 \n    NA \n    1 \n    M \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    PMS \n    NA \n    NA \n    4 \n    NA \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    SSP \n    NA \n    NA \n    2 \n    NA \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    LS \n    460 \n    46 \n    1 \n    M \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    10 \n    BR \n    615 \n    62 \n    1 \n    M \n    10 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    10 \n    NA \n    KRISTEN \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1340 \n    1355 \n    15 \n    6.40 \n    EBB \n    NA \n    NA \n    NA \n    NA \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    11 \n    NA \n    NA \n    NA \n    20 \n    NA \n    11 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    11 \n    NA \n    TANYA \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    6.40 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    11 \n    PMS \n    NA \n    NA \n    8 \n    NA \n    11 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    11 \n    NA \n    TANYA \n    ANTOINETTE \n    01-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    6.40 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    14 \n    NA \n    NA \n    NA \n    2 \n    NA \n    14 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    14 \n    NA \n    RENAE \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1350 \n    1405 \n    15 \n    3.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    E \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    14 \n    CH \n    NA \n    NA \n    15 \n    NA \n    14 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    14 \n    NA \n    RENAE \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1350 \n    1405 \n    15 \n    3.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    E \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    14 \n    PMS \n    NA \n    NA \n    7 \n    NA \n    14 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    14 \n    NA \n    RENAE \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1350 \n    1405 \n    15 \n    3.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    E \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    14 \n    SSP \n    NA \n    NA \n    6 \n    NA \n    14 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    14 \n    NA \n    RENAE \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1350 \n    1405 \n    15 \n    3.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    E \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    17 \n    YG \n    NA \n    NA \n    2 \n    NA \n    17 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    17 \n    NA \n    EGP \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1445 \n    1500 \n    15 \n    5.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    I \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    17 \n    BR \n    430 \n    44 \n    1 \n    F \n    17 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    17 \n    NA \n    EGP \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1445 \n    1500 \n    15 \n    5.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    I \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    17 \n    CG \n    NA \n    NA \n    3 \n    NA \n    17 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    17 \n    NA \n    EGP \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1445 \n    1500 \n    15 \n    5.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    I \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    17 \n    NA \n    NA \n    NA \n    31 \n    NA \n    17 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    17 \n    NA \n    EGP \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1445 \n    1500 \n    15 \n    5.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    I \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    17 \n    CH \n    NA \n    NA \n    7 \n    NA \n    17 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    17 \n    NA \n    EGP \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1445 \n    1500 \n    15 \n    5.00 \n    FLOOD \n    1232 \n    NA \n    NA \n    I \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    18 \n    SSD \n    NA \n    NA \n    5 \n    NA \n    18 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    18 \n    NA \n    CAROL \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    10.00 \n    FLOOD \n    NA \n    NA \n    NA \n    J-5 \n    CHANNEL \n    MUD \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    18 \n    CH \n    NA \n    NA \n    4 \n    NA \n    18 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    18 \n    NA \n    CAROL \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    10.00 \n    FLOOD \n    NA \n    NA \n    NA \n    J-5 \n    CHANNEL \n    MUD \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    18 \n    YG \n    NA \n    NA \n    4 \n    NA \n    18 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    18 \n    NA \n    CAROL \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    10.00 \n    FLOOD \n    NA \n    NA \n    NA \n    J-5 \n    CHANNEL \n    MUD \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    18 \n    NA \n    NA \n    NA \n    5 \n    NA \n    18 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    18 \n    NA \n    CAROL \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    10.00 \n    FLOOD \n    NA \n    NA \n    NA \n    J-5 \n    CHANNEL \n    MUD \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    18 \n    PMS \n    NA \n    NA \n    40 \n    NA \n    18 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    18 \n    NA \n    CAROL \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    10.00 \n    FLOOD \n    NA \n    NA \n    NA \n    J-5 \n    CHANNEL \n    MUD \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    18 \n    CG \n    NA \n    NA \n    4 \n    NA \n    18 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    18 \n    NA \n    CAROL \n    LISA MARIE \n    02-Oct-92 \n    WALT DISNEY \n    1540 \n    1555 \n    15 \n    10.00 \n    FLOOD \n    NA \n    NA \n    NA \n    J-5 \n    CHANNEL \n    MUD \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    19 \n    SSP \n    NA \n    NA \n    14 \n    NA \n    19 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    19 \n    2 \n    CAROL \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    859 \n    915 \n    16 \n    5.67 \n    EBB \n    822 \n    NA \n    NA \n    C-2 \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    19 \n    SS \n    NA \n    NA \n    2 \n    NA \n    19 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    19 \n    2 \n    CAROL \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    859 \n    915 \n    16 \n    5.67 \n    EBB \n    822 \n    NA \n    NA \n    C-2 \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    19 \n    DT \n    NA \n    NA \n    3 \n    NA \n    19 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    19 \n    2 \n    CAROL \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    859 \n    915 \n    16 \n    5.67 \n    EBB \n    822 \n    NA \n    NA \n    C-2 \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    19 \n    CH \n    NA \n    NA \n    35 \n    NA \n    19 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    19 \n    2 \n    CAROL \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    859 \n    915 \n    16 \n    5.67 \n    EBB \n    822 \n    NA \n    NA \n    C-2 \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    19 \n    PMS \n    NA \n    NA \n    60 \n    NA \n    19 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    19 \n    2 \n    CAROL \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    859 \n    915 \n    16 \n    5.67 \n    EBB \n    822 \n    NA \n    NA \n    C-2 \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    19 \n    NA \n    NA \n    NA \n    101 \n    NA \n    19 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    19 \n    2 \n    CAROL \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    859 \n    915 \n    16 \n    5.67 \n    EBB \n    822 \n    NA \n    NA \n    C-2 \n    SHOAL \n    NA \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    20 \n    NA \n    NA \n    NA \n    750 \n    NA \n    20 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    20 \n    3 \n    SUSAN \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    945 \n    1000 \n    15 \n    5.00 \n    EBB \n    822 \n    NA \n    NA \n    E \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    20 \n    CH \n    NA \n    NA \n    4 \n    NA \n    20 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    20 \n    3 \n    SUSAN \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    945 \n    1000 \n    15 \n    5.00 \n    EBB \n    822 \n    NA \n    NA \n    E \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    20 \n    PMS \n    NA \n    NA \n    6 \n    NA \n    20 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    20 \n    3 \n    SUSAN \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    945 \n    1000 \n    15 \n    5.00 \n    EBB \n    822 \n    NA \n    NA \n    E \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    20 \n    BG \n    NA \n    NA \n    3 \n    NA \n    20 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    20 \n    3 \n    SUSAN \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    945 \n    1000 \n    15 \n    5.00 \n    EBB \n    822 \n    NA \n    NA \n    E \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    20 \n    BSP \n    NA \n    NA \n    3 \n    NA \n    20 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    20 \n    3 \n    SUSAN \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    945 \n    1000 \n    15 \n    5.00 \n    EBB \n    822 \n    NA \n    NA \n    E \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    20 \n    SHS \n    NA \n    NA \n    2 \n    NA \n    20 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    20 \n    3 \n    SUSAN \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    945 \n    1000 \n    15 \n    5.00 \n    EBB \n    822 \n    NA \n    NA \n    E \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    20 \n    SSP \n    NA \n    NA \n    10 \n    NA \n    20 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    20 \n    3 \n    SUSAN \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    945 \n    1000 \n    15 \n    5.00 \n    EBB \n    822 \n    NA \n    NA \n    E \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    21 \n    NA \n    NA \n    NA \n    18 \n    NA \n    21 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    21 \n    4 \n    LISA \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    1035 \n    1050 \n    15 \n    7.60 \n    EBB \n    822 \n    NA \n    NA \n    F \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    21 \n    SSP \n    NA \n    NA \n    10 \n    NA \n    21 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    21 \n    4 \n    LISA \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    1035 \n    1050 \n    15 \n    7.60 \n    EBB \n    822 \n    NA \n    NA \n    F \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    21 \n    CG \n    NA \n    NA \n    18 \n    NA \n    21 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    21 \n    4 \n    LISA \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    1035 \n    1050 \n    15 \n    7.60 \n    EBB \n    822 \n    NA \n    NA \n    F \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    21 \n    CH \n    NA \n    NA \n    8 \n    NA \n    21 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    21 \n    4 \n    LISA \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    1035 \n    1050 \n    15 \n    7.60 \n    EBB \n    822 \n    NA \n    NA \n    F \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    21 \n    SHS \n    NA \n    NA \n    7 \n    NA \n    21 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    21 \n    4 \n    LISA \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    1035 \n    1050 \n    15 \n    7.60 \n    EBB \n    822 \n    NA \n    NA \n    F \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    21 \n    PMS \n    NA \n    NA \n    3 \n    NA \n    21 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    21 \n    4 \n    LISA \n    DAVE \n    03-Oct-92 \n    TEACHER SEMINAR \n    1035 \n    1050 \n    15 \n    7.60 \n    EBB \n    822 \n    NA \n    NA \n    F \n    SHOAL \n    SHELLS \n    TRUE \n    30 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    NA \n    NA \n    7 \n    2 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    SSP \n    NA \n    8 \n    1 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CG \n    NA \n    7 \n    2 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CG \n    NA \n    6 \n    4 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CG \n    NA \n    5 \n    10 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CG \n    NA \n    4 \n    6 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    SSD \n    NA \n    5 \n    1 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    SHS \n    NA \n    13 \n    1 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CT \n    NA \n    18 \n    1 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CH \n    NA \n    16 \n    1 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    DSP \n    NA \n    10 \n    1 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CH \n    NA \n    24 \n    1 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    23 \n    CH \n    NA \n    20 \n    2 \n    NA \n    23 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    23 \n    NA \n    EGP \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    840 \n    857 \n    17 \n    NA \n    NA \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CH \n    NA \n    21 \n    1 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CG \n    NA \n    8 \n    1 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CG \n    NA \n    7 \n    2 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CG \n    NA \n    6 \n    7 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CG \n    NA \n    5 \n    16 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CG \n    NA \n    4 \n    12 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CG \n    NA \n    3 \n    1 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CH \n    NA \n    11 \n    1 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CH \n    NA \n    12 \n    2 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    DSP \n    NA \n    8 \n    2 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    SHS \n    NA \n    12 \n    1 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    25 \n    CH \n    NA \n    10 \n    1 \n    NA \n    25 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    25 \n    NA \n    TONY \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    930 \n    945 \n    15 \n    NA \n    NA \n    NA \n    NA \n    NA \n    B-1 \n    SHOAL \n    NA \n    TRUE \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    26 \n    CH \n    NA \n    18 \n    1 \n    NA \n    26 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    26 \n    NA \n    CAROL \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    1035 \n    1050 \n    15 \n    NA \n    EBB \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    26 \n    BSP \n    NA \n    10 \n    1 \n    NA \n    26 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    26 \n    NA \n    CAROL \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    1035 \n    1050 \n    15 \n    NA \n    EBB \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    26 \n    CG \n    NA \n    4 \n    1 \n    NA \n    26 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    26 \n    NA \n    CAROL \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    1035 \n    1050 \n    15 \n    NA \n    EBB \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    26 \n    PSD \n    NA \n    6 \n    1 \n    NA \n    26 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    26 \n    NA \n    CAROL \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    1035 \n    1050 \n    15 \n    NA \n    EBB \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    26 \n    CG \n    NA \n    7 \n    1 \n    NA \n    26 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    26 \n    NA \n    CAROL \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    1035 \n    1050 \n    15 \n    NA \n    EBB \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    26 \n    CG \n    NA \n    8 \n    1 \n    NA \n    26 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    26 \n    NA \n    CAROL \n    DAVE \n    05-Oct-92 \n    BOLLINGER \n    1035 \n    1050 \n    15 \n    NA \n    EBB \n    NA \n    NA \n    NA \n    D-3 \n    SHOAL \n    SHELLS \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    NA \n    NA \n    6 \n    16 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    CG \n    NA \n    4 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    BR \n    360 \n    37 \n    1 \n    F \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    BR \n    500 \n    51 \n    1 \n    M \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    BR \n    350 \n    36 \n    1 \n    F \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    PMS \n    NA \n    5 \n    2 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    PMS \n    NA \n    6 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    NA \n    NA \n    5 \n    16 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    NA \n    NA \n    7 \n    15 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    NA \n    NA \n    8 \n    11 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    NA \n    NA \n    9 \n    6 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    NA \n    NA \n    10 \n    10 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    SSP \n    NA \n    13 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    CG \n    NA \n    6 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    NA \n    NA \n    4 \n    7 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    CH \n    NA \n    23 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    SSP \n    NA \n    10 \n    2 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    WC \n    NA \n    20 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    BSP \n    NA \n    17 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    CH \n    NA \n    21 \n    3 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    CH \n    NA \n    22 \n    2 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n  \n    28 \n    CH \n    NA \n    18 \n    1 \n    NA \n    28 \n    SOUTH BAY \n    NA \n    NA \n    1992 \n    10 \n    28 \n    NA \n    EGP \n    EGP \n    06-Oct-92 \n    NA \n    850 \n    905 \n    15 \n    8.00 \n    NA \n    NA \n    NA \n    NA \n    J-5 \n    SHOAL \n    NA \n    TRUE \n    66 \n    NA \n    NA \n    NA \n    NA \n    NA \n    NA \n  \n\n\n\n\n\n\nPreliminary analysis: Top Species\nWe want to display the top 10 species caught by quantity to see what species we are catching most\n\n\nCode\ntop_10_catch &lt;- catch_clean %&gt;%\n  left_join(species_key_clean,\n            by = \"species_code\") %&gt;%\n  group_by(species_name) %&gt;%\n  summarise(total_catch = sum(number, na.rm = TRUE)) %&gt;%\n  arrange(desc(total_catch)) %&gt;%\n  slice_head(n = 10) \n\ntop_10_catch %&gt;% \nrename('Species Name' = species_name,\n             'Total Catch' = total_catch) %&gt;%  \nkable( format = \"html\", digits = 3,\n      caption = \"Top 10 Species Caught in the SF Bay\") %&gt;% \n  kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = FALSE,\n    position   = \"center\",\n    font_size  = 14\n  ) %&gt;% \n  row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;%  # header\n  row_spec(1:nrow(top_10_catch), color = \"black\", background = \"#FFC4EB\")\n\n\n\n\nTop 10 Species Caught in the SF Bay\n\n\nSpecies Name\nTotal Catch\n\n\n\n\nNorthern Anchovy\n640618\n\n\nShiner Surfperch\n128489\n\n\nEnglish Sole\n84714\n\n\nStaghorn Sculpin\n27409\n\n\nPacific Herring\n25755\n\n\nSpeckled Sanddab\n15305\n\n\nCalifornia Halibut\n14069\n\n\nPlainfin Midshipman\n13662\n\n\nSanddab Sp.\n13231\n\n\nWhite Croaker\n11443\n\n\n\n\n\n\nIn this analysis we will take the most abundant species, Northern Anchovy, and compare it with indicator species from the different regions of the bay.\nHere is a plot of the catch based on date with anchovies colored Pink as to get an idea of what the data looks like.\n\n\nCode\nlibrary(patchwork)\n\n\n\nAttaching package: 'patchwork'\n\n\nThe following object is masked from 'package:MASS':\n\n    area\n\n\nCode\ncatch_plot &lt;- catch_clean %&gt;% \n  mutate(date = dmy(date)) \n\n\ncatch_plot$species_group &lt;- ifelse(catch_plot$species_code == \"NA\",\n                                   \"Anchovy\",\n                                   \"Not Anchovy\")\n\nggplot(catch_plot, aes(x = date, y = number,\n                       color = species_group)) +\n  geom_point(alpha = .3) +\n  ggthemes::theme_few()+\n  labs(x = \"Date\",\n       y = \"Number Caught (Per Trawl)\",\n       title = \"Number of Fish Caught per Year\",\n       color = \"Species\") +\n  scale_color_manual(values = c(\"Not Anchovy\" = \"black\",\n                                \"Anchovy\" = \"#A0185A\"))+\n  facet_wrap(~species_group)\n\n\n\n\n\n\n\n\n\nIn this plot we can see that we catch Anchovies at a much higher quantity per trawl as well as over time. The bottom plots show a smaller date range so we can see peaks in Anchovies that are not as apparent in other species. There are some sampling gaps that become apparent in 1984 as well as 1988, with much fewer observations in general in the 80’s. This may result in less representative data.\n\n\nPreliminary analysis: Indicator species\nIndicator species:\n\nreflect the biotic or abiotic state of the environment;\nprovide evidence for the impacts of environmental change; or\npredict the diversity of other species, taxa or communities within a area group\n\nBy comparing Anchovy population to that of indicator species, it may shed light on whether Anchovy population can be representative of the indicator. We will be performing analyses on the four locales apparent in the bay as the indicator analysis is predicated on the fact the indicator species indicates the area group it is in.\nTo perform the indicator species analysis we will be using the function multipatt from the package indispecies. The function takes a group vector and a species matrix\n\n\nCode\nindicator &lt;- catch_clean %&gt;% \n  dplyr::select(catch_info_trawl_id, species_code, number, locale) %&gt;% \n  pivot_wider(names_from = species_code, values_from = number, values_fn = sum) %&gt;% \n  mutate(across(where(is.numeric), ~replace_na(., 0))) %&gt;% \n  filter(!locale == 'BLANK')\n\ngroup_vector &lt;- indicator$locale\n\nspecies_matrix &lt;- as.matrix(indicator[, -c(1, 2)])\n\n\nNow we can run the function multipatt to find indicator species values for our groups\n\n\nCode\nindval &lt;- multipatt(species_matrix, group_vector, \n                    control = how(nperm=999)) \n\n\n\n\nCode\nsummary(indval, alpha = .1)\n\n\n\n Multilevel pattern analysis\n ---------------------------\n\n Association function: IndVal.g\n Significance level (alpha): 0.1\n\n Total number of species: 162\n Selected number of species: 50 \n Number of species associated to 1 group: 33 \n Number of species associated to 2 groups: 12 \n Number of species associated to 3 groups: 5 \n\n List of species associated to each combination: \n\n Group CENTRAL BAY  #sps.  13 \n     stat p.value   \nSSD 0.456   0.010 **\nCLF 0.217   0.033 * \nPOM 0.110   0.020 * \nps  0.066   0.068 . \nHH  0.065   0.075 . \nCRL 0.065   0.089 . \nOP  0.059   0.040 * \nJM  0.059   0.037 * \nBSC 0.050   0.048 * \nes  0.046   0.077 . \nIRL 0.042   0.040 * \nssd 0.042   0.029 * \nPB  0.039   0.089 . \n\n Group SAN PABLO BAY  #sps.  4 \n     stat p.value  \nBR  0.449   0.017 *\nDT  0.328   0.043 *\nTS  0.277   0.024 *\nBSK 0.214   0.053 .\n\n Group SOUTH BAY  #sps.  2 \n     stat p.value  \nCT  0.308   0.061 .\nDSP 0.285   0.085 .\n\n Group SUISUN BAY  #sps.  14 \n     stat p.value    \nSB  0.880   0.001 ***\nSF  0.768   0.001 ***\nTFS 0.417   0.001 ***\nSST 0.303   0.001 ***\nDLS 0.204   0.007 ** \nBDG 0.204   0.006 ** \nTP  0.148   0.008 ** \nCC  0.129   0.004 ** \nBLP 0.129   0.003 ** \nCK  0.091   0.014 *  \nKS  0.091   0.024 *  \nDS  0.089   0.026 *  \nBBC 0.088   0.015 *  \nPL  0.086   0.059 .  \n\n Group CENTRAL BAY+SAN PABLO BAY  #sps.  6 \n     stat p.value    \nPMS 0.652   0.001 ***\nPH  0.535   0.003 ** \nBG  0.495   0.002 ** \nBPF 0.338   0.015 *  \nWSP 0.320   0.013 *  \nBHS 0.225   0.083 .  \n\n Group CENTRAL BAY+SOUTH BAY  #sps.  1 \n    stat p.value  \nSD 0.381   0.042 *\n\n Group CENTRAL BAY+SUISUN BAY  #sps.  1 \n    stat p.value  \nPS 0.267   0.038 *\n\n Group SAN PABLO BAY+SOUTH BAY  #sps.  1 \n    stat p.value  \nBS 0.343   0.034 *\n\n Group SAN PABLO BAY+SUISUN BAY  #sps.  2 \n     stat p.value    \nYG  0.574   0.001 ***\nLFS 0.538   0.001 ***\n\n Group SOUTH BAY+SUISUN BAY  #sps.  1 \n   stat p.value  \nUG 0.32   0.047 *\n\n Group CENTRAL BAY+SAN PABLO BAY+SOUTH BAY  #sps.  3 \n     stat p.value    \nNA  0.811   0.001 ***\nSSP 0.762   0.004 ** \nWC  0.385   0.044 *  \n\n Group CENTRAL BAY+SAN PABLO BAY+SUISUN BAY  #sps.  1 \n     stat p.value    \nPSD 0.527   0.001 ***\n\n Group SAN PABLO BAY+SOUTH BAY+SUISUN BAY  #sps.  1 \n    stat p.value  \nLS 0.353   0.041 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\n\nThe output of that looks pretty bad, and the function does not let you pull out different pieces without the P-values changing so I made this reference table of the top 2 species in each singular group.\n\n\nCode\nind_table &lt;- data.frame(\n  Species = c(\n    \"SSD\", \"CLF\",        # CENTRAL BAY top 2\n    \"BR\", \"DT\",          # SAN PABLO BAY top 2\n    \"CT\", \"DSP\",         # SOUTH BAY top 2\n    \"SB\", \"SF\"           # SUISUN BAY top 2\n  ),\n  Group = c(\n    rep(\"CENTRAL BAY\", 2),\n    rep(\"SAN PABLO BAY\", 2),\n    rep(\"SOUTH BAY\", 2),\n    rep(\"SUISUN BAY\", 2)\n  ),\n  Stat = c(\n    0.456, 0.217,        # CENTRAL BAY\n    0.449, 0.328,        # SAN PABLO BAY\n    0.308, 0.285,        # SOUTH BAY\n    0.880, 0.768         # SUISUN BAY\n  ),\n  'P_Value' = c(\n    0.008, 0.044,        # CENTRAL BAY\n    0.009, 0.051,        # SAN PABLO BAY\n    0.072, 0.077,        # SOUTH BAY\n    0.001, 0.001         # SUISUN BAY\n  )\n) \n  \nind_table %&gt;% \n  kable( format = \"html\", digits = 3,\n      caption = \"Top 2 indicator species in each region \") %&gt;% \n  kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = FALSE,\n    position   = \"center\",\n    font_size  = 14\n  ) %&gt;% \n  row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;%  # header\n  row_spec(1:nrow(ind_table), color = \"black\", background = \"#FFC4EB\") %&gt;% \n  scroll_box(width = \"300px\", height = \"400px\")\n\n\n\n\n\nTop 2 indicator species in each region\n\n\nSpecies\nGroup\nStat\nP_Value\n\n\n\n\nSSD\nCENTRAL BAY\n0.456\n0.008\n\n\nCLF\nCENTRAL BAY\n0.217\n0.044\n\n\nBR\nSAN PABLO BAY\n0.449\n0.009\n\n\nDT\nSAN PABLO BAY\n0.328\n0.051\n\n\nCT\nSOUTH BAY\n0.308\n0.072\n\n\nDSP\nSOUTH BAY\n0.285\n0.077\n\n\nSB\nSUISUN BAY\n0.880\n0.001\n\n\nSF\nSUISUN BAY\n0.768\n0.001\n\n\n\n\n\n\n\nFrom the summary we can see that the top species for the four San Francisco Bay locales are:\nGroup CENTRAL BAY SSD: Speckled Sanddab\nGroup SAN PABLO BAY BR: Bat Ray\nGroup SOUTH BAY CT: California Tonguefish\nGroup SUISUN BAY SB: Striped Bass\nNext we are going to compare Northern Anchovy catches to these species using a hurdle model\n\n\nHurdle model and create function\nHurdle Models are a class of models for count data that help handle excess zeros and over dispersion, which fits our data nicely. It handles these by treating presence as a binary operator (present vs not present) and running a binomial(link = ‘logit’) model. The model also includes abundance, which analyzes count data using a negative binomial model.\nPresence: \\[\n\\begin{align}\n\\text{Presence} &\\sim Binomial(1, p) \\\\\nlogit(p) &= \\beta_0 + \\beta_1 \\text{NorthernAnchovyZ}* \\beta_2 \\text{inregion}\n\\end{align}\n\\] Abundance: \\[\n\\begin{align}\n\\text{Abundance} &\\sim NegBin(\\lambda, \\theta) \\\\\nlog(\\lambda) &= \\beta_0 + \\beta_1 \\text{NorthernAnchovyZ}* \\beta_2 \\text{inregion}\n\\end{align}\n\\]\nIf we can use Northern Anchovy as a predictor for indicator species, we would expect both\nAssumption: \\[\n\\begin{align}\n\\ H_0 = \\beta_1presence = 0 \\\\\n\\ H_0 = \\beta_1abundance = 0 \\\\\n\\ H_A = \\beta_1presence \\ne 0\\\\\n\\ H_A = \\beta_1abundance \\ne 0\\\\\n\\end{align}\n\\]\nWe use the z-score transformed count of Northern Anchovy as it:\n\nHelps with numerical stability, especially in interaction terms\nIs useful when comparing effect sizes across variables on different scales\n\n\n\nSimulate data\nBefore we use this model we will be simulating data in an attempt to see if the model is appropriate for our data.\n\n\nCode\nset.seed(42)\n\nn_sim &lt;- 1000\n\n# Predictor: standardized anchovy index\nnorthern_anchovy_z &lt;- rnorm(n_sim, mean = 0, sd = 1)\n\n# in_region (TRUE/FALSE)\nin_region &lt;- rep(c(TRUE, FALSE), length.out = n_sim)\n\n# Logistic (presence/absence)\nbeta0_presence &lt;- -0.5\nbeta1_presence &lt;-  1.2\nbeta_region_presence &lt;- 0.5              \nbeta_interaction_presence &lt;- -0.3        \n\n# Abundance (given present)\nbeta0_abundance &lt;- 0.7\nbeta1_abundance &lt;- 0.4\nbeta_region_abundance &lt;- -0.6            \nbeta_interaction_abundance &lt;- 0.2        \n\ntheta &lt;- 1.8  # NB dispersion\n\n# Probability of presence *including region + interaction*\nlinpred_presence &lt;- beta0_presence +\n  beta1_presence * northern_anchovy_z +\n  beta_region_presence * in_region +\n  beta_interaction_presence * northern_anchovy_z * in_region\n\np_presence &lt;- plogis(linpred_presence)\n\n# Storage\npresence  &lt;- rep(0, n_sim)\nabundance &lt;- rep(0, n_sim)\n\nfor (i in 1:n_sim) {\n\n  presence[i] &lt;- rbinom(1, 1, p_presence[i])\n\n  if (presence[i] == 1) {\n\n    # abundance linear predictor\n    linpred_abundance &lt;- beta0_abundance +\n      beta1_abundance * northern_anchovy_z[i] +\n      beta_region_abundance * in_region[i] +\n      beta_interaction_abundance * northern_anchovy_z[i] * in_region[i]\n\n    lambda_i &lt;- exp(linpred_abundance)\n\n    repeat {\n      y &lt;- rnbinom(1, mu = lambda_i, size = theta)\n      if (y &gt; 0) {\n        abundance[i] &lt;- y\n        break\n      }\n    }\n  }\n}\n\nsim_data &lt;- tibble(\n  northern_anchovy_z,\n  in_region,\n  presence,\n  abundance\n)\n\n\n\nModel Simulated data\n\n\nCode\nm1 &lt;- glm(presence ~ northern_anchovy_z * in_region, \n          data = sim_data, \n          family = binomial(link = 'logit'))\n\nm2 &lt;- glm.nb(abundance ~ northern_anchovy_z * in_region, \n             data = sim_data)\n\nm1_tidy &lt;- tidy(m1)%&gt;% \n  mutate(model = \"Presence (Logit)\")\nm2_tidy &lt;- tidy(m2)%&gt;% \n  mutate(model = \"Abundance (NegBin)\")\n\n# combine and format\nall_models &lt;- bind_rows(m1_tidy, m2_tidy) %&gt;%\n  dplyr::select(model, term, estimate, std.error, statistic, p.value)%&gt;%\n  rename(\n    Model = model,\n    Term = term,\n    Estimate = estimate,\n    SE = std.error,\n    'Test Stat' = statistic,\n    'P-Value'   = p.value\n  ) \n\nkable(all_models, format = \"html\", digits = 3,\n      caption = \"Joint Model Output: Presence vs Abundance\")%&gt;%\n  kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = FALSE,\n    position   = \"center\",\n    font_size  = 14\n  ) %&gt;% \n  row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;%  # header\n  row_spec(1:nrow(all_models), color = \"black\", background = \"#FFC4EB\")  # body rows\n\n\n\n\nJoint Model Output: Presence vs Abundance\n\n\nModel\nTerm\nEstimate\nSE\nTest Stat\nP-Value\n\n\n\n\nPresence (Logit)\n(Intercept)\n-0.277\n0.103\n-2.690\n0.007\n\n\nPresence (Logit)\nnorthern_anchovy_z\n1.233\n0.132\n9.362\n0.000\n\n\nPresence (Logit)\nin_regionTRUE\n0.212\n0.141\n1.508\n0.131\n\n\nPresence (Logit)\nnorthern_anchovy_z:in_regionTRUE\n-0.388\n0.172\n-2.260\n0.024\n\n\nAbundance (NegBin)\n(Intercept)\n0.025\n0.072\n0.345\n0.730\n\n\nAbundance (NegBin)\nnorthern_anchovy_z\n0.972\n0.072\n13.463\n0.000\n\n\nAbundance (NegBin)\nin_regionTRUE\n-0.045\n0.100\n-0.449\n0.653\n\n\nAbundance (NegBin)\nnorthern_anchovy_z:in_regionTRUE\n-0.251\n0.102\n-2.464\n0.014\n\n\n\n\n\n\nThat looks great! Our values for the parameters were returned!\nBecause we are running and fitting this model four times, it sounds like I should make it into a function\n\n\n\nFunction\n\n\nCode\n#' predict indicator\n#' @param df\n#' Data frame used for analysis\n#' @param sp_code \n#' Species code (wrapped in '')\n#' @param region \n#' Locale (all capitals wrapped in '')\n#' @returns\n#' a list containing: \n#' summary_table \n#' pred_pres_table\n#'  pred_abu_table \n#'  combined_table \n#'  stage1_pred \n#'  stage2_pred\n#'  combined_pred \n#'  plot \n#' @export\n#'\n#' @examples\npredict_indicator &lt;- function(df, sp_code, region) {\n\n  species_name &lt;- species_key_clean %&gt;% \n    filter(species_code == sp_code) %&gt;% \n    pull(species_name) %&gt;% \n    make_clean_names()\n\n  catch_plot &lt;- df %&gt;% \n    filter(species_code == 'NA' | species_code == sp_code) %&gt;% \n    mutate(in_region = ifelse(locale == region, TRUE, FALSE)) %&gt;% \n    group_by(species_code, catch_info_trawl_id, in_region) %&gt;% \n    summarize(count = sum(number), .groups = \"drop\") %&gt;% \n    pivot_wider(names_from = species_code,\n                values_from = count) %&gt;% \n    set_names(c('trawl_id', 'in_region', 'northern_anchovy', species_name)) \n\n  catch_plot[is.na(catch_plot)] &lt;- 0\n\n  a &lt;- mean(catch_plot$northern_anchovy)\n  b &lt;- sd(catch_plot$northern_anchovy)\n\n  catch_plot &lt;- catch_plot %&gt;% \n    mutate(\n      northern_anchovy_z = (northern_anchovy - a) / b,\n      presence = ifelse(.data[[species_name]] &gt; 0, 1, 0),\n      abundance = ifelse(.data[[species_name]] &gt; 0, .data[[species_name]], NA)\n    )\n\n  # Stage 1 & 2 models\n  m1 &lt;- glm(presence ~ northern_anchovy_z * in_region, data = catch_plot, family = binomial(link = 'logit'))\n  m2 &lt;- glm.nb(abundance ~ northern_anchovy_z * in_region, data = catch_plot)\n\n  # Tidy outputs\n  m1_tidy &lt;- tidy(m1) %&gt;% mutate(model = \"Presence (Logit)\")\n  m2_tidy &lt;- tidy(m2) %&gt;% mutate(model = \"Abundance (NegBin)\")\n\n  all_models &lt;- bind_rows(m1_tidy, m2_tidy) %&gt;%\n    dplyr::select(model, term, estimate, std.error, statistic, p.value) %&gt;%\n    rename(\n      Model = model,\n      Term = term,\n      Estimate = estimate,\n      SE = std.error,\n      'Test Stat' = statistic,\n      'P-Value' = p.value\n    )\n\n  # Styled kable for model summary\n  summary_table &lt;- all_models %&gt;% \n    kable(format = \"html\", digits = 3, caption = \"Joint Model Output: Presence vs Abundance\") %&gt;% \n    kable_styling(\n      bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n      full_width = FALSE,\n      position = \"center\",\n      font_size = 14\n    ) %&gt;% \n    row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;% \n    row_spec(1:nrow(all_models), color = \"black\", background = \"#FFC4EB\")\n\n  # Prediction grid\n  grid_data &lt;- expand_grid(\n    in_region = c(TRUE, FALSE),\n    northern_anchovy_z = seq(min(catch_plot$northern_anchovy_z), max(catch_plot$northern_anchovy_z), by = 1)\n  )\n\n  # Predictions\n  predict_pres &lt;- predict(m1, newdata = grid_data, type = \"link\", se.fit = TRUE)\n  predict_abu  &lt;- predict(m2, newdata = grid_data, type = \"link\", se.fit = TRUE)\n\n  pred_pres_result &lt;- grid_data %&gt;% \n    mutate(\n      fit_link = predict_pres$fit,\n      se = predict_pres$se.fit,\n      pred_tbs = plogis(fit_link),\n      lower = plogis(fit_link - 1.96*se),\n      upper = plogis(fit_link + 1.96*se)\n    )\n\n  pred_abu_result &lt;- grid_data %&gt;% \n    mutate(\n      fit_link = predict_abu$fit,\n      se = predict_abu$se.fit,\n      pred_tbs = exp(fit_link),\n      lower = exp(fit_link - 1.96*se),\n      upper = exp(fit_link + 1.96*se)\n    )\n\n  # Merge predictions\n  combined_pred &lt;- pred_pres_result %&gt;% \n    mutate(\n      expected_count = pred_tbs * pred_abu_result$pred_tbs,\n      lower_expected = lower * pred_abu_result$lower,\n      upper_expected = upper * pred_abu_result$upper\n    )\n\n  # Styled kables for predictions\n  pred_pres_table &lt;- pred_pres_result %&gt;% \n    kable(format = \"html\", digits = 3, caption = \"Presence Predictions\") %&gt;% \n    kable_styling(\n      bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n      full_width = FALSE,\n      position = \"center\",\n      font_size = 14\n    ) %&gt;% \n    row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;% \n    row_spec(1:nrow(pred_pres_result), color = \"black\", background = \"#FFC4EB\") %&gt;% \n    scroll_box(width = \"800px\", height = \"300px\")\n\n  pred_abu_table &lt;- pred_abu_result %&gt;% \n    kable(format = \"html\", digits = 3, caption = \"Abundance Predictions\") %&gt;% \n    kable_styling(\n      bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n      full_width = FALSE,\n      position = \"center\",\n      font_size = 14\n    ) %&gt;% \n    row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;% \n    row_spec(1:nrow(pred_abu_result), color = \"black\", background = \"#FFC4EB\") %&gt;% \n    scroll_box(width = \"800px\", height = \"300px\")\n\n  combined_table &lt;- combined_pred %&gt;% \n    kable(format = \"html\", digits = 3, caption = \"Expected Counts (Presence × Abundance)\") %&gt;% \n    kable_styling(\n      bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n      full_width = FALSE,\n      position = \"center\",\n      font_size = 14\n    ) %&gt;% \n    row_spec(0, bold = TRUE, color = \"white\", background = \"#A0185A\") %&gt;% \n    row_spec(1:nrow(combined_pred), color = \"black\", background = \"#FFC4EB\") %&gt;% \n    scroll_box(width = \"800px\", height = \"300px\")\n\n  # Plot\n  plot &lt;- ggplot(combined_pred, aes(northern_anchovy_z, expected_count)) +\n    facet_wrap(~in_region,\n               labeller = as_labeller(c(`TRUE` = \"In Region\", `FALSE` = \"Outside Region\"))) +\n    geom_line(color = '#A0185A') +\n    geom_ribbon(aes(ymin = lower_expected, ymax = upper_expected),\n                alpha = .3, fill = '#ABC798') +\n    labs(x = 'Northern Anchovy Z',\n         y = str_to_title(str_replace_all(species_name, \"_\", \" \"))) +\n    theme_clean()\n\n  return(list(\n    summary_table = summary_table,\n    pred_pres_table = pred_pres_table,\n    pred_abu_table = pred_abu_table,\n    combined_table = combined_table,\n    stage1_pred = pred_pres_result,\n    stage2_pred = pred_abu_result,\n    combined_pred = combined_pred,\n    plot = plot\n  ))\n}\n\n\n\n\nFunction Call: Central Bay\nThe top indicator for the Central Bay was the Speckled Sanddab so we can call the function for that species and region\n\n\nCode\nspeckled &lt;- predict_indicator(catch_clean, 'SSD', 'CENTRAL BAY')\n\n\nNow speckled is encoded with our model summaries, predictions, and plot. For this I will show all outputs, in later chunks I will bypass showing predictions\n\nModel Summary\n\n\nCode\nspeckled$summary_table\n\n\n\n\nJoint Model Output: Presence vs Abundance\n\n\nModel\nTerm\nEstimate\nSE\nTest Stat\nP-Value\n\n\n\n\nPresence (Logit)\n(Intercept)\n-1.556\n0.031\n-49.769\n0.000\n\n\nPresence (Logit)\nnorthern_anchovy_z\n-0.531\n0.087\n-6.127\n0.000\n\n\nPresence (Logit)\nin_regionTRUE\n1.089\n0.081\n13.490\n0.000\n\n\nPresence (Logit)\nnorthern_anchovy_z:in_regionTRUE\n0.160\n0.172\n0.931\n0.352\n\n\nAbundance (NegBin)\n(Intercept)\n1.965\n0.033\n59.284\n0.000\n\n\nAbundance (NegBin)\nnorthern_anchovy_z\n-0.058\n0.053\n-1.082\n0.279\n\n\nAbundance (NegBin)\nin_regionTRUE\n0.816\n0.077\n10.546\n0.000\n\n\nAbundance (NegBin)\nnorthern_anchovy_z:in_regionTRUE\n-0.101\n0.145\n-0.696\n0.487\n\n\n\n\n\n\n\n\nCoefficient discussion\nEach coefficient table will have 8 estimates and p-values. The first 4 refer to the Presence (logit) model, the second 4 refer to the Abundance (negbin) model. Each of the models have the same structure as well: intercept, northern_anchovy_z, in_regionTRUE, and northern_anchovy_z:in_regionTRUE. The intercept is set at the level in_regionFalse, meaning its the outcome of not being in the indicators region, and not having Anchovies present. Northern_anchovy_z estimate and p_value show the effect on Northern_anchovy_z outside the region. In_regionTRUE estimate and p_value show the effect of being in the the region on the indicator Presence and Abundance. Lastly northern_anchovy_z:in_regionTRUE shows the interaction between northern anchovies and being inside an indicators region.\n\n\nPresence Prediction\n\n\nCode\nspeckled$pred_pres_table\n\n\n\n\n\nPresence Predictions\n\n\nin_region\nnorthern_anchovy_z\nfit_link\nse\npred_tbs\nlower\nupper\n\n\n\n\nTRUE\n-0.273\n-0.367\n0.083\n0.409\n0.371\n0.449\n\n\nTRUE\n0.727\n-0.737\n0.134\n0.324\n0.269\n0.384\n\n\nTRUE\n1.727\n-1.107\n0.271\n0.248\n0.163\n0.360\n\n\nTRUE\n2.727\n-1.477\n0.417\n0.186\n0.092\n0.341\n\n\nTRUE\n3.727\n-1.847\n0.564\n0.136\n0.050\n0.323\n\n\nTRUE\n4.727\n-2.217\n0.712\n0.098\n0.026\n0.305\n\n\nTRUE\n5.727\n-2.587\n0.860\n0.070\n0.014\n0.289\n\n\nTRUE\n6.727\n-2.958\n1.009\n0.049\n0.007\n0.273\n\n\nTRUE\n7.727\n-3.328\n1.157\n0.035\n0.004\n0.257\n\n\nTRUE\n8.727\n-3.698\n1.306\n0.024\n0.002\n0.243\n\n\nTRUE\n9.727\n-4.068\n1.455\n0.017\n0.001\n0.228\n\n\nTRUE\n10.727\n-4.438\n1.603\n0.012\n0.001\n0.215\n\n\nTRUE\n11.727\n-4.808\n1.752\n0.008\n0.000\n0.202\n\n\nTRUE\n12.727\n-5.178\n1.901\n0.006\n0.000\n0.190\n\n\nTRUE\n13.727\n-5.549\n2.050\n0.004\n0.000\n0.178\n\n\nTRUE\n14.727\n-5.919\n2.199\n0.003\n0.000\n0.167\n\n\nTRUE\n15.727\n-6.289\n2.348\n0.002\n0.000\n0.156\n\n\nTRUE\n16.727\n-6.659\n2.497\n0.001\n0.000\n0.146\n\n\nTRUE\n17.727\n-7.029\n2.645\n0.001\n0.000\n0.137\n\n\nTRUE\n18.727\n-7.399\n2.794\n0.001\n0.000\n0.128\n\n\nTRUE\n19.727\n-7.770\n2.943\n0.000\n0.000\n0.119\n\n\nTRUE\n20.727\n-8.140\n3.092\n0.000\n0.000\n0.111\n\n\nTRUE\n21.727\n-8.510\n3.241\n0.000\n0.000\n0.104\n\n\nTRUE\n22.727\n-8.880\n3.390\n0.000\n0.000\n0.097\n\n\nTRUE\n23.727\n-9.250\n3.539\n0.000\n0.000\n0.090\n\n\nTRUE\n24.727\n-9.620\n3.688\n0.000\n0.000\n0.084\n\n\nTRUE\n25.727\n-9.990\n3.837\n0.000\n0.000\n0.078\n\n\nTRUE\n26.727\n-10.361\n3.986\n0.000\n0.000\n0.073\n\n\nTRUE\n27.727\n-10.731\n4.135\n0.000\n0.000\n0.067\n\n\nFALSE\n-0.273\n-1.412\n0.032\n0.196\n0.186\n0.206\n\n\nFALSE\n0.727\n-1.942\n0.080\n0.125\n0.109\n0.144\n\n\nFALSE\n1.727\n-2.473\n0.164\n0.078\n0.058\n0.104\n\n\nFALSE\n2.727\n-3.004\n0.249\n0.047\n0.030\n0.075\n\n\nFALSE\n3.727\n-3.534\n0.336\n0.028\n0.015\n0.053\n\n\nFALSE\n4.727\n-4.065\n0.422\n0.017\n0.007\n0.038\n\n\nFALSE\n5.727\n-4.595\n0.508\n0.010\n0.004\n0.027\n\n\nFALSE\n6.727\n-5.126\n0.595\n0.006\n0.002\n0.019\n\n\nFALSE\n7.727\n-5.657\n0.681\n0.003\n0.001\n0.013\n\n\nFALSE\n8.727\n-6.187\n0.768\n0.002\n0.000\n0.009\n\n\nFALSE\n9.727\n-6.718\n0.854\n0.001\n0.000\n0.006\n\n\nFALSE\n10.727\n-7.248\n0.941\n0.001\n0.000\n0.004\n\n\nFALSE\n11.727\n-7.779\n1.028\n0.000\n0.000\n0.003\n\n\nFALSE\n12.727\n-8.310\n1.114\n0.000\n0.000\n0.002\n\n\nFALSE\n13.727\n-8.840\n1.201\n0.000\n0.000\n0.002\n\n\nFALSE\n14.727\n-9.371\n1.287\n0.000\n0.000\n0.001\n\n\nFALSE\n15.727\n-9.901\n1.374\n0.000\n0.000\n0.001\n\n\nFALSE\n16.727\n-10.432\n1.460\n0.000\n0.000\n0.001\n\n\nFALSE\n17.727\n-10.963\n1.547\n0.000\n0.000\n0.000\n\n\nFALSE\n18.727\n-11.493\n1.634\n0.000\n0.000\n0.000\n\n\nFALSE\n19.727\n-12.024\n1.720\n0.000\n0.000\n0.000\n\n\nFALSE\n20.727\n-12.554\n1.807\n0.000\n0.000\n0.000\n\n\nFALSE\n21.727\n-13.085\n1.893\n0.000\n0.000\n0.000\n\n\nFALSE\n22.727\n-13.616\n1.980\n0.000\n0.000\n0.000\n\n\nFALSE\n23.727\n-14.146\n2.067\n0.000\n0.000\n0.000\n\n\nFALSE\n24.727\n-14.677\n2.153\n0.000\n0.000\n0.000\n\n\nFALSE\n25.727\n-15.207\n2.240\n0.000\n0.000\n0.000\n\n\nFALSE\n26.727\n-15.738\n2.326\n0.000\n0.000\n0.000\n\n\nFALSE\n27.727\n-16.269\n2.413\n0.000\n0.000\n0.000\n\n\n\n\n\n\n\n\n\nAbundance Prediction\n\n\nCode\nspeckled$pred_abu_table\n\n\n\n\n\nAbundance Predictions\n\n\nin_region\nnorthern_anchovy_z\nfit_link\nse\npred_tbs\nlower\nupper\n\n\n\n\nTRUE\n-0.273\n2.825\n0.076\n16.854\n14.533\n19.545\n\n\nTRUE\n0.727\n2.666\n0.126\n14.380\n11.227\n18.419\n\n\nTRUE\n1.727\n2.507\n0.250\n12.270\n7.512\n20.043\n\n\nTRUE\n2.727\n2.348\n0.382\n10.469\n4.952\n22.134\n\n\nTRUE\n3.727\n2.190\n0.515\n8.933\n3.253\n24.531\n\n\nTRUE\n4.727\n2.031\n0.649\n7.622\n2.134\n27.223\n\n\nTRUE\n5.727\n1.872\n0.784\n6.504\n1.399\n30.231\n\n\nTRUE\n6.727\n1.714\n0.919\n5.549\n0.917\n33.583\n\n\nTRUE\n7.727\n1.555\n1.053\n4.735\n0.601\n37.316\n\n\nTRUE\n8.727\n1.396\n1.188\n4.040\n0.394\n41.470\n\n\nTRUE\n9.727\n1.238\n1.323\n3.447\n0.258\n46.091\n\n\nTRUE\n10.727\n1.079\n1.458\n2.941\n0.169\n51.231\n\n\nTRUE\n11.727\n0.920\n1.593\n2.510\n0.111\n56.947\n\n\nTRUE\n12.727\n0.761\n1.728\n2.141\n0.072\n63.304\n\n\nTRUE\n13.727\n0.603\n1.863\n1.827\n0.047\n70.373\n\n\nTRUE\n14.727\n0.444\n1.998\n1.559\n0.031\n78.234\n\n\nTRUE\n15.727\n0.285\n2.133\n1.330\n0.020\n86.974\n\n\nTRUE\n16.727\n0.127\n2.268\n1.135\n0.013\n96.692\n\n\nTRUE\n17.727\n-0.032\n2.403\n0.968\n0.009\n107.498\n\n\nTRUE\n18.727\n-0.191\n2.538\n0.826\n0.006\n119.513\n\n\nTRUE\n19.727\n-0.349\n2.673\n0.705\n0.004\n132.873\n\n\nTRUE\n20.727\n-0.508\n2.808\n0.602\n0.002\n147.727\n\n\nTRUE\n21.727\n-0.667\n2.943\n0.513\n0.002\n164.243\n\n\nTRUE\n22.727\n-0.826\n3.078\n0.438\n0.001\n182.607\n\n\nTRUE\n23.727\n-0.984\n3.213\n0.374\n0.001\n203.025\n\n\nTRUE\n24.727\n-1.143\n3.348\n0.319\n0.000\n225.727\n\n\nTRUE\n25.727\n-1.302\n3.483\n0.272\n0.000\n250.969\n\n\nTRUE\n26.727\n-1.460\n3.618\n0.232\n0.000\n279.035\n\n\nTRUE\n27.727\n-1.619\n3.753\n0.198\n0.000\n310.241\n\n\nFALSE\n-0.273\n1.981\n0.033\n7.251\n6.797\n7.736\n\n\nFALSE\n0.727\n1.923\n0.056\n6.845\n6.127\n7.646\n\n\nFALSE\n1.727\n1.866\n0.105\n6.461\n5.262\n7.934\n\n\nFALSE\n2.727\n1.808\n0.156\n6.099\n4.490\n8.286\n\n\nFALSE\n3.727\n1.750\n0.209\n5.757\n3.824\n8.669\n\n\nFALSE\n4.727\n1.693\n0.262\n5.435\n3.255\n9.075\n\n\nFALSE\n5.727\n1.635\n0.315\n5.130\n2.770\n9.503\n\n\nFALSE\n6.727\n1.577\n0.368\n4.843\n2.356\n9.954\n\n\nFALSE\n7.727\n1.520\n0.421\n4.571\n2.004\n10.427\n\n\nFALSE\n8.727\n1.462\n0.474\n4.315\n1.705\n10.924\n\n\nFALSE\n9.727\n1.404\n0.527\n4.073\n1.450\n11.445\n\n\nFALSE\n10.727\n1.347\n0.580\n3.845\n1.233\n11.991\n\n\nFALSE\n11.727\n1.289\n0.633\n3.630\n1.049\n12.564\n\n\nFALSE\n12.727\n1.231\n0.687\n3.426\n0.892\n13.164\n\n\nFALSE\n13.727\n1.174\n0.740\n3.234\n0.758\n13.793\n\n\nFALSE\n14.727\n1.116\n0.793\n3.053\n0.645\n14.453\n\n\nFALSE\n15.727\n1.058\n0.846\n2.882\n0.548\n15.144\n\n\nFALSE\n16.727\n1.001\n0.900\n2.721\n0.466\n15.868\n\n\nFALSE\n17.727\n0.943\n0.953\n2.568\n0.397\n16.627\n\n\nFALSE\n18.727\n0.885\n1.006\n2.424\n0.337\n17.423\n\n\nFALSE\n19.727\n0.828\n1.060\n2.288\n0.287\n18.257\n\n\nFALSE\n20.727\n0.770\n1.113\n2.160\n0.244\n19.131\n\n\nFALSE\n21.727\n0.712\n1.166\n2.039\n0.207\n20.047\n\n\nFALSE\n22.727\n0.655\n1.219\n1.925\n0.176\n21.006\n\n\nFALSE\n23.727\n0.597\n1.273\n1.817\n0.150\n22.012\n\n\nFALSE\n24.727\n0.539\n1.326\n1.715\n0.128\n23.066\n\n\nFALSE\n25.727\n0.482\n1.379\n1.619\n0.108\n24.170\n\n\nFALSE\n26.727\n0.424\n1.433\n1.528\n0.092\n25.328\n\n\nFALSE\n27.727\n0.366\n1.486\n1.443\n0.078\n26.541\n\n\n\n\n\n\n\n\n\nCombined Prediction\n\n\nCode\nspeckled$combined_table\n\n\n\n\n\nExpected Counts (Presence × Abundance)\n\n\nin_region\nnorthern_anchovy_z\nfit_link\nse\npred_tbs\nlower\nupper\nexpected_count\nlower_expected\nupper_expected\n\n\n\n\nTRUE\n-0.273\n-0.367\n0.083\n0.409\n0.371\n0.449\n6.900\n5.387\n8.780\n\n\nTRUE\n0.727\n-0.737\n0.134\n0.324\n0.269\n0.384\n4.655\n3.019\n7.070\n\n\nTRUE\n1.727\n-1.107\n0.271\n0.248\n0.163\n0.360\n3.049\n1.222\n7.217\n\n\nTRUE\n2.727\n-1.477\n0.417\n0.186\n0.092\n0.341\n1.946\n0.454\n7.540\n\n\nTRUE\n3.727\n-1.847\n0.564\n0.136\n0.050\n0.323\n1.217\n0.161\n7.913\n\n\nTRUE\n4.727\n-2.217\n0.712\n0.098\n0.026\n0.305\n0.749\n0.056\n8.311\n\n\nTRUE\n5.727\n-2.587\n0.860\n0.070\n0.014\n0.289\n0.455\n0.019\n8.727\n\n\nTRUE\n6.727\n-2.958\n1.009\n0.049\n0.007\n0.273\n0.274\n0.007\n9.159\n\n\nTRUE\n7.727\n-3.328\n1.157\n0.035\n0.004\n0.257\n0.164\n0.002\n9.604\n\n\nTRUE\n8.727\n-3.698\n1.306\n0.024\n0.002\n0.243\n0.098\n0.001\n10.061\n\n\nTRUE\n9.727\n-4.068\n1.455\n0.017\n0.001\n0.228\n0.058\n0.000\n10.530\n\n\nTRUE\n10.727\n-4.438\n1.603\n0.012\n0.001\n0.215\n0.034\n0.000\n11.010\n\n\nTRUE\n11.727\n-4.808\n1.752\n0.008\n0.000\n0.202\n0.020\n0.000\n11.501\n\n\nTRUE\n12.727\n-5.178\n1.901\n0.006\n0.000\n0.190\n0.012\n0.000\n12.004\n\n\nTRUE\n13.727\n-5.549\n2.050\n0.004\n0.000\n0.178\n0.007\n0.000\n12.517\n\n\nTRUE\n14.727\n-5.919\n2.199\n0.003\n0.000\n0.167\n0.004\n0.000\n13.041\n\n\nTRUE\n15.727\n-6.289\n2.348\n0.002\n0.000\n0.156\n0.002\n0.000\n13.576\n\n\nTRUE\n16.727\n-6.659\n2.497\n0.001\n0.000\n0.146\n0.001\n0.000\n14.122\n\n\nTRUE\n17.727\n-7.029\n2.645\n0.001\n0.000\n0.137\n0.001\n0.000\n14.680\n\n\nTRUE\n18.727\n-7.399\n2.794\n0.001\n0.000\n0.128\n0.001\n0.000\n15.248\n\n\nTRUE\n19.727\n-7.770\n2.943\n0.000\n0.000\n0.119\n0.000\n0.000\n15.828\n\n\nTRUE\n20.727\n-8.140\n3.092\n0.000\n0.000\n0.111\n0.000\n0.000\n16.420\n\n\nTRUE\n21.727\n-8.510\n3.241\n0.000\n0.000\n0.104\n0.000\n0.000\n17.024\n\n\nTRUE\n22.727\n-8.880\n3.390\n0.000\n0.000\n0.097\n0.000\n0.000\n17.640\n\n\nTRUE\n23.727\n-9.250\n3.539\n0.000\n0.000\n0.090\n0.000\n0.000\n18.269\n\n\nTRUE\n24.727\n-9.620\n3.688\n0.000\n0.000\n0.084\n0.000\n0.000\n18.912\n\n\nTRUE\n25.727\n-9.990\n3.837\n0.000\n0.000\n0.078\n0.000\n0.000\n19.567\n\n\nTRUE\n26.727\n-10.361\n3.986\n0.000\n0.000\n0.073\n0.000\n0.000\n20.237\n\n\nTRUE\n27.727\n-10.731\n4.135\n0.000\n0.000\n0.067\n0.000\n0.000\n20.922\n\n\nFALSE\n-0.273\n-1.412\n0.032\n0.196\n0.186\n0.206\n1.421\n1.267\n1.593\n\n\nFALSE\n0.727\n-1.942\n0.080\n0.125\n0.109\n0.144\n0.858\n0.669\n1.098\n\n\nFALSE\n1.727\n-2.473\n0.164\n0.078\n0.058\n0.104\n0.503\n0.303\n0.826\n\n\nFALSE\n2.727\n-3.004\n0.249\n0.047\n0.030\n0.075\n0.288\n0.133\n0.620\n\n\nFALSE\n3.727\n-3.534\n0.336\n0.028\n0.015\n0.053\n0.163\n0.057\n0.462\n\n\nFALSE\n4.727\n-4.065\n0.422\n0.017\n0.007\n0.038\n0.092\n0.024\n0.343\n\n\nFALSE\n5.727\n-4.595\n0.508\n0.010\n0.004\n0.027\n0.051\n0.010\n0.253\n\n\nFALSE\n6.727\n-5.126\n0.595\n0.006\n0.002\n0.019\n0.029\n0.004\n0.186\n\n\nFALSE\n7.727\n-5.657\n0.681\n0.003\n0.001\n0.013\n0.016\n0.002\n0.137\n\n\nFALSE\n8.727\n-6.187\n0.768\n0.002\n0.000\n0.009\n0.009\n0.001\n0.100\n\n\nFALSE\n9.727\n-6.718\n0.854\n0.001\n0.000\n0.006\n0.005\n0.000\n0.073\n\n\nFALSE\n10.727\n-7.248\n0.941\n0.001\n0.000\n0.004\n0.003\n0.000\n0.054\n\n\nFALSE\n11.727\n-7.779\n1.028\n0.000\n0.000\n0.003\n0.002\n0.000\n0.039\n\n\nFALSE\n12.727\n-8.310\n1.114\n0.000\n0.000\n0.002\n0.001\n0.000\n0.029\n\n\nFALSE\n13.727\n-8.840\n1.201\n0.000\n0.000\n0.002\n0.000\n0.000\n0.021\n\n\nFALSE\n14.727\n-9.371\n1.287\n0.000\n0.000\n0.001\n0.000\n0.000\n0.015\n\n\nFALSE\n15.727\n-9.901\n1.374\n0.000\n0.000\n0.001\n0.000\n0.000\n0.011\n\n\nFALSE\n16.727\n-10.432\n1.460\n0.000\n0.000\n0.001\n0.000\n0.000\n0.008\n\n\nFALSE\n17.727\n-10.963\n1.547\n0.000\n0.000\n0.000\n0.000\n0.000\n0.006\n\n\nFALSE\n18.727\n-11.493\n1.634\n0.000\n0.000\n0.000\n0.000\n0.000\n0.004\n\n\nFALSE\n19.727\n-12.024\n1.720\n0.000\n0.000\n0.000\n0.000\n0.000\n0.003\n\n\nFALSE\n20.727\n-12.554\n1.807\n0.000\n0.000\n0.000\n0.000\n0.000\n0.002\n\n\nFALSE\n21.727\n-13.085\n1.893\n0.000\n0.000\n0.000\n0.000\n0.000\n0.002\n\n\nFALSE\n22.727\n-13.616\n1.980\n0.000\n0.000\n0.000\n0.000\n0.000\n0.001\n\n\nFALSE\n23.727\n-14.146\n2.067\n0.000\n0.000\n0.000\n0.000\n0.000\n0.001\n\n\nFALSE\n24.727\n-14.677\n2.153\n0.000\n0.000\n0.000\n0.000\n0.000\n0.001\n\n\nFALSE\n25.727\n-15.207\n2.240\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nFALSE\n26.727\n-15.738\n2.326\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nFALSE\n27.727\n-16.269\n2.413\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\n\n\n\n\n\n\n\nSpeckled plot\n\n\nCode\nspeckled$plot\n\n\n\n\n\n\n\n\n\n\n\nDiscussion: Speckled Sanddab\nBased on the function we can see significance in presence of Anchovy and the region in both presence and abundance. This indicates that the presence of Anchovy comes at the cost of presence of Sanddabs. This model does not seem to fit incredibly well when looking at the plot, which can be seen by the flat lines and giant confidence intervals.\n\n\n\nFunction Call: San Pablo Bay\n\n\nCode\nbat_ray &lt;- predict_indicator(catch_clean, 'BR', 'SAN PABLO BAY')\n\n\n\nModel Summary\n\n\nCode\nbat_ray$summary_table\n\n\n\n\nJoint Model Output: Presence vs Abundance\n\n\nModel\nTerm\nEstimate\nSE\nTest Stat\nP-Value\n\n\n\n\nPresence (Logit)\n(Intercept)\n2.598\n0.043\n59.788\n0.000\n\n\nPresence (Logit)\nnorthern_anchovy_z\n-0.801\n0.034\n-23.834\n0.000\n\n\nPresence (Logit)\nin_regionTRUE\n-1.980\n0.960\n-2.063\n0.039\n\n\nPresence (Logit)\nnorthern_anchovy_z:in_regionTRUE\n1.476\n0.932\n1.584\n0.113\n\n\nAbundance (NegBin)\n(Intercept)\n4.321\n0.018\n236.057\n0.000\n\n\nAbundance (NegBin)\nnorthern_anchovy_z\n-0.223\n0.022\n-10.216\n0.000\n\n\nAbundance (NegBin)\nin_regionTRUE\n-3.409\n0.917\n-3.719\n0.000\n\n\nAbundance (NegBin)\nnorthern_anchovy_z:in_regionTRUE\n0.276\n0.461\n0.599\n0.549\n\n\n\n\n\n\n\n\nBat Ray Plot\n\n\nCode\nbat_ray$plot\n\n\n\n\n\n\n\n\n\n\n\nDiscussion: Bat Ray\nBased on the summary table, we can see significance of both presence and abundance in relation to Northern Anchovy. Interestingly the presence is barely insignificant while abundance is significant in region, indicating that this species is an indicator based more on abundance.\n\n\n\nFunction Call: South Bay\n\n\nCode\nca_tonguefish &lt;- predict_indicator(catch_clean, 'CT', 'SOUTH BAY')\n\n\n\nModel Summary\n\n\nCode\nca_tonguefish$summary_table\n\n\n\n\nJoint Model Output: Presence vs Abundance\n\n\nModel\nTerm\nEstimate\nSE\nTest Stat\nP-Value\n\n\n\n\nPresence (Logit)\n(Intercept)\n4.655\n1.087\n4.281\n0.000\n\n\nPresence (Logit)\nnorthern_anchovy_z\n-16.415\n3.855\n-4.258\n0.000\n\n\nPresence (Logit)\nin_regionTRUE\n-0.948\n1.090\n-0.870\n0.384\n\n\nPresence (Logit)\nnorthern_anchovy_z:in_regionTRUE\n16.228\n3.855\n4.210\n0.000\n\n\nAbundance (NegBin)\n(Intercept)\n3.871\n0.348\n11.140\n0.000\n\n\nAbundance (NegBin)\nnorthern_anchovy_z\n-3.820\n1.985\n-1.925\n0.054\n\n\nAbundance (NegBin)\nin_regionTRUE\n0.463\n0.348\n1.330\n0.183\n\n\nAbundance (NegBin)\nnorthern_anchovy_z:in_regionTRUE\n3.689\n1.985\n1.859\n0.063\n\n\n\n\n\n\n\n\nTonguefish Plot\n\n\nCode\nca_tonguefish$plot\n\n\n\n\n\n\n\n\n\n\n\nDiscussion: California Tonguefish\nIn my opinion this is the most interesting interaction. Presence in region, based on Northern Anchovy, and the interaction between the two are all significant. This is the only case in the analysis where any interaction is significant. When looking at abundance, both Anchovies and the interaction between them and in_region are minimally insignificant. When looking at the plot we see the best looking curve in the plot of within region. All this is super interesting in the context that in recent years there have been very few catches of Tonguefish, which indicates some sort of temporal skew.\n\n\n\nFunction Call: Suisun Bay\n\n\nCode\nbass &lt;- predict_indicator(catch_clean, 'SB', 'SUISUN BAY')\n\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\n\nWarning in predict.lm(object, newdata, se.fit, scale = residual.scale, type =\nif (type == : prediction from rank-deficient fit; attr(*, \"non-estim\") has\ndoubtful cases\n\n\n\nPresence Summary\n\n\nCode\nbass$summary_table\n\n\n\n\nJoint Model Output: Presence vs Abundance\n\n\nModel\nTerm\nEstimate\nSE\nTest Stat\nP-Value\n\n\n\n\nPresence (Logit)\n(Intercept)\n-3.647\n0.121\n-30.195\n0.000\n\n\nPresence (Logit)\nnorthern_anchovy_z\n-2.844\n0.496\n-5.735\n0.000\n\n\nPresence (Logit)\nin_regionTRUE\n-2499.678\n183385.798\n-0.014\n0.989\n\n\nPresence (Logit)\nnorthern_anchovy_z:in_regionTRUE\n-9032.834\n657659.105\n-0.014\n0.989\n\n\nAbundance (NegBin)\n(Intercept)\n0.330\n0.093\n3.553\n0.000\n\n\nAbundance (NegBin)\nnorthern_anchovy_z\n-0.521\n0.333\n-1.563\n0.118\n\n\nAbundance (NegBin)\nin_regionTRUE\n1.410\n0.089\n15.896\n0.000\n\n\n\n\n\n\n\n\nBass Plot\n\n\nCode\nbass$plot\n\n\n\n\n\n\n\n\n\n\n\nDiscussion: Striped Bass\nIf Tonguefish was our best model, this would be our worst. When fitting the model we get the warning: prediction from rank-deficient fit; attr(*, “non-estim”) has doubtful cases. This indicates that the function is having trouble fitting the model to this data. This means that the summary and plot end up being generally unreliable. This was a big surprise to me as I expected Striped Bass to show an intense correlation, as they like less salty water when they pass through the bay (as infants and juveniles).\n\n\n\nFinal Discussion\nDespite the effort, this analysis indicates that there is no real correlation between these indicator species and Northern Anchovy populations. In the future it may be possible to fit specific models to specific fish, and alter the models based on the fish species. Furthermore the integration of actual water quality variables such as temperature and salinity may yield more significance and representation within the data.\n\n\n\n\n\nReferences\n\nBritannica, The Editors of Encyclopaedia. n.d. “San Francisco Bay.” https://www.britannica.com/place/San-Francisco-Bay. https://www.britannica.com/place/San-Francisco-Bay.\n\n\nConservation, San Francisco Bay, and Development Commission. 2002. “San Francisco Bay Ecology and Related Habitats.” Staff Report –. San Francisco Bay Conservation; Development Commission (BCDC); https://www.bcdc.ca.gov/wp-content/uploads/sites/354/2023/09/San-Francisco-Bay-Ecology-And-Related-Habitats-PDF.pdf. https://www.bcdc.ca.gov/wp-content/uploads/sites/354/2023/09/San-Francisco-Bay-Ecology-And-Related-Habitats-PDF.pdf.\n\n\nCouncil, California Ocean Protection. 2022. “Harmful Algal Bloom in San Francisco Bay Results in Aquatic Mortality, Fish Kills.” https://opc.ca.gov/2022/09/harmful-algal-bloom/. https://opc.ca.gov/2022/09/harmful-algal-bloom/.\n\n\nInstitute, Marine Science. n.d. “Marine Science Institute — San Francisco Bay.” Accessed December 4, 2025. https://www.sfbaymsi.org/.\n\n\nPartnership, San Francisco Estuary. n.d. “About the Estuary.” https://www.sfestuary.org/our-estuary/about-the-estuary/. https://www.sfestuary.org/our-estuary/about-the-estuary/.\n\n\nWooldridge, Griffin. 2020. “Silhouette of Bridge During Sunset.” https://www.pexels.com/photo/silhouette-of-bridge-during-sunset-3654847/. https://www.pexels.com/photo/silhouette-of-bridge-during-sunset-3654847/.\n\nCitationBibTeX citation:@online{vitale2025,\n  author = {Vitale, Peter},\n  title = {San {Fransisco} {Bay} {Catch} {Dynamics}},\n  date = {2025-12-03},\n  url = {https://petervitale910.github.io/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nVitale, Peter. 2025. “San Fransisco Bay Catch Dynamics.”\nDecember 3, 2025. https://petervitale910.github.io/."
  },
  {
    "objectID": "posts/extreme_weather_events/index.html",
    "href": "posts/extreme_weather_events/index.html",
    "title": "Extreme Weather Events",
    "section": "",
    "text": "This is where the body of my blog post begins! I’m going to add a footnote here 1 Here’s and inline footnote2\nCiting reference (Shanny-Csik 2022)\nlets cite a paper using the DOI (Gaynor et al. 2022)"
  },
  {
    "objectID": "posts/extreme_weather_events/index.html#footnotes",
    "href": "posts/extreme_weather_events/index.html#footnotes",
    "title": "Extreme Weather Events",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nHere is some additional context that might be helpful↩︎\nhere’s my inline note↩︎"
  },
  {
    "objectID": "posts/palisades_eaton_ejscreen/index.html",
    "href": "posts/palisades_eaton_ejscreen/index.html",
    "title": "Visualizing the 2025 California Wildfires",
    "section": "",
    "text": "Service Firefighters in the street with a fire hose in front of a house on fire Guillen (2025)"
  },
  {
    "objectID": "posts/palisades_eaton_ejscreen/index.html#about-this-project",
    "href": "posts/palisades_eaton_ejscreen/index.html#about-this-project",
    "title": "Visualizing the 2025 California Wildfires",
    "section": "About this project",
    "text": "About this project\nIn this project we will be using true and false color imagery to examine the impacts of two fires which struck the Los Angeles area in early 2025.\n\nHighlights:\n\nExtracting color bands from xarray\nMapping using true and false color imagery\nOverlaying fire perimiters to see effect of fires\nMapping Environmental Justice Index values within the fire perimeter\n\n\n\nBackground information\nThe Palisades and Eaton fires sparked within hours of each other on January 7th 2025. Due to arid conditions and the Santa Ana winds these fires quickly grew out of control, ultimately burning a combined 40,000 acres (VanAuken 2025). The fires led to significant damage and economic loss, estimated between $135 billion and $150 billion (“Media Advisory: AccuWeather Increases Estimate of Total Damage and Economic Loss as Catastrophic Wildfires Continue to Ravage the Los Angeles Area” 2025). In this project we will examine the total land area covered by the fires as well as examine socioeconomic factors to interpret the communities affected by, as well as the long lasting effects of the fires.\n\n\nAbout the data:\n\nPalisades and Eaton fire perimeters\nThese contain dissolved fire perimeters/boundaries for Eaton and Palisades fires, with boundary polygons dissolved for each fire to create a single fire burn perimeter. Access given by the County of Los Angeles (“Palisades and Eaton Dissolved Fire Perimeters (2025)” 2025)\n\n\nNetcdf Landsat data\nLandsat C2 L2 from Microsoft’s Planetary Computer is a globally available, multi-decadal archive of atmospherically corrected, analysis-ready Landsat imagery. Surface reflectance for multispectral bands and derived land surface temperature from thermal bands are provided in cloud-optimized GeoTIFFs, accessible via a STAC API. Accordingly, it is primarily used for long-term environmental monitoring, spectral studies, and thermal remote sensing, and is designed for scalable, cloud-native remote sensing workflows (U.S. Geological Survey 2025)\n\n\nEnvironmental Justice Index (EJI)\nThe Environmental Justice Index (EJI) measures cumulative environmental, health, and social burdens to identify communities facing the highest environmental injustices. It combines indicators like pollution exposure, health vulnerabilities, and socioeconomic stressors into a single score for each census tract. Higher EJI values indicate greater cumulative impacts and greater need for targeted intervention and resources (Centers for Disease Control and Prevention and Agency for Toxic Substances and Disease Registry 2021)\nGitHub repository for this project and initial .ipynb’s: https://github.com/petervitale910/eds220-hwk4\n\n\n\n1. Import packages and datasets\n\n\nCode\nimport pandas as pd\nimport geopandas as gpd \nimport matplotlib.pyplot as plt\nimport os \nimport xarray as xr\nimport rioxarray as rio\nimport numpy as np \nfrom matplotlib_scalebar.scalebar import ScaleBar\nimport contextily as ctx\n\n\n\n\n\n2. Fire perimeter data exploration\nHere we import the perimeter data files and do some exploration.\nI am going to import both perimeters and then look at the CRS, or coordinate reference system. This allows us to map all datasets using the same projection.\n\n\nCode\nfp = os.path.join('data','Eaton_Perimeter_20250121','Eaton_Perimeter_20250121.shp')\neaton_perimeter = gpd.read_file(fp)\n\n\n\n\nCode\nfp = os.path.join('data','Palisades_Perimeter_20250121','Palisades_Perimeter_20250121.shp')\npalisades_perimeter = gpd.read_file(fp)\n\n\n\n\nCode\n# Now we can look at the crs's and do some exploration \npalisades_perimeter.crs\n\n\n&lt;Projected CRS: EPSG:3857&gt;\nName: WGS 84 / Pseudo-Mercator\nAxis Info [cartesian]:\n- X[east]: Easting (metre)\n- Y[north]: Northing (metre)\nArea of Use:\n- name: World between 85.06°S and 85.06°N.\n- bounds: (-180.0, -85.06, 180.0, 85.06)\nCoordinate Operation:\n- name: Popular Visualisation Pseudo-Mercator\n- method: Popular Visualisation Pseudo Mercator\nDatum: World Geodetic System 1984 ensemble\n- Ellipsoid: WGS 84\n- Prime Meridian: Greenwich\n\n\n\n\nCode\neaton_perimeter.crs\n\n\n&lt;Projected CRS: EPSG:3857&gt;\nName: WGS 84 / Pseudo-Mercator\nAxis Info [cartesian]:\n- X[east]: Easting (metre)\n- Y[north]: Northing (metre)\nArea of Use:\n- name: World between 85.06°S and 85.06°N.\n- bounds: (-180.0, -85.06, 180.0, 85.06)\nCoordinate Operation:\n- name: Popular Visualisation Pseudo-Mercator\n- method: Popular Visualisation Pseudo Mercator\nDatum: World Geodetic System 1984 ensemble\n- Ellipsoid: WGS 84\n- Prime Meridian: Greenwich\n\n\nWe know we want to merge these datasets at some point, so it is important to check if the column names match in the two perimeters\n\n\nCode\n# Lets compare the column names to make sure they match \n\nprint(f' It is {eaton_perimeter.columns == palisades_perimeter.columns} that the column names match')\n\n\n It is [ True  True  True  True  True] that the column names match\n\n\n\n\nCode\n# Thats great we only need to look at one of the dataframes columns \n\nprint(' The column names of the data frames are', eaton_perimeter.columns)\n\n\n The column names of the data frames are Index(['OBJECTID', 'type', 'Shape__Are', 'Shape__Len', 'geometry'], dtype='object')\n\n\nSummary: From the preliminary exploration both the Palisades and Eaton datasets are in ESPG:3857, which is a projected coordinate system. Both have the same column names which will make analysis and merging easier.\n\n\n3. NetCDF data import and exploration\nHere we will import and explore the Landsat data using xr.open_dataset().\n\n\nCode\nfp = os.path.join('data','landsat8-2025-02-23-palisades-eaton.nc')\nnetcdf = xr.open_dataset(fp)\nnetcdf\n\n\n\n---------------------------------------------------------------------------\nInvalidVersion                            Traceback (most recent call last)\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/core/formatters.py:770, in PlainTextFormatter.__call__(self, obj)\n    763 stream = StringIO()\n    764 printer = pretty.RepresentationPrinter(stream, self.verbose,\n    765     self.max_width, self.newline,\n    766     max_seq_length=self.max_seq_length,\n    767     singleton_pprinters=self.singleton_printers,\n    768     type_pprinters=self.type_printers,\n    769     deferred_pprinters=self.deferred_printers)\n--&gt; 770 printer.pretty(obj)\n    771 printer.flush()\n    772 return stream.getvalue()\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/lib/pretty.py:411, in RepresentationPrinter.pretty(self, obj)\n    400                         return meth(obj, self, cycle)\n    401                 if (\n    402                     cls is not object\n    403                     # check if cls defines __repr__\n   (...)    409                     and callable(_safe_getattr(cls, \"__repr__\", None))\n    410                 ):\n--&gt; 411                     return _repr_pprint(obj, self, cycle)\n    413     return _default_pprint(obj, self, cycle)\n    414 finally:\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/lib/pretty.py:786, in _repr_pprint(obj, p, cycle)\n    784 \"\"\"A pprint that just redirects to the normal repr function.\"\"\"\n    785 # Find newlines and replace them with p.break_()\n--&gt; 786 output = repr(obj)\n    787 lines = output.splitlines()\n    788 with p.group():\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/dataset.py:2616, in Dataset.__repr__(self)\n   2615 def __repr__(self) -&gt; str:\n-&gt; 2616     return formatting.dataset_repr(self)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/reprlib.py:21, in recursive_repr.&lt;locals&gt;.decorating_function.&lt;locals&gt;.wrapper(self)\n     19 repr_running.add(key)\n     20 try:\n---&gt; 21     result = user_function(self)\n     22 finally:\n     23     repr_running.discard(key)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:747, in dataset_repr(ds)\n    744 summary.append(f\"{dims_start}({dims_values})\")\n    746 if ds.coords:\n--&gt; 747     summary.append(coords_repr(ds.coords, col_width=col_width, max_rows=max_rows))\n    749 unindexed_dims_str = unindexed_dims_repr(ds.dims, ds.coords, max_rows=max_rows)\n    750 if unindexed_dims_str:\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:438, in coords_repr(coords, col_width, max_rows)\n    436 if col_width is None:\n    437     col_width = _calculate_col_width(coords)\n--&gt; 438 return _mapping_repr(\n    439     coords,\n    440     title=\"Coordinates\",\n    441     summarizer=summarize_variable,\n    442     expand_option_name=\"display_expand_coords\",\n    443     col_width=col_width,\n    444     indexes=coords.xindexes,\n    445     max_rows=max_rows,\n    446 )\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:411, in _mapping_repr(mapping, title, summarizer, expand_option_name, col_width, max_rows, indexes)\n    406             summary += [\n    407                 summarizer(k, mapping[k], col_width, **summarizer_kwargs[k])\n    408                 for k in keys[-last_rows:]\n    409             ]\n    410     else:\n--&gt; 411         summary += [\n    412             summarizer(k, v, col_width, **summarizer_kwargs[k])\n    413             for k, v in mapping.items()\n    414         ]\n    415 else:\n    416     summary += [EMPTY_REPR]\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:412, in &lt;listcomp&gt;(.0)\n    406             summary += [\n    407                 summarizer(k, mapping[k], col_width, **summarizer_kwargs[k])\n    408                 for k in keys[-last_rows:]\n    409             ]\n    410     else:\n    411         summary += [\n--&gt; 412             summarizer(k, v, col_width, **summarizer_kwargs[k])\n    413             for k, v in mapping.items()\n    414         ]\n    415 else:\n    416     summary += [EMPTY_REPR]\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:348, in summarize_variable(name, var, col_width, max_width, is_index)\n    345 front_str = f\"{first_col}{dims_str}{variable.dtype}{nbytes_str} \"\n    347 values_width = max_width - len(front_str)\n--&gt; 348 values_str = inline_variable_array_repr(variable, values_width)\n    350 return front_str + values_str\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:307, in inline_variable_array_repr(var, max_width)\n    305 if getattr(var, \"_in_memory\", False):\n    306     return format_array_flat(var, max_width)\n--&gt; 307 dask_array_type = array_type(\"dask\")\n    308 if isinstance(var._data, dask_array_type):\n    309     return inline_dask_repr(var.data)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:83, in array_type(mod)\n     81 def array_type(mod: ModType) -&gt; DuckArrayTypes:\n     82     \"\"\"Quick wrapper to get the array class of the module.\"\"\"\n---&gt; 83     return _get_cached_duck_array_module(mod).type\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:74, in _get_cached_duck_array_module(mod)\n     72 def _get_cached_duck_array_module(mod: ModType) -&gt; DuckArrayModule:\n     73     if mod not in _cached_duck_array_modules:\n---&gt; 74         duckmod = DuckArrayModule(mod)\n     75         _cached_duck_array_modules[mod] = duckmod\n     76         return duckmod\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:40, in DuckArrayModule.__init__(self, mod)\n     38 try:\n     39     duck_array_module = import_module(mod)\n---&gt; 40     duck_array_version = Version(duck_array_module.__version__)\n     42     if mod == \"dask\":\n     43         duck_array_type = (import_module(\"dask.array\").Array,)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/packaging/version.py:202, in Version.__init__(self, version)\n    200 match = self._regex.search(version)\n    201 if not match:\n--&gt; 202     raise InvalidVersion(f\"Invalid version: {version!r}\")\n    204 # Store the parsed out pieces of the version\n    205 self._version = _Version(\n    206     epoch=int(match.group(\"epoch\")) if match.group(\"epoch\") else 0,\n    207     release=tuple(int(i) for i in match.group(\"release\").split(\".\")),\n   (...)    213     local=_parse_local_version(match.group(\"local\")),\n    214 )\n\nInvalidVersion: Invalid version: 'unknown'\n\n\n\n\n---------------------------------------------------------------------------\nInvalidVersion                            Traceback (most recent call last)\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/core/formatters.py:406, in BaseFormatter.__call__(self, obj)\n    404     method = get_real_method(obj, self.print_method)\n    405     if method is not None:\n--&gt; 406         return method()\n    407     return None\n    408 else:\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/dataset.py:2621, in Dataset._repr_html_(self)\n   2619 if OPTIONS[\"display_style\"] == \"text\":\n   2620     return f\"&lt;pre&gt;{escape(repr(self))}&lt;/pre&gt;\"\n-&gt; 2621 return formatting_html.dataset_repr(self)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:342, in dataset_repr(ds)\n    336 obj_type = f\"xarray.{type(ds).__name__}\"\n    338 header_components = [f\"&lt;div class='xr-obj-type'&gt;{escape(obj_type)}&lt;/div&gt;\"]\n    340 sections = [\n    341     dim_section(ds),\n--&gt; 342     coord_section(ds.coords),\n    343     datavar_section(ds.data_vars),\n    344     index_section(_get_indexes_dict(ds.xindexes)),\n    345     attr_section(ds.attrs),\n    346 ]\n    348 return _obj_repr(ds, header_components, sections)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:206, in _mapping_section(mapping, name, details_func, max_items_collapse, expand_option_name, enabled)\n    199 expanded = _get_boolean_with_default(\n    200     expand_option_name, n_items &lt; max_items_collapse\n    201 )\n    202 collapsed = not expanded\n    204 return collapsible_section(\n    205     name,\n--&gt; 206     details=details_func(mapping),\n    207     n_items=n_items,\n    208     enabled=enabled,\n    209     collapsed=collapsed,\n    210 )\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:122, in summarize_coords(variables)\n    120 li_items = []\n    121 for k, v in variables.items():\n--&gt; 122     li_content = summarize_variable(k, v, is_index=k in variables.xindexes)\n    123     li_items.append(f\"&lt;li class='xr-var-item'&gt;{li_content}&lt;/li&gt;\")\n    125 vars_li = \"\".join(li_items)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:95, in summarize_variable(name, var, is_index, dtype)\n     92 data_id = \"data-\" + str(uuid.uuid4())\n     93 disabled = \"\" if len(var.attrs) else \"disabled\"\n---&gt; 95 preview = escape(inline_variable_array_repr(variable, 35))\n     96 attrs_ul = summarize_attrs(var.attrs)\n     97 data_repr = short_data_repr_html(variable)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:307, in inline_variable_array_repr(var, max_width)\n    305 if getattr(var, \"_in_memory\", False):\n    306     return format_array_flat(var, max_width)\n--&gt; 307 dask_array_type = array_type(\"dask\")\n    308 if isinstance(var._data, dask_array_type):\n    309     return inline_dask_repr(var.data)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:83, in array_type(mod)\n     81 def array_type(mod: ModType) -&gt; DuckArrayTypes:\n     82     \"\"\"Quick wrapper to get the array class of the module.\"\"\"\n---&gt; 83     return _get_cached_duck_array_module(mod).type\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:74, in _get_cached_duck_array_module(mod)\n     72 def _get_cached_duck_array_module(mod: ModType) -&gt; DuckArrayModule:\n     73     if mod not in _cached_duck_array_modules:\n---&gt; 74         duckmod = DuckArrayModule(mod)\n     75         _cached_duck_array_modules[mod] = duckmod\n     76         return duckmod\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:40, in DuckArrayModule.__init__(self, mod)\n     38 try:\n     39     duck_array_module = import_module(mod)\n---&gt; 40     duck_array_version = Version(duck_array_module.__version__)\n     42     if mod == \"dask\":\n     43         duck_array_type = (import_module(\"dask.array\").Array,)\n\nFile /opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/packaging/version.py:202, in Version.__init__(self, version)\n    200 match = self._regex.search(version)\n    201 if not match:\n--&gt; 202     raise InvalidVersion(f\"Invalid version: {version!r}\")\n    204 # Store the parsed out pieces of the version\n    205 self._version = _Version(\n    206     epoch=int(match.group(\"epoch\")) if match.group(\"epoch\") else 0,\n    207     release=tuple(int(i) for i in match.group(\"release\").split(\".\")),\n   (...)    213     local=_parse_local_version(match.group(\"local\")),\n    214 )\n\nInvalidVersion: Invalid version: 'unknown'\n\n\n\nThis xarray has 1418 y dimensions and 2742 x dimensions. The coordinates are x, y, and time which are are float64, float64, and datetime64 types (respectively). The variables are red, green, blue, near infared and short wave infared light bands as well as a spatial reference. The bands are in float32 while the spatial_ref is an int64, this shouldn’t be an issue going further - however as the analysis continues it may become an issue.\n\n\n4. Restoring geospatial information\nWe need to use rio.crs to print what is the CRS of this dataset, which will help us plot the light bands onto the same area as the fire perimeters.\n\n\nCode\nprint(f'The xarray has the crs: {netcdf.rio.crs}')\n\n\nThe xarray has the crs: None\n\n\nOh no! Theres no CRS meaning that it will be harder to plot, however there actually is! It’s just encoded in the spatial_ref variable.\n\n\nCode\nprint(f' The actual CRS of the xarray is: {netcdf.spatial_ref.crs_wkt}')\n\n\n The actual CRS of the xarray is: PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]\n\n\nOh wow thats big! Lets make it so that CRS is the CRS for the dataset\n\n\nCode\nnetcdf = netcdf.rio.write_crs(netcdf.spatial_ref.crs_wkt) # Need to write_crs due to being an xarrray\n\n\n\n\nCode\nprint(f'The xarray now has the CRS: {netcdf.rio.crs}')\n\n\nThe xarray now has the CRS: None\n\n\n\n\n5. True color image\nA true color image takes the light bands collected by Landsat and plots the colors visible to the human eye. This is how the ground would look if we were sitting on the satelite\nTo create a true color plot we need to:\n\nIdentify which bands have nan values.\nSelect the red, green, and blue variables (in that order) of the xarray.Dataset holding the Landsat data,\nConvert it to a numpy.array using the to_array() method, and then\nUse .plot.imshow() to create an RGB image with the data.\nAdjust the scale used for plotting the bands to get a true color image.\nUse the .fillna() method for xarray.Datasets to substitute any nan values in the Landsat data for zero.\nCreate a true color image that gets plotted without warnings.\n\n\n\nCode\nprint(f'The red band has {np.isnan(netcdf.red).sum().item()} na values')\nprint(f'The green band has {np.isnan(netcdf.green).sum().item()} na values')\nprint(f'The blue band has {np.isnan(netcdf.blue).sum().item()} na values')\n\n\nThe red band has 0 na values\nThe green band has 1 na values\nThe blue band has 109 na values\n\n\n\n\nCode\nnetcdf[['red', 'green', 'blue']].fillna(0).to_array().plot.imshow(robust = True) # Robust and fillna allow us to plot despite the NA values\n\n\n\n\n\n\n\n\n\nYou can sort of see the fire damage, however it isnt as aparant as the false color image.\n\n\n6. False color image\nFalse color images plot short wave infared, near infared, and red bands. By assigning infrared bands to visible colors, these images highlight vegetation health, burn severity, and the extent of fire scars. This approach helps researchers and land managers assess recovery efforts, identify high-risk areas, and plan restoration strategies (“Assignment 4: Thomas Fire — MEDS-EDS-220 Course” 2025)\n\n\nCode\n# This plotting code is very similar to the other, but we are selecting bands\nnetcdf[['swir22', 'nir08', 'red']].to_array().plot.imshow(robust = True) # Note! No Na's are present\n\n\n\n\n\n\n\n\n\nThe red areas are burn scars from the fires, and to see them better we can plot the fire perimeters on top.\n\n\n7. Map\nHere we map the fire perimeters onto the false color image. Before we plot we need to make sure that the CRS of both match\n\n\nCode\n# Before we plot we need to ensure we are in the same crs\npalisades_perimeter = palisades_perimeter.to_crs(netcdf.rio.crs)\n\n\neaton_perimeter = eaton_perimeter.to_crs(netcdf.rio.crs)\n\n\n\n\nCode\n \n\nfig, ax = plt.subplots(1, 1, figsize = (14,12)) # Set a size for our figure\n\nnetcdf[['swir22', 'nir08', 'red']].to_array().plot.imshow(robust = True, ax = ax) # Choose false color bands\n\neaton_perimeter.plot(ax = ax, color = 'none', edgecolor = 'red') # Plot Eaton fire perimeter in red\n\npalisades_perimeter.plot(ax = ax, color = 'none', edgecolor = 'red') # And the Palisade perimeter\n\n\nplt.suptitle('False Color image of Palisades and Eaton fires in Santa Barbara', \n             fontsize=16, \n             y = .77) # This y was a lot of guess and checking \nplt.title(\"Plot of SWIR, NIR, and RED light bands\", \n          fontsize=12, \n          y=1.01) # Title defaults inside the plot and I want it just above, hence 1.01\n\n\n\nplt.figtext(x = .19, # The position of the figtext, In units of 0-1 for x and y \n            y = .46,\n            s = 'Palisades Fire Perimeter',\n            color = 'black',\n            bbox ={'facecolor':'grey',  # Add a box around text for legibility \n                   'alpha':1, 'pad':5}) \nplt.figtext(x = .67, \n            y = .63, \n            s= 'Eaton Fire Perimeter',\n            color = 'black',\n           bbox ={'facecolor':'grey', \n                   'alpha':1, 'pad':5})\n\nax.add_artist(ScaleBar(1, dimension=\"si-length\", units=\"m\", location=\"lower left\")) # Add a scale bar on the lower left\n\nax.axis('off') # Turn Axes off\n\nplt.show() # Show plot only \n\n\n\n\n\n\n\n\n\nShort-wave infrared (SWIR) was mapped to the red channel, near-infrared (NIR) to green, and the red band to blue. This false-color composite highlights post-fire effects from the January 2025 Palisades–Eaton fires. Burned areas appear as bright orange to deep red, while the fire perimeter is outlined in red for clarity, with the fire name next to the perimeter. As you can see some of the fire perimeter still contains some vegitation, thanks to our brave firefighters.\n\n\n8. Intersection with environmental justice\nIn this and the following sections we will be accessing data from the California Environmental Justice Index (EJI), and plotting census count information in the context of the fire perimeters.\nWe begin by importing the EJI. (Centers for Disease Control and Prevention and Agency for Toxic Substances and Disease Registry 2021)\n\n\nCode\nfp = os.path.join('data','EJI_2024_California ','EJI_2024_California.gdb')\neji_ca = gpd.read_file(os.path.abspath(fp))\n\n\nThe EJI has a number of socioeconomic factors along with geometries of where the census was taken. These include:\n\nPercentage of housing units that are renter occupied: E_RENTER\nPercentage of persons who are unisured: E_UNINSUR\n65+: E_AGE65\nproportion of greenspace: E_PARK\n\n\n\n9. Polygon intersection\nTo find where social variables intersect our fire perimeters we can use polygon intersection, where we examine where the shape of the census tracts intersect with the shape of the fire perimeter.\n\n\nCode\n# From previous exploration I know the CRS does not match \n# Spatially join EJI with palisades\npali_eji = gpd.sjoin(eji_ca.to_crs(palisades_perimeter.crs), palisades_perimeter) \n\nfig, ax = plt.subplots(figsize = (11,5))\nax.axis('off')\npali_eji.plot('TRACTCE',\n              ax = ax)\n\npalisades_perimeter.plot(ax = ax,\n                    color = 'none',\n                    edgecolor = 'red',\n                    linewidth = 1.5)\n\n\n\n\n\n\n\n\n\nPolygon intersection includes the entire census tracts that are touching the fire, see orange. This problem becomes more aparent when we plot the Eaton fire.\n\n\nCode\n# Spatially join EJI with palisades\neaton_eji = gpd.sjoin(eji_ca.to_crs(eaton_perimeter.crs), eaton_perimeter) \n\nfig, ax = plt.subplots(figsize = (11,5))\nax.axis('off')\neaton_eji.plot('TRACTCE',\n              ax = ax)\n\neaton_perimeter.plot(ax = ax,\n                    color = 'none',\n                    edgecolor = 'red',\n                    linewidth = 1.5)\n\n\n\n\n\n\n\n\n\nAs you can see a large census tract is completely included, despite a comparably small portion of the tract having been effected by the fire.\n\n\n10. Polygon clipping\nInstead of polygon intersection we will be using polygon clipping. If you think of cookies, polygon intersection is like the dalgona cookies from squid games. The shape is almost cut out, however the larger area is still aparent. Polygon clipping is more like using cookie cutter to only choose the area from fire perimeter, not the entire census.\nFor future plotting we are going to make new, clipped variables.\n\n\nCode\neji_ca = eji_ca.to_crs(palisades_perimeter.crs)\nclip_eji_pali = gpd.clip(eji_ca, palisades_perimeter)\nclip_eji_eaton = gpd.clip(eji_ca, eaton_perimeter)\n\n\nAs you can see the clipped plots show the exact areas of the census tracts which were in the fire perimeters.\n\n\nCode\nclip_eji_pali.plot('TRACTCE')\n\n\n\n\n\n\n\n\n\n\n\nCode\nclip_eji_eaton.plot('TRACTCE')\n\n\n\n\n\n\n\n\n\n\n\n11. Visualize fire perimeters with a basemap\nUsing the package contextily we can add a base map to contextualize the fire areas within the greater Los Angeles Area.\n\n\nCode\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\nax.ticklabel_format(style='plain')\n\n\n# 1. Reproject everything to EPSG:3857\nclip_eji_pali_3857      = clip_eji_pali.to_crs(epsg=3857)\nclip_eji_eaton_3857     = clip_eji_eaton.to_crs(epsg=3857)\npalisades_perimeter_3857 = palisades_perimeter.to_crs(epsg=3857)\neaton_perimeter_3857     = eaton_perimeter.to_crs(epsg=3857)\n\n# 2. Plot layers\nclip_eji_pali_3857.plot(\n    ax=ax, facecolor='red', alpha=0.6, edgecolor='none'\n)\nclip_eji_eaton_3857.plot(\n    ax=ax, facecolor='blue', alpha=0.4, edgecolor='none'\n)\n\npalisades_perimeter_3857.plot(\n    ax=ax, color='none', edgecolor='black', linewidth=2\n)\neaton_perimeter_3857.plot(\n    ax=ax, color='none', edgecolor='purple', linewidth=2\n)\n\n# 3. Add basemap last\nctx.add_basemap(ax=ax, source=ctx.providers.OpenStreetMap.Mapnik)\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\nThis plot turns highlights the neighborhoods which were effected, as well as showing just how close to more densly populated areas the fires got.\n\n\n12. Mapping socioecomic factors\nFor this section I chose to examine the percentage of the census tracts which were renters. I chose this because, following the fires, renters faced issues with: - Loss of homes - Rent increases (double to triple the price) - Landlords trying to push out long-term renters who pay lower rents to make way for displaced fire victims who have more money to spend - Paying out of pocket to clean and fix partially damaged rental space (CBS Los Angeles 2025)\nThese issues compound the already devistating fire and reduce quality of life for renters.\nTo plot this I used the percentage of census tracts which are renters.\n\n\nCode\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 12))\n\n# Set eji variable of interest\neji_variable = 'E_RENTER'\n\n# Find common min/max for legend range\nvmin = min(clip_eji_pali[eji_variable].min(), clip_eji_eaton[eji_variable].min())\nvmax = max(clip_eji_pali[eji_variable].max(), clip_eji_eaton[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\nclip_eji_pali.plot(\n    column= eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax1,\n)\nax1.set_title('Palisades Fire')\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\nclip_eji_eaton.plot(\n    column=eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax2,\n)\nax2.set_title('Eaton Fire')\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('Renter occupied buildings in Palisades and Eaton Fires',\n             y=0.7) # Y = .7 sets height of title\n\n\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable( norm=plt.Normalize(vmin=vmin, vmax=vmax))\ncbar_ax = fig.add_axes([0.25, 0.3, 0.5, 0.02])  # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\ncbar.set_label('Percent Renters')\n\nplt.show()\n\n\n\n\n\n\n\n\n\nFrom the map you can see that the Palisades fire affected more renters, with a large area of close to 50% renters being found at the lower left of the perimeter (Malibu). While this is an affluent area, it has seen some of the highest level of post-fire price gouging (FOX 11 Los Angeles 2025). This could alienate those who have historically lived in the communities to move elsewhere, shifting the social and demographic makeup of these areas."
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html",
    "href": "posts/aquaculture_and_eezs/index.html",
    "title": "Aquaculture and EEZ’s",
    "section": "",
    "text": "Photo by me!\nExclusive economic zones (EEZ’s) are areas of the ocean, generally extending 200 nautical miles (230 miles) beyond a nation’s territorial sea, within which a coastal nation has jurisdiction over both living and nonliving resources (N.O. Exploration 2025). With their natural boundary, these areas sustain millions of people worldwide. The management of these EEZ’s is crucial for both economic and ecological prosperity.\nIn this project we are going to map where, along the North Pacific EEZ, is best for farming a variety of species in an attempt to determine where resources could be allocated. We will accomplish this by first showing the generalized workflow, and then showing a function which completes the workflow for a list of species.\nCode\npacman::p_load('tidyverse', \n               'sf', \n               'here',\n               'tmap', \n               'kableExtra',\n               'patchwork',\n               'stars',\n               'terra')"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#data-import",
    "href": "posts/aquaculture_and_eezs/index.html#data-import",
    "title": "Aquaculture and EEZ’s",
    "section": "Data import",
    "text": "Data import\n\nSurface temperature from: (NOAA Coral Reef Watch 2025)\nThe surface temperature raster contains global surface temperatures provided by NOAA. Because it represents only surface conditions, relying on this raster may skew results for species that primarily occupy deeper waters.\n\n\nCode\nsst_2008 &lt;- rast(here('posts', 'aquaculture_and_eezs','data',\n                      'average_annual_sst_2008.tif')) \n\nsst_2009 &lt;- rast(here('posts', 'aquaculture_and_eezs','data',\n                      'average_annual_sst_2009.tif'))\nsst_2010 &lt;- rast(here('posts', 'aquaculture_and_eezs', 'data',\n                      'average_annual_sst_2010.tif'))\nsst_2011 &lt;- rast(here('posts', 'aquaculture_and_eezs','data',\n                      'average_annual_sst_2011.tif'))\nsst_2012 &lt;- rast(here('posts', 'aquaculture_and_eezs', 'data',\n                      'average_annual_sst_2012.tif'))\n\n\n\n\nBathymetry\nThe bathymetry raster data are sourced from the GEBCO Bathymetric Compilation Group (2025), which provides global seafloor depth information. From: (GEBCO Bathymetric Compilation Group 2025 2025)\n\n\nCode\nbathy &lt;- rast(here('posts', 'aquaculture_and_eezs', 'data','depth.tif')) %&gt;% \n  project(\"EPSG:4326\") # Coerce into correct CRS\n\n\n\n\nExclusive Economic Zones\nThe EEZ layer contains global Exclusive Economic Zone vector boundaries provided by Marine Regions (v12). From: (Flanders Marine Institute (VLIZ) 2025)\n\n\nCode\neez &lt;- st_read(here('posts', 'aquaculture_and_eezs','data',\n                    'wc_regions_clean.shp'), quiet = TRUE) %&gt;% \n  st_transform(\"EPSG:4326\") # STARS OBJECT"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#surface-temperature-mean",
    "href": "posts/aquaculture_and_eezs/index.html#surface-temperature-mean",
    "title": "Aquaculture and EEZ’s",
    "section": "Surface temperature mean",
    "text": "Surface temperature mean\nHere we find the mean of the stacked surface temperature raster between 2008 and 2012\n\n\nCode\n# Stacked raster\nstacked_sst &lt;- c(sst_2008, sst_2009, sst_2010, sst_2011, sst_2012) %&gt;% # Here we stack our temperatures and then transform crs\n  project(\"EPSG:4326\") \n\n# Take mean of stacked raster and transform from Kelvin to Celsius\nmean_sst &lt;- mean(stacked_sst) - 273.15"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#bathymetry-1",
    "href": "posts/aquaculture_and_eezs/index.html#bathymetry-1",
    "title": "Aquaculture and EEZ’s",
    "section": "Bathymetry",
    "text": "Bathymetry\nNext we make sure our depth data follows the same coordinate reference system, so they can be projected onto the same plot.\n\n\nCode\n# First we need to assure this data is in the same crs as sst\ndepth_projected &lt;- project(bathy, mean_sst) # Project the crs of mean sst on depth \n\ncrs(depth_projected) == crs(mean_sst)\n\n\n[1] TRUE\n\n\nCode\n# We are going to crop the depth raster to the eez\ndepth_cropped &lt;- crop(depth_projected, mean_sst)\n\n# And resample to make sure our pixel sizes match \ndepth_resampled &lt;- resample(depth_projected, mean_sst)"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#oyster-reclassification",
    "href": "posts/aquaculture_and_eezs/index.html#oyster-reclassification",
    "title": "Aquaculture and EEZ’s",
    "section": "Oyster Reclassification",
    "text": "Oyster Reclassification\nThis is the point in the workflow where we are ready for reclassification, where a function may come into play. To highlight the workflow of the function, I will be showing one example of the analysis outside the function. We are going to focus on Oysters for this first example. We need to reclassify both temperature and depth for oysters, which enjoy depth between -70 meters and 0 meters and temperatures between 11 and 30 degrees Celsius.\n\n\nCode\nrcl_depth &lt;- matrix(c(-Inf, -70, 0, # Anything below 70 m becomes a 0\n                    -70, 0, 1, # Between 70 and 0 becomes 1\n                    0, Inf, 0), # And above 0 becomes a 0\n                    nrow = 3, \n                    byrow = TRUE)\n\nrcl_temp &lt;- matrix(c(-Inf, 11, 0, # Below 11 degrees becomes 0\n                     11, 30, 1, # Between 11 and 30 becomes 1\n                     30, Inf, 0), # Above 30 becomes 0\n                   nrow =3,\n                   byrow = TRUE)\n# Apply those matrices\ndepth_rcl &lt;- classify(depth_resampled, rcl_depth) \n\nsst_rcl &lt;- classify(mean_sst, rcl_temp)\n\n\nWe want to keep where both sst and depth equal one, so we can multiply the two rasters.\n\n\nCode\nsuitable_cells &lt;- sst_rcl * depth_rcl\n\n# And make all 0's NA\nsuitable_cells[suitable_cells == 0] &lt;- NA\n\n# Finally, since we only have ones, change that to suitable\nnames(suitable_cells) &lt;- 'Suitable'\n\n\nNow we want to see the area of the suitable cells, which we can get by multiplying suitable_cells and the cellSize of each cell\n\n\nCode\narea_raster &lt;- suitable_cells * cellSize(suitable_cells, unit = 'km')  \n\n\nNext we extract where that area touches our EEZ.\n\n\nCode\narea_extracted &lt;- terra::extract(area_raster, \n                                 eez, \n                                 touches = TRUE) %&gt;%  \n  group_by(ID) %&gt;% # Then we group_by and summarise the total suitable area per eez region\n  summarise(suitable_area = sum(Suitable, na.rm = TRUE)) %&gt;% \n  mutate(rgn = eez$rgn)\n\n\nFor plotting we want to join the EEZ with the extracted area\n\n\nCode\n# Lastly we want to left join to preserve the area information of each eez region\nregion_suitable_area &lt;- left_join(x = eez,\n                                  y = area_extracted, \n                                  by = \"rgn\") %&gt;% \n  dplyr::select(-ID) # Get rid of ID column\n\n\n\nMap\nNow we have our final mapping data frame and can build our map\n\n\nCode\ntm_basemap(\"Esri.WorldTopoMap\")+# I found this basemap fit the best\ntm_shape(region_suitable_area)+\n  tm_polygons(fill = 'suitable_area',\n              fill.scale = tm_scale(values = c(\"#FFE4F2\",  \n                                               \"#F7B5D4\", \n                                               \"#E698C3\", \n                                               \"#C75A8C\", \n                                               \"#A0185A\"),\n                                    breaks = c(0, \n                                               800, # Specify breaks \n                                               1600,\n                                               2400, \n                                               3200,\n                                               4000)),\n              fill.legend = tm_legend( '        Total \\nSuitable area (km)'))+ # The blank space makes 'Total' centered\n  tm_title(text = paste('Suitable area for farming Oysters in West Coast EEZ'), \n           position = tm_pos_out(\"center\", \"top\", pos.h = \"center\"))+ # Add title and position in center\n  tm_layout(component.autoscale = FALSE)+ # Autoscale makes our title tiny so we turn it off\n  tm_graticules(alpha = .5)+ # Add graticules (lighter)\n  tm_text('rgn', size = .7)+ # This adds the region name on each polygon centroid\ntm_shape(suitable_cells)+ # I want to add the visual representation of where the suitable area is \n  tm_raster(col  =  'Suitable',\n             col.scale =  tm_scale(values = '#90AFDA', # This color is also part of my palette\n            labels = 'Suitable Area'), # In place of a title  we will be specific with our legend text\n            col.legend = tm_legend(title = \"\")) # No need for a legend title with a single raster variable\n\n\n\n\n\n\n\n\n\n\n\nTable\nI also want to be able to see a table of our exact suitable area in each region so we can use kable\n\n\nCode\ntbl_data &lt;- region_suitable_area %&gt;% \n  st_drop_geometry() %&gt;% \n  select(-rgn_key, -rgn_id, -area_m2)\n\nn_rows &lt;- nrow(tbl_data)\n\ntbl_data %&gt;% \n  kbl(\n    col.names = c('Region', 'Total Area (Km2)', 'Suitable Area (Km2)'),\n    digits = 3,\n    caption = \"Suitable Area for Farming Oysters\",\n    format = \"html\"\n  ) %&gt;% \n  kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = FALSE,\n    position   = \"center\",\n    font_size  = 14\n  ) %&gt;% \n  row_spec(\n    0,\n    bold = TRUE,\n    color = \"white\",\n    background = \"#A0185A\"\n  ) %&gt;%  \n  row_spec(\n    1:n_rows,\n    color = \"black\",\n    background = \"#FFC4EB\"\n  )\n\n\n\n\nSuitable Area for Farming Oysters\n\n\nRegion\nTotal Area (Km2)\nSuitable Area (Km2)\n\n\n\n\nOregon\n179994.06\n1147.883\n\n\nNorthern California\n164378.81\n194.126\n\n\nCentral California\n202738.33\n3673.514\n\n\nSouthern California\n206860.78\n3259.485\n\n\nWashington\n66898.31\n2524.804\n\n\n\n\n\n\n\n\nOyster Discussion\nFrom this map and table we can see that Oysters would be better farmed in Central and Southern California as well as Washington, but less so in Northern California and Oregon. This is more likely due to the depth range instead of the temperature range, due to surface temperatures in Washington and Southern California being wildly different."
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#function",
    "href": "posts/aquaculture_and_eezs/index.html#function",
    "title": "Aquaculture and EEZ’s",
    "section": "Function",
    "text": "Function\nNow that I have my workflow solidified I can turn it into a function, so with just the species name it can output a map. I am doing this in an attempt to generalize the workflow so theoretically any species could be farmed. The resources for this data will be cited in the references section. One limitation is not all of these species have hard depth and temperature limits due to lack of studying, however for our purposes these values work well.\n\n\nCode\n#' Map EEZ\n#' Make a map of a suitable area of a species in west coast EEZ's\n#' @param species \n#' The name of your species, MUST be wrapped AND Uppercase eg: ('Pacific Oyster')\n#' @returnsA list containing:\n#'   - $map   : tmap object\n#'   - $table : kable table\n#' @export\n#' @examples\n#' \nmap_eez &lt;- function(species){\n\n  species_dict &lt;- list(\n  \n  # -----------------------------\n  # Molluscs\n  # -----------------------------\n  \n  \"Pacific Oyster\" = list(\n    t_lwr = 11, t_upr = 30,\n    d_lower = 70, d_upr = 0\n  ),\n\n  \"Olympia Oyster\" = list(\n    t_lwr = 8,  t_upr = 20,\n    d_lower = 40, d_upr = 0\n  ),\n\n  \"Geoduck\" = list(\n    t_lwr = 5, t_upr = 18,\n    d_lower = 100, d_upr = 5\n  ),\n\n  \"Razor Clam\" = list(\n    t_lwr = 5, t_upr = 17,\n    d_lower = 20, d_upr = 0\n  ),\n\n  \"Blue Mussel\" = list(\n    t_lwr = 5, t_upr = 20,\n    d_lower = 30, d_upr = 0\n  ),\n\n  \"Scallop\" = list(\n    t_lwr = 8, t_upr = 20,\n    d_lower = 50, d_upr = 0\n  ),\n  \n   \"Red Abalone\" = list(         \n      t_lwr = 8, t_upr = 20,\n      d_lower = 24, d_upr = 0\n    ),\n\n    \"California Mussel\" = list(   \n      t_lwr = 5, t_upr = 22,\n      d_lower = 100, d_upr = 0\n    ),\n\n  # -----------------------------\n  # KELP + SEAWEEDS\n  # -----------------------------\n  \n  \"Bull Kelp\" = list(\n    t_lwr = 10, t_upr = 18,\n    d_lower = 40, d_upr = 0\n  ),\n  \n  \"Giant Kelp\" = list(\n    t_lwr = 6,  t_upr = 20,\n    d_lower = 30, d_upr = 0\n  ),\n  \n  \"Sugar Kelp\" = list(\n    t_lwr = -2, t_upr = 15,\n    d_lower = 50, d_upr = 1\n  ),\n  \n  \"Dulse\" = list(\n    t_lwr = 5,  t_upr = 15,\n    d_lower = 10, d_upr = 0\n  ),\n  \n  \"Sea Lettuce\" = list(\n    t_lwr = 5,  t_upr = 25,\n    d_lower = 10, d_upr = 0\n  ),\n  \n  \"Winged Kelp\" = list(\n    t_lwr = 2, t_upr = 15,\n    d_lower = 40, d_upr = 0\n  ),\n\n  \"Pyropia (Nori)\" = list(\n    t_lwr = 5,  t_upr = 15,\n    d_lower = 10, d_upr = 0\n  ),\n  \n  # -----------------------------\n  # ECHINODERMS (URCHINS)\n  # -----------------------------\n  \n  \"Green Sea Urchin\" = list(\n    t_lwr = 0, t_upr = 15,\n    d_lower = 200, d_upr = 0\n  ),\n\n  \"Red Sea Urchin\" = list(\n    t_lwr = 5, t_upr = 20,\n    d_lower = 100, d_upr = 3\n  ),\n  \n  # -----------------------------\n  # FINFISH\n  # -----------------------------\n\n  \"Chinook Salmon\" = list(\n    t_lwr = 8,  t_upr = 14,\n    d_lower = 200, d_upr = 0\n  ),\n\n  \"Coho Salmon\" = list(\n    t_lwr = 7, t_upr = 14,\n    d_lower = 150, d_upr = 0\n  ),\n\n  \"Steelhead Trout\" = list(\n    t_lwr = 7, t_upr = 17,\n    d_lower = 100, d_upr = 0\n  ),\n\n  \"Pacific Halibut\" = list(\n    t_lwr = 3,  t_upr = 12,\n    d_lower = 450, d_upr = 20\n  ),\n\n  \"Sablefish\" = list(\n    t_lwr = 4,  t_upr = 12,\n    d_lower = 1500, d_upr = 50\n  ),\n\n  \"Pacific Sardine\" = list(\n    t_lwr = 12, t_upr = 20,\n    d_lower = 0, d_upr = 50\n  ),\n\n  \"Northern Anchovy\" = list(\n    t_lwr = 12, t_upr = 20,\n    d_lower = 0, d_upr = 50\n  ),\n  \n  \"California Halibut\" = list(  \n      t_lwr = 8, t_upr = 16,\n      d_lower = 183, d_upr = 0\n    ),\n\n    \"Rainbow Trout\" = list(        \n      t_lwr = 4, t_upr = 18,\n      d_lower = 200, d_upr = 0\n    ),\n  \n    \"California Yellowtail\" = list(\n      t_lwr = 18, t_upr = 24,\n      d_lower = 150, d_upr = 5\n    ),\n  \n  # -----------------------------\n  # Arthropods\n  # -----------------------------\n\n  \"Dungeness Crab\" = list(\n    t_lwr = 7, t_upr = 18,\n    d_lower = 100, d_upr = 0\n  ),\n  \n  \"Spiny Lobster\" = list(     \n      t_lwr = 12, t_upr = 24,\n      d_lower = 150, d_upr = 0\n    )\n\n)\n\n# Extract parameters from the dictionary\nparams &lt;- species_dict[[species]]\n  \nif (species == \"list\") {\n  return(names(species_dict))\n}\n\nif (is.null(params)) stop(\"Species not found in dictionary. Check spelling.\")\n\n\n\n# Access individual values\nt_lwr &lt;- params$t_lwr\nt_upr &lt;- params$t_upr\nd_lower &lt;- params$d_lower\nd_upr   &lt;- params$d_upr\n\n# Reclassification matrices\nrcl_depth &lt;- matrix(c(-Inf, -d_lower, 0, # Use variables like values\n                      -d_lower, -d_upr, 1,\n                      -d_upr, Inf, 0), \n                    nrow = 3, \n                    byrow = TRUE)\n\nrcl_temp &lt;- matrix(c(-Inf, t_lwr, 0,\n                     t_lwr, t_upr, 1,\n                     t_upr, Inf, 0), \n                   nrow =3,\n                   byrow = TRUE)\n\n# Reclassify \ndepth_rcl &lt;- classify(depth_resampled, rcl_depth)\n\nsst_rcl &lt;- classify(mean_sst, rcl_temp)\n\n# Calculate suitable cells\nsuitable_cells &lt;- sst_rcl * depth_rcl\n\nsuitable_cells[suitable_cells == 0] &lt;- NA\n\nnames(suitable_cells) &lt;- 'Suitable'\n\n# Calculate area of suitable cells\narea_raster &lt;- suitable_cells * cellSize(suitable_cells, unit = 'km')\n\n# Extract suitable areas \narea_extracted &lt;- terra::extract(area_raster, \n                                 eez, \n                                 touches = TRUE) %&gt;%  \n  group_by(ID) %&gt;% \n  summarise(suitable_area = sum(Suitable, na.rm = TRUE)) %&gt;% \n  mutate(rgn = eez$rgn)\n\n# Create geodf with suitable area and eez area\nregion_suitable_area &lt;- left_join(x = eez,\n                                  y = area_extracted, \n                                  by = \"rgn\") %&gt;% \n  select(-ID)\n\n\n# Create map\nmap &lt;- tm_basemap(\"Esri.WorldTopoMap\")+\n  tm_shape(region_suitable_area)+\n  tm_polygons(fill = 'suitable_area',\n              fill.scale = tm_scale(values = c(\"#FFE4F2\",  \n                                               \"#F7B5D4\", \n                                               \"#E698C3\", \n                                               \"#C75A8C\", \n                                               \"#A0185A\"),\n                                    n = 5), # Set 5 breaks\n              fill.legend = tm_legend( '        Total \\nSuitable area (km)'))+\n  tm_title(text = paste('Suitable area for farming', species, 'in West Coast EEZ'), position = tm_pos_out(\"center\", \"top\", pos.h = \"center\"))+ # Paste allows us to manipulate the title of the plot\n  tm_layout(component.autoscale = FALSE)+\n  tm_graticules(alpha = .5)+\n  tm_text('rgn', size = .7)+\ntm_shape(suitable_cells)+\n  tm_raster(col  =  'Suitable',\n             col.scale =  tm_scale(values = '#90AFDA', \n            labels = 'Suitable Area'),\n            col.legend = tm_legend(title = \"\"))\n\n# Create table\ntbl_data &lt;- region_suitable_area %&gt;% \n  st_drop_geometry() %&gt;% \n  select(-rgn_key, -rgn_id, -area_m2)\n\nn_rows &lt;- nrow(tbl_data)\n\ntable &lt;- tbl_data %&gt;% \n  kbl(\n    col.names = c('Region', 'Total Area (Km2)', 'Suitable Area (Km2)'),\n    digits = 3,\n    caption = paste('EEZ region suitable area for farming', species),\n    format = \"html\"\n  ) %&gt;% \n  kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = FALSE,\n    position   = \"center\",\n    font_size  = 14\n  ) %&gt;% \n  row_spec(\n    0,\n    bold = TRUE,\n    color = \"white\",\n    background = \"#A0185A\"\n  ) %&gt;%  \n  row_spec(\n    1:n_rows,\n    color = \"black\",\n    background = \"#FFC4EB\"\n  )\n\n\nreturn(list( # Make a list of our map and table so they can be called with a buck\n    map = map, \n    table = table\n  ))\n}\n\n\nNow we can call the function for any species in our species list\nTo know species options you can run map_eez('list')\n\nmap_eez('list')\n\n [1] \"Pacific Oyster\"        \"Olympia Oyster\"        \"Geoduck\"              \n [4] \"Razor Clam\"            \"Blue Mussel\"           \"Scallop\"              \n [7] \"Red Abalone\"           \"California Mussel\"     \"Bull Kelp\"            \n[10] \"Giant Kelp\"            \"Sugar Kelp\"            \"Dulse\"                \n[13] \"Sea Lettuce\"           \"Winged Kelp\"           \"Pyropia (Nori)\"       \n[16] \"Green Sea Urchin\"      \"Red Sea Urchin\"        \"Chinook Salmon\"       \n[19] \"Coho Salmon\"           \"Steelhead Trout\"       \"Pacific Halibut\"      \n[22] \"Sablefish\"             \"Pacific Sardine\"       \"Northern Anchovy\"     \n[25] \"California Halibut\"    \"Rainbow Trout\"         \"California Yellowtail\"\n[28] \"Dungeness Crab\"        \"Spiny Lobster\""
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Peter Vitale",
    "section": "",
    "text": "I’m a marine biologist with a passion for ocean life, data visualization, and science communication. I studied Marine Biology at UC Santa Cruz and have worked in environmental education, field research, and data analysis. I enjoy finding creative ways to connect people with the natural world and make environmental data more engaging and accessible."
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Blog Posts",
    "section": "",
    "text": "San Fransisco Bay Catch Dynamics\n\n\n\nMEDS\n\nR\n\nStatistics\n\n\n\nExamining Northern Anchovies ability to predict indicator species\n\n\n\nPeter Vitale\n\n\nDec 3, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nVisualizing the 2025 California Wildfires\n\n\n\nMEDS\n\nGeospatial\n\nPython\n\n\n\nPlotting true and false color images with Landsat data.\n\n\n\nPeter Vitale\n\n\nDec 1, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nAquaculture and EEZ’s\n\n\n\nMEDS\n\nR\n\nGeospatial\n\n\n\nExamining where in the North Pacific Economic Exclusive Zone is best for aquaculture of different species\n\n\n\nPeter Vitale\n\n\nNov 28, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nExtreme Weather Events\n\n\n\nMEDS\n\nR\n\nGeospatial\n\n\n\nExamining blackouts in Houston,TX following a 2021 storm\n\n\n\nPeter Vitale\n\n\nNov 12, 2025\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#reference-table",
    "href": "posts/aquaculture_and_eezs/index.html#reference-table",
    "title": "Aquaculture and EEZ’s",
    "section": "Reference table",
    "text": "Reference table\n\n\n\nSpecies\nCitation\n\n\n\n\nPacific Oyster\nFAO (2020)\n\n\nOlympia Oyster\nFisheries (2019)\n\n\nGeoduck\nW. S. Grant (2018)\n\n\nRazor Clam\nO. S. M. Program (2017)\n\n\nBlue Mussel\nAquaculture (2015)\n\n\nScallop\nResearch (2016)\n\n\nRed Abalone\nFish and Wildlife (2018)\n\n\nCalifornia Mussel\nU. S. B. M. Program (2021)\n\n\nBull Kelp\nGroup (2017)\n\n\nGiant Kelp\nM. B. A. R. Institute (2016)\n\n\nSugar Kelp\nR. I. S. Grant (2019)\n\n\nDulse\nCouncil (2014)\n\n\nSea Lettuce\nProfiles (2020)\n\n\nWinged Kelp\nLab (2019)\n\n\nPyropia (Nori)\nJ. S. Institute (2011)\n\n\nGreen Sea Urchin\nMarine Resources (2018)\n\n\nRed Sea Urchin\nC. S. Grant (2020)\n\n\nChinook Salmon\nFisheries (2015)\n\n\nCoho Salmon\nFisheries (2016)\n\n\nSteelhead Trout\nUSGS (2018)\n\n\nPacific Halibut\nI. P. H. Commission (2017)\n\n\nSablefish\nCenter (2019)\n\n\nPacific Sardine\nSWFSC (2014)\n\n\nNorthern Anchovy\nC. Program (2016)\n\n\nCalifornia Halibut\nCDFW (2020)\n\n\nRainbow Trout\nAssociation (2015)\n\n\nCalifornia Yellowtail\nH. S. R. Institute (2022)\n\n\nDungeness Crab\nP. S. M. F. Commission (2018)\n\n\nSpiny Lobster\nCDFW (2021)"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#bull",
    "href": "posts/aquaculture_and_eezs/index.html#bull",
    "title": "Aquaculture and EEZ’s",
    "section": "Bull",
    "text": "Bull\nNow we can call the function with any species from the list we find interesting, in this case Bull Kelp. I chose Bull Kelp due to it starting to be grown on the west coast [] as well as it growing incredibly quickly\n\nbull_kelp &lt;- map_eez('Bull Kelp')\n\nCall the map\n\nbull_kelp$map\n\n\n\n\n\n\n\n\nCall the table\n\nbull_kelp$table\n\n\n\n\nRegion\nTotal Area (Km2)\nSuitable Area (Km2)\n\n\n\n\nOregon\n179994.06\n1065.055\n\n\nNorthern California\n164378.81\n1023.031\n\n\nCentral California\n202738.33\n1674.401\n\n\nSouthern California\n206860.78\n1622.344\n\n\nWashington\n66898.31\n3246.458\n\n\n\n1 EEZ region suitable area for farming Bull Kelp\n\n\n\n\n\n\n\n\n\nBull Kelp discussion"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#bull-kelp-function-call",
    "href": "posts/aquaculture_and_eezs/index.html#bull-kelp-function-call",
    "title": "Aquaculture and EEZ’s",
    "section": "Bull Kelp Function call",
    "text": "Bull Kelp Function call\nNow we can call the function with any species from the list we find interesting, in this case Bull Kelp. I chose Bull Kelp due to it starting to be grown on the west coast (N. Fisheries 2025) as well as it growing incredibly quickly, up to 10 inches per day (S. Society 2025). Furthermore Bull Kelp forests have been receding out of Northern California, and I wanted to see if this map yielded similar results (V. Authors 2023).\n\nbull_kelp &lt;- map_eez('Bull Kelp')\n\nNow we can call the map to see the amount of area in each region suitable for farming Bull Kelp as well as where in the regions is suitable for farming the Kelp.\n\nbull_kelp$map\n\n\n\n\n\n\n\n\nNow we call the table showing the amount of area in each region suitable for farming Bull Kelp.\n\nbull_kelp$table\n\n\n\nEEZ region suitable area for farming Bull Kelp\n\n\nRegion\nTotal Area (Km2)\nSuitable Area (Km2)\n\n\n\n\nOregon\n179994.06\n1065.055\n\n\nNorthern California\n164378.81\n1023.031\n\n\nCentral California\n202738.33\n1674.401\n\n\nSouthern California\n206860.78\n1622.344\n\n\nWashington\n66898.31\n3246.458\n\n\n\n\n\n\n\nBull Kelp discussion\nThis map is very close to what I expected, with the highest area for possible farming being in Washington. Where it differences from what I would expect is in central and Southern California which is generally too warm to find Bull Kelp. This could be attributed to the use of mean surface temperature, instead of maximum. This is because when Bull Kelp propagate, their spores will not exit in temperatures above 18 degrees, so any temperature above that is going to cause them not to be able to recruit (and they don’t have the luxury to move to cooler waters)(B.L. Weigel, S.L. Small, H.D. Berry, and M.N. Dethier 07/27/2023)."
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#species-information-reference-table",
    "href": "posts/aquaculture_and_eezs/index.html#species-information-reference-table",
    "title": "Aquaculture and EEZ’s",
    "section": "Species information reference table",
    "text": "Species information reference table\n\n\n\nSpecies\nCitation\n\n\n\n\nPacific Razor Clam\nO.S.M. Program ( 2025)\n\n\nBlue Mussel\nNOAA Aquaculture ( 2025)\n\n\nSea Scallop\nWoods Hole Marine Research ( 2025)\n\n\nRed Abalone\nCalifornia Dept. of Fish and Wildlife ( 2020)\n\n\nCalifornia Mussel\nUC Santa Barbara Marine Program ( 2021)\n\n\nBull Kelp\nPacific Kelp Research Group ( 2017)\n\n\nGiant Kelp\nMonterey Bay Aquarium Research Institute ( 2016)\n\n\nSugar Kelp\nRhode Island Sea Grant ( 2019)\n\n\nDulse\nCanadian Kelp Council ( 2014)\n\n\nSea Lettuce\nMarine Algae Profiles ( 2020)\n\n\nWinged Kelp\nNorth Pacific Algae Lab ( 2019)\n\n\nPyropia (Nori)\nJapan Seaweed Institute ( 2011)\n\n\nGreen Sea Urchin\nMaine Department of Marine Resources ( 2018)\n\n\nRed Sea Urchin\nCalifornia Sea Grant ( 2020)\n\n\nChinook Salmon\nNOAA Fisheries ( 2015)\n\n\nCoho Salmon\nNOAA Fisheries ( 2016)\n\n\nSteelhead Trout\nUSGS ( 2018)\n\n\nPacific Halibut\nInternational Pacific Halibut Commission ( 2017)\n\n\nSablefish\nAlaska Fisheries Science Center ( 2019)\n\n\nPacific Sardine\nNOAA SWFSC ( 2014)\n\n\nNorthern Anchovy\nCalCOFI Program ( 2016)\n\n\nCalifornia Halibut\nCalifornia Dept. of Fish and Wildlife ( 2020)\n\n\nRainbow Trout\nUS Trout Farmers Association ( 2015)\n\n\nCalifornia Yellowtail\nHubbs SeaWorld Research Institute ( 2022)\n\n\nDungeness Crab\nPacific States Marine Fisheries Commission ( 2018)\n\n\nSpiny Lobster\nCalifornia Dept. of Fish and Wildlife ( 2021)"
  },
  {
    "objectID": "posts/aquaculture_and_eezs/index.html#final-discussion",
    "href": "posts/aquaculture_and_eezs/index.html#final-discussion",
    "title": "Aquaculture and EEZ’s",
    "section": "Final Discussion",
    "text": "Final Discussion\nThis project is a small example of how easy it can be to work with publicly available temperature and depth data. Even with a few limitations—like Bull Kelp’s actual temperature range compared to the surface-temperature inputs—I’m still pretty happy with how realistic the results are for identifying potential aquaculture spots. The code ended up being really modular too, which means I can keep adding species or tweaking their ranges as new info comes out. And honestly, that’s what excites me most: this could grow into a much more complete tool over time, especially if I layer in more environmental variables or species traits. For now, though, it feels like a solid starting point and a fun way to blend data, ecology, and mapping into something genuinely useful."
  }
]