<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Peter Vitale">
<meta name="dcterms.date" content="2025-12-01">
<meta name="description" content="Plotting true and false color images with Landsat data.">

<title>Visualizing the 2025 California Wildfires – Peter Vitale</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-4e47306d9073e776f4ff2fcb73ac6bac.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo.png" alt="Black oystercatcher coding in R" class="navbar-logo light-content">
    <img src="../../images/logo.png" alt="Black oystercatcher coding in R" class="navbar-logo dark-content">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Blog Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/petervitale910/petervitale910.github.io"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">Visualizing the 2025 California Wildfires</h1>
                  <div>
        <div class="description">
          Plotting true and false color images with Landsat data.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">MEDS</div>
                <div class="quarto-category">Geospatial</div>
                <div class="quarto-category">Python</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author column-page-left">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="https://petervitale910.github.io/">Peter Vitale</a> </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://bren.ucsb.edu/">
              Masters of Environmental Data Science at BREN
              </a>
            </p>
        </div>
    </div>

  <div class="quarto-title-meta column-page-left">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 1, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#about-this-project" id="toc-about-this-project" class="nav-link active" data-scroll-target="#about-this-project">About this project</a>
  <ul class="collapse">
  <li><a href="#highlights" id="toc-highlights" class="nav-link" data-scroll-target="#highlights">Highlights:</a></li>
  <li><a href="#background-information" id="toc-background-information" class="nav-link" data-scroll-target="#background-information">Background information</a></li>
  <li><a href="#about-the-data" id="toc-about-the-data" class="nav-link" data-scroll-target="#about-the-data">About the data:</a></li>
  <li><a href="#import-packages-and-datasets" id="toc-import-packages-and-datasets" class="nav-link" data-scroll-target="#import-packages-and-datasets">1. Import packages and datasets</a></li>
  <li><a href="#fire-perimeter-data-exploration" id="toc-fire-perimeter-data-exploration" class="nav-link" data-scroll-target="#fire-perimeter-data-exploration">2. Fire perimeter data exploration</a></li>
  <li><a href="#netcdf-data-import-and-exploration" id="toc-netcdf-data-import-and-exploration" class="nav-link" data-scroll-target="#netcdf-data-import-and-exploration">3. NetCDF data import and exploration</a></li>
  <li><a href="#restoring-geospatial-information" id="toc-restoring-geospatial-information" class="nav-link" data-scroll-target="#restoring-geospatial-information">4. Restoring geospatial information</a></li>
  <li><a href="#true-color-image" id="toc-true-color-image" class="nav-link" data-scroll-target="#true-color-image">5. True color image</a></li>
  <li><a href="#false-color-image" id="toc-false-color-image" class="nav-link" data-scroll-target="#false-color-image">6. False color image</a></li>
  <li><a href="#map" id="toc-map" class="nav-link" data-scroll-target="#map">7. Map</a></li>
  <li><a href="#intersection-with-environmental-justice" id="toc-intersection-with-environmental-justice" class="nav-link" data-scroll-target="#intersection-with-environmental-justice">8. Intersection with environmental justice</a></li>
  <li><a href="#polygon-intersection" id="toc-polygon-intersection" class="nav-link" data-scroll-target="#polygon-intersection">9. Polygon intersection</a></li>
  <li><a href="#polygon-clipping" id="toc-polygon-clipping" class="nav-link" data-scroll-target="#polygon-clipping">10. Polygon clipping</a></li>
  <li><a href="#visualize-fire-perimeters-with-a-basemap" id="toc-visualize-fire-perimeters-with-a-basemap" class="nav-link" data-scroll-target="#visualize-fire-perimeters-with-a-basemap">11. Visualize fire perimeters with a basemap</a></li>
  <li><a href="#mapping-socioecomic-factors" id="toc-mapping-socioecomic-factors" class="nav-link" data-scroll-target="#mapping-socioecomic-factors">12. Mapping socioecomic factors</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">





<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image.jpg" class="img-fluid figure-img"></p>
<figcaption>Service Firefighters in the street with a fire hose in front of a house on fire <span class="citation" data-cites="SHF_2025_LA_fires">Guillen (<a href="#ref-SHF_2025_LA_fires" role="doc-biblioref">2025</a>)</span></figcaption>
</figure>
</div>
<section id="about-this-project" class="level2">
<h2 class="anchored" data-anchor-id="about-this-project">About this project</h2>
<p>In this project we will be using true and false color imagery to examine the impacts of two fires which struck the Los Angeles area in early 2025.</p>
<section id="highlights" class="level3">
<h3 class="anchored" data-anchor-id="highlights">Highlights:</h3>
<ul>
<li>Extracting color bands from <code>xarray</code></li>
<li>Mapping using true and false color imagery</li>
<li>Overlaying fire perimiters to see effect of fires</li>
<li>Mapping Environmental Justice Index values within the fire perimeter</li>
</ul>
</section>
<section id="background-information" class="level3">
<h3 class="anchored" data-anchor-id="background-information">Background information</h3>
<p>The Palisades and Eaton fires sparked within hours of each other on January 7th 2025. Due to arid conditions and the Santa Ana winds these fires quickly grew out of control, ultimately burning a combined 40,000 acres <span class="citation" data-cites="vanauken_2025">(<a href="#ref-vanauken_2025" role="doc-biblioref">VanAuken 2025</a>)</span>. The fires led to significant damage and economic loss, estimated between $135 billion and $150 billion <span class="citation" data-cites="accuweather_2025">(<a href="#ref-accuweather_2025" role="doc-biblioref"><span>“Media Advisory: AccuWeather Increases Estimate of Total Damage and Economic Loss as Catastrophic Wildfires Continue to Ravage the Los Angeles Area”</span> 2025</a>)</span>. In this project we will examine the total land area covered by the fires as well as examine socioeconomic factors to interpret the communities affected by, as well as the long lasting effects of the fires.</p>
</section>
<section id="about-the-data" class="level3">
<h3 class="anchored" data-anchor-id="about-the-data">About the data:</h3>
<section id="palisades-and-eaton-fire-perimeters" class="level4">
<h4 class="anchored" data-anchor-id="palisades-and-eaton-fire-perimeters">Palisades and Eaton fire perimeters</h4>
<p>These contain dissolved fire perimeters/boundaries for Eaton and Palisades fires, with boundary polygons dissolved for each fire to create a single fire burn perimeter. Access given by the County of Los Angeles <span class="citation" data-cites="la_fire_perimeters_2025">(<a href="#ref-la_fire_perimeters_2025" role="doc-biblioref"><span>“Palisades and Eaton Dissolved Fire Perimeters (2025)”</span> 2025</a>)</span></p>
</section>
<section id="netcdf-landsat-data" class="level4">
<h4 class="anchored" data-anchor-id="netcdf-landsat-data">Netcdf Landsat data</h4>
<p>Landsat C2 L2 from Microsoft’s Planetary Computer is a globally available, multi-decadal archive of atmospherically corrected, analysis-ready Landsat imagery. Surface reflectance for multispectral bands and derived land surface temperature from thermal bands are provided in cloud-optimized GeoTIFFs, accessible via a STAC API. Accordingly, it is primarily used for long-term environmental monitoring, spectral studies, and thermal remote sensing, and is designed for scalable, cloud-native remote sensing workflows <span class="citation" data-cites="landsat_c2_l2_2025">(<a href="#ref-landsat_c2_l2_2025" role="doc-biblioref">U.S. Geological Survey 2025</a>)</span></p>
</section>
<section id="environmental-justice-index-eji" class="level4">
<h4 class="anchored" data-anchor-id="environmental-justice-index-eji">Environmental Justice Index (EJI)</h4>
<p>The Environmental Justice Index (EJI) measures cumulative environmental, health, and social burdens to identify communities facing the highest environmental injustices. It combines indicators like pollution exposure, health vulnerabilities, and socioeconomic stressors into a single score for each census tract. Higher EJI values indicate greater cumulative impacts and greater need for targeted intervention and resources <span class="citation" data-cites="cdc_eji_2021">(<a href="#ref-cdc_eji_2021" role="doc-biblioref">Centers for Disease Control and Prevention and Agency for Toxic Substances and Disease Registry 2021</a>)</span></p>
<p>GitHub repository for this project and initial .ipynb’s: https://github.com/petervitale910/eds220-hwk4</p>
</section>
</section>
<section id="import-packages-and-datasets" class="level3">
<h3 class="anchored" data-anchor-id="import-packages-and-datasets">1. Import packages and datasets</h3>
<div id="fbdfdded-86a0-4347-b708-d71cef03804f" class="cell" data-tags="[]" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xarray <span class="im">as</span> xr</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rioxarray <span class="im">as</span> rio</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib_scalebar.scalebar <span class="im">import</span> ScaleBar</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> contextily <span class="im">as</span> ctx</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="fire-perimeter-data-exploration" class="level3">
<h3 class="anchored" data-anchor-id="fire-perimeter-data-exploration">2. Fire perimeter data exploration</h3>
<p>Here we import the perimeter data files and do some exploration.</p>
<p>I am going to import both perimeters and then look at the CRS, or coordinate reference system. This allows us to map all datasets using the same projection.</p>
<div id="8e71ce21-e7b8-41c8-812c-f0d198647d1b" class="cell" data-tags="[]" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> os.path.join(<span class="st">'data'</span>,<span class="st">'Eaton_Perimeter_20250121'</span>,<span class="st">'Eaton_Perimeter_20250121.shp'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>eaton_perimeter <span class="op">=</span> gpd.read_file(fp)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="d12e488b-3a01-4782-acc3-83f1bd377861" class="cell" data-tags="[]" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> os.path.join(<span class="st">'data'</span>,<span class="st">'Palisades_Perimeter_20250121'</span>,<span class="st">'Palisades_Perimeter_20250121.shp'</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>palisades_perimeter <span class="op">=</span> gpd.read_file(fp)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="31ab11ef-b030-4155-b167-7130b42c27b8" class="cell" data-tags="[]" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we can look at the crs's and do some exploration </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>palisades_perimeter.crs</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>&lt;Projected CRS: EPSG:3857&gt;
Name: WGS 84 / Pseudo-Mercator
Axis Info [cartesian]:
- X[east]: Easting (metre)
- Y[north]: Northing (metre)
Area of Use:
- name: World between 85.06°S and 85.06°N.
- bounds: (-180.0, -85.06, 180.0, 85.06)
Coordinate Operation:
- name: Popular Visualisation Pseudo-Mercator
- method: Popular Visualisation Pseudo Mercator
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich</code></pre>
</div>
</div>
<div id="b3fe7906-1101-4b74-aa09-16382fd113e5" class="cell" data-tags="[]" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>eaton_perimeter.crs</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>&lt;Projected CRS: EPSG:3857&gt;
Name: WGS 84 / Pseudo-Mercator
Axis Info [cartesian]:
- X[east]: Easting (metre)
- Y[north]: Northing (metre)
Area of Use:
- name: World between 85.06°S and 85.06°N.
- bounds: (-180.0, -85.06, 180.0, 85.06)
Coordinate Operation:
- name: Popular Visualisation Pseudo-Mercator
- method: Popular Visualisation Pseudo Mercator
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich</code></pre>
</div>
</div>
<p>We know we want to merge these datasets at some point, so it is important to check if the column names match in the two perimeters</p>
<div id="2ea128a4-4a4d-4b27-98d0-e12d8969e364" class="cell" data-tags="[]" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lets compare the column names to make sure they match </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f' It is </span><span class="sc">{</span>eaton_perimeter<span class="sc">.</span>columns <span class="op">==</span> palisades_perimeter<span class="sc">.</span>columns<span class="sc">}</span><span class="ss"> that the column names match'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> It is [ True  True  True  True  True] that the column names match</code></pre>
</div>
</div>
<div id="67447c58-4643-4715-bb1d-ac786228f6c5" class="cell" data-tags="[]" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Thats great we only need to look at one of the dataframes columns </span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">' The column names of the data frames are'</span>, eaton_perimeter.columns)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> The column names of the data frames are Index(['OBJECTID', 'type', 'Shape__Are', 'Shape__Len', 'geometry'], dtype='object')</code></pre>
</div>
</div>
<p><em>Summary:</em> From the preliminary exploration both the Palisades and Eaton datasets are in ESPG:3857, which is a projected coordinate system. Both have the same column names which will make analysis and merging easier.</p>
</section>
<section id="netcdf-data-import-and-exploration" class="level3">
<h3 class="anchored" data-anchor-id="netcdf-data-import-and-exploration">3. NetCDF data import and exploration</h3>
<p>Here we will import and explore the Landsat data using <code>xr.open_dataset()</code>.</p>
<div id="4b1202f7-c33b-4cec-a6b1-5130532d27d0" class="cell" data-tags="[]" data-execution_count="52">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> os.path.join(<span class="st">'data'</span>,<span class="st">'landsat8-2025-02-23-palisades-eaton.nc'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>netcdf <span class="op">=</span> xr.open_dataset(fp)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>netcdf</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">InvalidVersion</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/core/formatters.py:770</span>, in <span class="ansi-cyan-fg">PlainTextFormatter.__call__</span><span class="ansi-blue-fg">(self, obj)</span>
<span class="ansi-green-fg">    763</span> stream = StringIO()
<span class="ansi-green-fg">    764</span> printer = pretty.RepresentationPrinter(stream, <span style="color:rgb(0,135,0)">self</span>.verbose,
<span class="ansi-green-fg">    765</span>     <span style="color:rgb(0,135,0)">self</span>.max_width, <span style="color:rgb(0,135,0)">self</span>.newline,
<span class="ansi-green-fg">    766</span>     max_seq_length=<span style="color:rgb(0,135,0)">self</span>.max_seq_length,
<span class="ansi-green-fg">    767</span>     singleton_pprinters=<span style="color:rgb(0,135,0)">self</span>.singleton_printers,
<span class="ansi-green-fg">    768</span>     type_pprinters=<span style="color:rgb(0,135,0)">self</span>.type_printers,
<span class="ansi-green-fg">    769</span>     deferred_pprinters=<span style="color:rgb(0,135,0)">self</span>.deferred_printers)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">770</span> <span class="ansi-yellow-bg">printer</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">pretty</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">obj</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    771</span> printer.flush()
<span class="ansi-green-fg">    772</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> stream.getvalue()

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/lib/pretty.py:411</span>, in <span class="ansi-cyan-fg">RepresentationPrinter.pretty</span><span class="ansi-blue-fg">(self, obj)</span>
<span class="ansi-green-fg">    400</span>                         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> meth(obj, <span style="color:rgb(0,135,0)">self</span>, cycle)
<span class="ansi-green-fg">    401</span>                 <span style="font-weight:bold;color:rgb(0,135,0)">if</span> (
<span class="ansi-green-fg">    402</span>                     <span style="color:rgb(0,135,0)">cls</span> <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="color:rgb(0,135,0)">object</span>
<span class="ansi-green-fg">    403</span>                     <span style="font-style:italic;color:rgb(95,135,135)"># check if cls defines __repr__</span>
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">    409</span>                     <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(0,135,0)">callable</span>(_safe_getattr(<span style="color:rgb(0,135,0)">cls</span>, <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">__repr__</span><span class="ansi-yellow-fg">"</span>, <span style="font-weight:bold;color:rgb(0,135,0)">None</span>))
<span class="ansi-green-fg">    410</span>                 ):
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">411</span>                     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">_repr_pprint</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">obj</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">cycle</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    413</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _default_pprint(obj, <span style="color:rgb(0,135,0)">self</span>, cycle)
<span class="ansi-green-fg">    414</span> <span style="font-weight:bold;color:rgb(0,135,0)">finally</span>:

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/lib/pretty.py:786</span>, in <span class="ansi-cyan-fg">_repr_pprint</span><span class="ansi-blue-fg">(obj, p, cycle)</span>
<span class="ansi-green-fg">    784</span> <span style="font-style:italic" class="ansi-yellow-fg">"""A pprint that just redirects to the normal repr function."""</span>
<span class="ansi-green-fg">    785</span> <span style="font-style:italic;color:rgb(95,135,135)"># Find newlines and replace them with p.break_()</span>
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">786</span> output = <span style="color:rgb(0,135,0)">repr</span>(obj)
<span class="ansi-green-fg">    787</span> lines = output.splitlines()
<span class="ansi-green-fg">    788</span> <span style="font-weight:bold;color:rgb(0,135,0)">with</span> p.group():

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/dataset.py:2616</span>, in <span class="ansi-cyan-fg">Dataset.__repr__</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-fg">   2615</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">__repr__</span>(<span style="color:rgb(0,135,0)">self</span>) -&gt; <span style="color:rgb(0,135,0)">str</span>:
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">2616</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">formatting</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">dataset_repr</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/reprlib.py:21</span>, in <span class="ansi-cyan-fg">recursive_repr.&lt;locals&gt;.decorating_function.&lt;locals&gt;.wrapper</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-fg">     19</span> repr_running.add(key)
<span class="ansi-green-fg">     20</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">21</span>     result = <span class="ansi-yellow-bg">user_function</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     22</span> <span style="font-weight:bold;color:rgb(0,135,0)">finally</span>:
<span class="ansi-green-fg">     23</span>     repr_running.discard(key)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:747</span>, in <span class="ansi-cyan-fg">dataset_repr</span><span class="ansi-blue-fg">(ds)</span>
<span class="ansi-green-fg">    744</span> summary.append(<span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>dims_start<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span class="ansi-yellow-fg">(</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>dims_values<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span class="ansi-yellow-fg">)</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    746</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> ds.coords:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">747</span>     summary.append(<span class="ansi-yellow-bg">coords_repr</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">ds</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">coords</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">col_width</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">col_width</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">max_rows</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">max_rows</span><span class="ansi-yellow-bg">)</span>)
<span class="ansi-green-fg">    749</span> unindexed_dims_str = unindexed_dims_repr(ds.dims, ds.coords, max_rows=max_rows)
<span class="ansi-green-fg">    750</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> unindexed_dims_str:

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:438</span>, in <span class="ansi-cyan-fg">coords_repr</span><span class="ansi-blue-fg">(coords, col_width, max_rows)</span>
<span class="ansi-green-fg">    436</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> col_width <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    437</span>     col_width = _calculate_col_width(coords)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">438</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">_mapping_repr</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">    439</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">coords</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    440</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">title</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">Coordinates</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    441</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">summarizer</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">summarize_variable</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    442</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">expand_option_name</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">display_expand_coords</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    443</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">col_width</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">col_width</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    444</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">indexes</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">coords</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">xindexes</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    445</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">max_rows</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">max_rows</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    446</span> <span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:411</span>, in <span class="ansi-cyan-fg">_mapping_repr</span><span class="ansi-blue-fg">(mapping, title, summarizer, expand_option_name, col_width, max_rows, indexes)</span>
<span class="ansi-green-fg">    406</span>             summary += [
<span class="ansi-green-fg">    407</span>                 summarizer(k, mapping[k], col_width, **summarizer_kwargs[k])
<span class="ansi-green-fg">    408</span>                 <span style="font-weight:bold;color:rgb(0,135,0)">for</span> k <span style="font-weight:bold;color:rgb(175,0,255)">in</span> keys[-last_rows:]
<span class="ansi-green-fg">    409</span>             ]
<span class="ansi-green-fg">    410</span>     <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">411</span>         summary += <span class="ansi-yellow-bg">[</span>
<span class="ansi-green-fg">    412</span> <span class="ansi-yellow-bg">            </span><span class="ansi-yellow-bg">summarizer</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">v</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">col_width</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">summarizer_kwargs</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    413</span> <span class="ansi-yellow-bg">            </span><span style="font-weight:bold;color:rgb(0,135,0)" class="ansi-yellow-bg">for</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">v</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(175,0,255)" class="ansi-yellow-bg">in</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">mapping</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">items</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    414</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">]</span>
<span class="ansi-green-fg">    415</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    416</span>     summary += [EMPTY_REPR]

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:412</span>, in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-fg">(.0)</span>
<span class="ansi-green-fg">    406</span>             summary += [
<span class="ansi-green-fg">    407</span>                 summarizer(k, mapping[k], col_width, **summarizer_kwargs[k])
<span class="ansi-green-fg">    408</span>                 <span style="font-weight:bold;color:rgb(0,135,0)">for</span> k <span style="font-weight:bold;color:rgb(175,0,255)">in</span> keys[-last_rows:]
<span class="ansi-green-fg">    409</span>             ]
<span class="ansi-green-fg">    410</span>     <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    411</span>         summary += [
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">412</span>             <span class="ansi-yellow-bg">summarizer</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">v</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">col_width</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">summarizer_kwargs</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">]</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    413</span>             <span style="font-weight:bold;color:rgb(0,135,0)">for</span> k, v <span style="font-weight:bold;color:rgb(175,0,255)">in</span> mapping.items()
<span class="ansi-green-fg">    414</span>         ]
<span class="ansi-green-fg">    415</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    416</span>     summary += [EMPTY_REPR]

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:348</span>, in <span class="ansi-cyan-fg">summarize_variable</span><span class="ansi-blue-fg">(name, var, col_width, max_width, is_index)</span>
<span class="ansi-green-fg">    345</span> front_str = <span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>first_col<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>dims_str<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>variable.dtype<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>nbytes_str<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span class="ansi-yellow-fg"> </span><span class="ansi-yellow-fg">"</span>
<span class="ansi-green-fg">    347</span> values_width = max_width - <span style="color:rgb(0,135,0)">len</span>(front_str)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">348</span> values_str = <span class="ansi-yellow-bg">inline_variable_array_repr</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">variable</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">values_width</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    350</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> front_str + values_str

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:307</span>, in <span class="ansi-cyan-fg">inline_variable_array_repr</span><span class="ansi-blue-fg">(var, max_width)</span>
<span class="ansi-green-fg">    305</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">getattr</span>(var, <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">_in_memory</span><span class="ansi-yellow-fg">"</span>, <span style="font-weight:bold;color:rgb(0,135,0)">False</span>):
<span class="ansi-green-fg">    306</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> format_array_flat(var, max_width)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">307</span> dask_array_type = <span class="ansi-yellow-bg">array_type</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">dask</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    308</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">isinstance</span>(var._data, dask_array_type):
<span class="ansi-green-fg">    309</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> inline_dask_repr(var.data)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:83</span>, in <span class="ansi-cyan-fg">array_type</span><span class="ansi-blue-fg">(mod)</span>
<span class="ansi-green-fg">     81</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">array_type</span>(mod: ModType) -&gt; DuckArrayTypes:
<span class="ansi-green-fg">     82</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic" class="ansi-yellow-fg">"""Quick wrapper to get the array class of the module."""</span>
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">83</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">_get_cached_duck_array_module</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">mod</span><span class="ansi-yellow-bg">)</span>.type

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:74</span>, in <span class="ansi-cyan-fg">_get_cached_duck_array_module</span><span class="ansi-blue-fg">(mod)</span>
<span class="ansi-green-fg">     72</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">_get_cached_duck_array_module</span>(mod: ModType) -&gt; DuckArrayModule:
<span class="ansi-green-fg">     73</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> mod <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(175,0,255)">in</span> _cached_duck_array_modules:
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">74</span>         duckmod = <span class="ansi-yellow-bg">DuckArrayModule</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">mod</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     75</span>         _cached_duck_array_modules[mod] = duckmod
<span class="ansi-green-fg">     76</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> duckmod

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:40</span>, in <span class="ansi-cyan-fg">DuckArrayModule.__init__</span><span class="ansi-blue-fg">(self, mod)</span>
<span class="ansi-green-fg">     38</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">     39</span>     duck_array_module = import_module(mod)
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">40</span>     duck_array_version = <span class="ansi-yellow-bg">Version</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">duck_array_module</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">__version__</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     42</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> mod == <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">dask</span><span class="ansi-yellow-fg">"</span>:
<span class="ansi-green-fg">     43</span>         duck_array_type = (import_module(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">dask.array</span><span class="ansi-yellow-fg">"</span>).Array,)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/packaging/version.py:202</span>, in <span class="ansi-cyan-fg">Version.__init__</span><span class="ansi-blue-fg">(self, version)</span>
<span class="ansi-green-fg">    200</span> match = <span style="color:rgb(0,135,0)">self</span>._regex.search(version)
<span class="ansi-green-fg">    201</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> match:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">202</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> InvalidVersion(<span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Invalid version: </span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>version<span style="font-weight:bold;color:rgb(175,95,135)">!r}</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    204</span> <span style="font-style:italic;color:rgb(95,135,135)"># Store the parsed out pieces of the version</span>
<span class="ansi-green-fg">    205</span> <span style="color:rgb(0,135,0)">self</span>._version = _Version(
<span class="ansi-green-fg">    206</span>     epoch=<span style="color:rgb(0,135,0)">int</span>(match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">epoch</span><span class="ansi-yellow-fg">"</span>)) <span style="font-weight:bold;color:rgb(0,135,0)">if</span> match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">epoch</span><span class="ansi-yellow-fg">"</span>) <span style="font-weight:bold;color:rgb(0,135,0)">else</span> <span class="ansi-green-fg">0</span>,
<span class="ansi-green-fg">    207</span>     release=<span style="color:rgb(0,135,0)">tuple</span>(<span style="color:rgb(0,135,0)">int</span>(i) <span style="font-weight:bold;color:rgb(0,135,0)">for</span> i <span style="font-weight:bold;color:rgb(175,0,255)">in</span> match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">release</span><span class="ansi-yellow-fg">"</span>).split(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">.</span><span class="ansi-yellow-fg">"</span>)),
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">    213</span>     local=_parse_local_version(match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">local</span><span class="ansi-yellow-fg">"</span>)),
<span class="ansi-green-fg">    214</span> )

<span class="ansi-red-fg">InvalidVersion</span>: Invalid version: 'unknown'</pre>
</div>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">InvalidVersion</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/IPython/core/formatters.py:406</span>, in <span class="ansi-cyan-fg">BaseFormatter.__call__</span><span class="ansi-blue-fg">(self, obj)</span>
<span class="ansi-green-fg">    404</span>     method = get_real_method(obj, <span style="color:rgb(0,135,0)">self</span>.print_method)
<span class="ansi-green-fg">    405</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> method <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">406</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">method</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    407</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    408</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/dataset.py:2621</span>, in <span class="ansi-cyan-fg">Dataset._repr_html_</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-fg">   2619</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> OPTIONS[<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">display_style</span><span class="ansi-yellow-fg">"</span>] == <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">text</span><span class="ansi-yellow-fg">"</span>:
<span class="ansi-green-fg">   2620</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">&lt;pre&gt;</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>escape(<span style="color:rgb(0,135,0)">repr</span>(<span style="color:rgb(0,135,0)">self</span>))<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span class="ansi-yellow-fg">&lt;/pre&gt;</span><span class="ansi-yellow-fg">"</span>
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">2621</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">formatting_html</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">dataset_repr</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:342</span>, in <span class="ansi-cyan-fg">dataset_repr</span><span class="ansi-blue-fg">(ds)</span>
<span class="ansi-green-fg">    336</span> obj_type = <span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">xarray.</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span><span style="color:rgb(0,135,0)">type</span>(ds).<span class="ansi-blue-fg">__name__</span><span style="font-weight:bold;color:rgb(175,95,135)">}</span><span class="ansi-yellow-fg">"</span>
<span class="ansi-green-fg">    338</span> header_components = [<span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">&lt;div class=</span><span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">xr-obj-type</span><span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">&gt;</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>escape(obj_type)<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span class="ansi-yellow-fg">&lt;/div&gt;</span><span class="ansi-yellow-fg">"</span>]
<span class="ansi-green-fg">    340</span> sections = [
<span class="ansi-green-fg">    341</span>     dim_section(ds),
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">342</span>     <span class="ansi-yellow-bg">coord_section</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">ds</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">coords</span><span class="ansi-yellow-bg">)</span>,
<span class="ansi-green-fg">    343</span>     datavar_section(ds.data_vars),
<span class="ansi-green-fg">    344</span>     index_section(_get_indexes_dict(ds.xindexes)),
<span class="ansi-green-fg">    345</span>     attr_section(ds.attrs),
<span class="ansi-green-fg">    346</span> ]
<span class="ansi-green-fg">    348</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _obj_repr(ds, header_components, sections)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:206</span>, in <span class="ansi-cyan-fg">_mapping_section</span><span class="ansi-blue-fg">(mapping, name, details_func, max_items_collapse, expand_option_name, enabled)</span>
<span class="ansi-green-fg">    199</span> expanded = _get_boolean_with_default(
<span class="ansi-green-fg">    200</span>     expand_option_name, n_items &lt; max_items_collapse
<span class="ansi-green-fg">    201</span> )
<span class="ansi-green-fg">    202</span> collapsed = <span style="font-weight:bold;color:rgb(175,0,255)">not</span> expanded
<span class="ansi-green-fg">    204</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> collapsible_section(
<span class="ansi-green-fg">    205</span>     name,
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">206</span>     details=<span class="ansi-yellow-bg">details_func</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">mapping</span><span class="ansi-yellow-bg">)</span>,
<span class="ansi-green-fg">    207</span>     n_items=n_items,
<span class="ansi-green-fg">    208</span>     enabled=enabled,
<span class="ansi-green-fg">    209</span>     collapsed=collapsed,
<span class="ansi-green-fg">    210</span> )

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:122</span>, in <span class="ansi-cyan-fg">summarize_coords</span><span class="ansi-blue-fg">(variables)</span>
<span class="ansi-green-fg">    120</span> li_items = []
<span class="ansi-green-fg">    121</span> <span style="font-weight:bold;color:rgb(0,135,0)">for</span> k, v <span style="font-weight:bold;color:rgb(175,0,255)">in</span> variables.items():
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">122</span>     li_content = <span class="ansi-yellow-bg">summarize_variable</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">v</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">is_index</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">k</span><span class="ansi-yellow-bg"> </span><span style="font-weight:bold;color:rgb(175,0,255)" class="ansi-yellow-bg">in</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">variables</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">xindexes</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    123</span>     li_items.append(<span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">&lt;li class=</span><span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">xr-var-item</span><span class="ansi-yellow-fg">'</span><span class="ansi-yellow-fg">&gt;</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>li_content<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span class="ansi-yellow-fg">&lt;/li&gt;</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    125</span> vars_li = <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">"</span>.join(li_items)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting_html.py:95</span>, in <span class="ansi-cyan-fg">summarize_variable</span><span class="ansi-blue-fg">(name, var, is_index, dtype)</span>
<span class="ansi-green-fg">     92</span> data_id = <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">data-</span><span class="ansi-yellow-fg">"</span> + <span style="color:rgb(0,135,0)">str</span>(uuid.uuid4())
<span class="ansi-green-fg">     93</span> disabled = <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">"</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">len</span>(var.attrs) <span style="font-weight:bold;color:rgb(0,135,0)">else</span> <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">disabled</span><span class="ansi-yellow-fg">"</span>
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">95</span> preview = escape(<span class="ansi-yellow-bg">inline_variable_array_repr</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">variable</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-green-fg ansi-yellow-bg">35</span><span class="ansi-yellow-bg">)</span>)
<span class="ansi-green-fg">     96</span> attrs_ul = summarize_attrs(var.attrs)
<span class="ansi-green-fg">     97</span> data_repr = short_data_repr_html(variable)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/core/formatting.py:307</span>, in <span class="ansi-cyan-fg">inline_variable_array_repr</span><span class="ansi-blue-fg">(var, max_width)</span>
<span class="ansi-green-fg">    305</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">getattr</span>(var, <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">_in_memory</span><span class="ansi-yellow-fg">"</span>, <span style="font-weight:bold;color:rgb(0,135,0)">False</span>):
<span class="ansi-green-fg">    306</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> format_array_flat(var, max_width)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">307</span> dask_array_type = <span class="ansi-yellow-bg">array_type</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">dask</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    308</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">isinstance</span>(var._data, dask_array_type):
<span class="ansi-green-fg">    309</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> inline_dask_repr(var.data)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:83</span>, in <span class="ansi-cyan-fg">array_type</span><span class="ansi-blue-fg">(mod)</span>
<span class="ansi-green-fg">     81</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">array_type</span>(mod: ModType) -&gt; DuckArrayTypes:
<span class="ansi-green-fg">     82</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic" class="ansi-yellow-fg">"""Quick wrapper to get the array class of the module."""</span>
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">83</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">_get_cached_duck_array_module</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">mod</span><span class="ansi-yellow-bg">)</span>.type

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:74</span>, in <span class="ansi-cyan-fg">_get_cached_duck_array_module</span><span class="ansi-blue-fg">(mod)</span>
<span class="ansi-green-fg">     72</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">_get_cached_duck_array_module</span>(mod: ModType) -&gt; DuckArrayModule:
<span class="ansi-green-fg">     73</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> mod <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(175,0,255)">in</span> _cached_duck_array_modules:
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">74</span>         duckmod = <span class="ansi-yellow-bg">DuckArrayModule</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">mod</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     75</span>         _cached_duck_array_modules[mod] = duckmod
<span class="ansi-green-fg">     76</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> duckmod

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/xarray/namedarray/pycompat.py:40</span>, in <span class="ansi-cyan-fg">DuckArrayModule.__init__</span><span class="ansi-blue-fg">(self, mod)</span>
<span class="ansi-green-fg">     38</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">     39</span>     duck_array_module = import_module(mod)
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">40</span>     duck_array_version = <span class="ansi-yellow-bg">Version</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">duck_array_module</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">__version__</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     42</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> mod == <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">dask</span><span class="ansi-yellow-fg">"</span>:
<span class="ansi-green-fg">     43</span>         duck_array_type = (import_module(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">dask.array</span><span class="ansi-yellow-fg">"</span>).Array,)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/packaging/version.py:202</span>, in <span class="ansi-cyan-fg">Version.__init__</span><span class="ansi-blue-fg">(self, version)</span>
<span class="ansi-green-fg">    200</span> match = <span style="color:rgb(0,135,0)">self</span>._regex.search(version)
<span class="ansi-green-fg">    201</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> match:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">202</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> InvalidVersion(<span class="ansi-yellow-fg">f</span><span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Invalid version: </span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>version<span style="font-weight:bold;color:rgb(175,95,135)">!r}</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    204</span> <span style="font-style:italic;color:rgb(95,135,135)"># Store the parsed out pieces of the version</span>
<span class="ansi-green-fg">    205</span> <span style="color:rgb(0,135,0)">self</span>._version = _Version(
<span class="ansi-green-fg">    206</span>     epoch=<span style="color:rgb(0,135,0)">int</span>(match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">epoch</span><span class="ansi-yellow-fg">"</span>)) <span style="font-weight:bold;color:rgb(0,135,0)">if</span> match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">epoch</span><span class="ansi-yellow-fg">"</span>) <span style="font-weight:bold;color:rgb(0,135,0)">else</span> <span class="ansi-green-fg">0</span>,
<span class="ansi-green-fg">    207</span>     release=<span style="color:rgb(0,135,0)">tuple</span>(<span style="color:rgb(0,135,0)">int</span>(i) <span style="font-weight:bold;color:rgb(0,135,0)">for</span> i <span style="font-weight:bold;color:rgb(175,0,255)">in</span> match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">release</span><span class="ansi-yellow-fg">"</span>).split(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">.</span><span class="ansi-yellow-fg">"</span>)),
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">    213</span>     local=_parse_local_version(match.group(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">local</span><span class="ansi-yellow-fg">"</span>)),
<span class="ansi-green-fg">    214</span> )

<span class="ansi-red-fg">InvalidVersion</span>: Invalid version: 'unknown'</pre>
</div>
</div>
</div>
<p>This <code>xarray</code> has 1418 y dimensions and 2742 x dimensions. The coordinates are x, y, and time which are are float64, float64, and datetime64 types (respectively). The variables are red, green, blue, near infared and short wave infared light bands as well as a spatial reference. The bands are in float32 while the spatial_ref is an int64, this shouldn’t be an issue going further - however as the analysis continues it may become an issue.</p>
</section>
<section id="restoring-geospatial-information" class="level3">
<h3 class="anchored" data-anchor-id="restoring-geospatial-information">4. Restoring geospatial information</h3>
<p>We need to use <code>rio.crs</code> to print what is the CRS of this dataset, which will help us plot the light bands onto the same area as the fire perimeters.</p>
<div id="cd6c4622-615f-4599-9e3c-d755c3878c39" class="cell" data-tags="[]" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'The xarray has the crs: </span><span class="sc">{</span>netcdf<span class="sc">.</span>rio<span class="sc">.</span>crs<span class="sc">}</span><span class="ss">'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>The xarray has the crs: None</code></pre>
</div>
</div>
<p>Oh no! Theres no CRS meaning that it will be harder to plot, however there actually is! It’s just encoded in the <code>spatial_ref</code> variable.</p>
<div id="37e73bac-815d-42cb-8cd5-a36b2580acd8" class="cell" data-tags="[]" data-execution_count="49">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f' The actual CRS of the xarray is: </span><span class="sc">{</span>netcdf<span class="sc">.</span>spatial_ref<span class="sc">.</span>crs_wkt<span class="sc">}</span><span class="ss">'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> The actual CRS of the xarray is: PROJCS["WGS 84 / UTM zone 11N",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-117],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH],AUTHORITY["EPSG","32611"]]</code></pre>
</div>
</div>
<p><em>Oh wow thats big!</em> Lets make it so that CRS is the CRS for the dataset</p>
<div id="d3953390-4a6d-4f41-8be7-4027c1749f3f" class="cell" data-tags="[]" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>netcdf <span class="op">=</span> netcdf.rio.write_crs(netcdf.spatial_ref.crs_wkt) <span class="co"># Need to write_crs due to being an xarrray</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="f469941c-f013-4846-9f39-affa3b63c7f3" class="cell" data-tags="[]" data-execution_count="50">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'The xarray now has the CRS: </span><span class="sc">{</span>netcdf<span class="sc">.</span>rio<span class="sc">.</span>crs<span class="sc">}</span><span class="ss">'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>The xarray now has the CRS: None</code></pre>
</div>
</div>
</section>
<section id="true-color-image" class="level3">
<h3 class="anchored" data-anchor-id="true-color-image">5. True color image</h3>
<p>A true color image takes the light bands collected by Landsat and plots the colors visible to the human eye. This is how the ground would look if we were sitting on the satelite</p>
<p>To create a true color plot we need to:</p>
<ul>
<li>Identify which bands have nan values.</li>
<li>Select the red, green, and blue variables (in that order) of the <code>xarray.Dataset</code> holding the Landsat data,</li>
<li>Convert it to a numpy.array using the <code>to_array()</code> method, and then</li>
<li>Use <code>.plot.imshow()</code> to create an RGB image with the data.</li>
<li>Adjust the scale used for plotting the bands to get a true color image.</li>
<li>Use the <code>.fillna()</code> method for <code>xarray.Datasets</code> to substitute any nan values in the Landsat data for zero.</li>
<li>Create a true color image that gets plotted without warnings.</li>
</ul>
<div id="bf20dfd0-6339-488b-9fb7-e85c71cc3340" class="cell" data-tags="[]" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'The red band has </span><span class="sc">{</span>np<span class="sc">.</span>isnan(netcdf.red)<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">.</span>item()<span class="sc">}</span><span class="ss"> na values'</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'The green band has </span><span class="sc">{</span>np<span class="sc">.</span>isnan(netcdf.green)<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">.</span>item()<span class="sc">}</span><span class="ss"> na values'</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'The blue band has </span><span class="sc">{</span>np<span class="sc">.</span>isnan(netcdf.blue)<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">.</span>item()<span class="sc">}</span><span class="ss"> na values'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>The red band has 0 na values
The green band has 1 na values
The blue band has 109 na values</code></pre>
</div>
</div>
<div id="a562dc3b-c349-44d1-b87e-8413e226e6a9" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>netcdf[[<span class="st">'red'</span>, <span class="st">'green'</span>, <span class="st">'blue'</span>]].fillna(<span class="dv">0</span>).to_array().plot.imshow(robust <span class="op">=</span> <span class="va">True</span>) <span class="co"># Robust and fillna allow us to plot despite the NA values</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>You can <em>sort of</em> see the fire damage, however it isnt as aparant as the false color image.</p>
</section>
<section id="false-color-image" class="level3">
<h3 class="anchored" data-anchor-id="false-color-image">6. False color image</h3>
<p>False color images plot short wave infared, near infared, and red bands. By assigning infrared bands to visible colors, these images highlight vegetation health, burn severity, and the extent of fire scars. This approach helps researchers and land managers assess recovery efforts, identify high-risk areas, and plan restoration strategies <span class="citation" data-cites="meds_eds220_thomasfire_2025">(<a href="#ref-meds_eds220_thomasfire_2025" role="doc-biblioref"><span>“Assignment 4: Thomas Fire — MEDS-EDS-220 Course”</span> 2025</a>)</span></p>
<div id="19c36aeb-0a7d-4168-8a35-2acdd9168bbc" class="cell" data-tags="[]" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This plotting code is very similar to the other, but we are selecting bands</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>netcdf[[<span class="st">'swir22'</span>, <span class="st">'nir08'</span>, <span class="st">'red'</span>]].to_array().plot.imshow(robust <span class="op">=</span> <span class="va">True</span>) <span class="co"># Note! No Na's are present</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The red areas are burn scars from the fires, and to see them better we can plot the fire perimeters on top.</p>
</section>
<section id="map" class="level3">
<h3 class="anchored" data-anchor-id="map">7. Map</h3>
<p>Here we map the fire perimeters onto the false color image. Before we plot we need to make sure that the CRS of both match</p>
<div id="8ac3e12f-7223-4135-a66b-f21dacee498b" class="cell" data-tags="[]" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Before we plot we need to ensure we are in the same crs</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>palisades_perimeter <span class="op">=</span> palisades_perimeter.to_crs(netcdf.rio.crs)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>eaton_perimeter <span class="op">=</span> eaton_perimeter.to_crs(netcdf.rio.crs)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="7c6ade15-d6d5-4c15-95a6-08d92cfc9c58" class="cell" data-tags="[]" data-execution_count="28">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>, figsize <span class="op">=</span> (<span class="dv">14</span>,<span class="dv">12</span>)) <span class="co"># Set a size for our figure</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>netcdf[[<span class="st">'swir22'</span>, <span class="st">'nir08'</span>, <span class="st">'red'</span>]].to_array().plot.imshow(robust <span class="op">=</span> <span class="va">True</span>, ax <span class="op">=</span> ax) <span class="co"># Choose false color bands</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>eaton_perimeter.plot(ax <span class="op">=</span> ax, color <span class="op">=</span> <span class="st">'none'</span>, edgecolor <span class="op">=</span> <span class="st">'red'</span>) <span class="co"># Plot Eaton fire perimeter in red</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>palisades_perimeter.plot(ax <span class="op">=</span> ax, color <span class="op">=</span> <span class="st">'none'</span>, edgecolor <span class="op">=</span> <span class="st">'red'</span>) <span class="co"># And the Palisade perimeter</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'False Color image of Palisades and Eaton fires in Santa Barbara'</span>, </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>             fontsize<span class="op">=</span><span class="dv">16</span>, </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>             y <span class="op">=</span> <span class="fl">.77</span>) <span class="co"># This y was a lot of guess and checking </span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Plot of SWIR, NIR, and RED light bands"</span>, </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">12</span>, </span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>          y<span class="op">=</span><span class="fl">1.01</span>) <span class="co"># Title defaults inside the plot and I want it just above, hence 1.01</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>plt.figtext(x <span class="op">=</span> <span class="fl">.19</span>, <span class="co"># The position of the figtext, In units of 0-1 for x and y </span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="fl">.46</span>,</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>            s <span class="op">=</span> <span class="st">'Palisades Fire Perimeter'</span>,</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>            color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>            bbox <span class="op">=</span>{<span class="st">'facecolor'</span>:<span class="st">'grey'</span>,  <span class="co"># Add a box around text for legibility </span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'alpha'</span>:<span class="dv">1</span>, <span class="st">'pad'</span>:<span class="dv">5</span>}) </span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>plt.figtext(x <span class="op">=</span> <span class="fl">.67</span>, </span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="fl">.63</span>, </span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>            s<span class="op">=</span> <span class="st">'Eaton Fire Perimeter'</span>,</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>            color <span class="op">=</span> <span class="st">'black'</span>,</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>           bbox <span class="op">=</span>{<span class="st">'facecolor'</span>:<span class="st">'grey'</span>, </span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'alpha'</span>:<span class="dv">1</span>, <span class="st">'pad'</span>:<span class="dv">5</span>})</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>ax.add_artist(ScaleBar(<span class="dv">1</span>, dimension<span class="op">=</span><span class="st">"si-length"</span>, units<span class="op">=</span><span class="st">"m"</span>, location<span class="op">=</span><span class="st">"lower left"</span>)) <span class="co"># Add a scale bar on the lower left</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>ax.axis(<span class="st">'off'</span>) <span class="co"># Turn Axes off</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>plt.show() <span class="co"># Show plot only </span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Short-wave infrared (SWIR) was mapped to the red channel, near-infrared (NIR) to green, and the red band to blue. This false-color composite highlights post-fire effects from the January 2025 Palisades–Eaton fires. Burned areas appear as bright orange to deep red, while the fire perimeter is outlined in red for clarity, with the fire name next to the perimeter. As you can see some of the fire perimeter still contains some vegitation, thanks to our brave firefighters.</p>
</section>
<section id="intersection-with-environmental-justice" class="level3">
<h3 class="anchored" data-anchor-id="intersection-with-environmental-justice">8. Intersection with environmental justice</h3>
<p>In this and the following sections we will be accessing data from the California Environmental Justice Index (EJI), and plotting census count information in the context of the fire perimeters.</p>
<p>We begin by importing the EJI. <span class="citation" data-cites="cdc_eji_2021">(<a href="#ref-cdc_eji_2021" role="doc-biblioref">Centers for Disease Control and Prevention and Agency for Toxic Substances and Disease Registry 2021</a>)</span></p>
<div id="ae3207a4" class="cell" data-execution_count="76">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> os.path.join(<span class="st">'data'</span>,<span class="st">'EJI_2024_California '</span>,<span class="st">'EJI_2024_California.gdb'</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>eji_ca <span class="op">=</span> gpd.read_file(os.path.abspath(fp))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>The EJI has a number of socioeconomic factors along with geometries of where the census was taken. These include:</p>
<ul>
<li>Percentage of housing units that are renter occupied: E_RENTER</li>
<li>Percentage of persons who are unisured: E_UNINSUR</li>
<li>65+: E_AGE65</li>
<li>proportion of greenspace: E_PARK</li>
</ul>
</section>
<section id="polygon-intersection" class="level3">
<h3 class="anchored" data-anchor-id="polygon-intersection">9. Polygon intersection</h3>
<p>To find where social variables intersect our fire perimeters we can use polygon intersection, where we examine where the shape of the census tracts intersect with the shape of the fire perimeter.</p>
<div id="0a29e159" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># From previous exploration I know the CRS does not match </span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatially join EJI with palisades</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>pali_eji <span class="op">=</span> gpd.sjoin(eji_ca.to_crs(palisades_perimeter.crs), palisades_perimeter) </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize <span class="op">=</span> (<span class="dv">11</span>,<span class="dv">5</span>))</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>ax.axis(<span class="st">'off'</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>pali_eji.plot(<span class="st">'TRACTCE'</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>              ax <span class="op">=</span> ax)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>palisades_perimeter.plot(ax <span class="op">=</span> ax,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>                    color <span class="op">=</span> <span class="st">'none'</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>                    edgecolor <span class="op">=</span> <span class="st">'red'</span>,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>                    linewidth <span class="op">=</span> <span class="fl">1.5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Polygon intersection includes the entire census tracts that are touching the fire, see orange. This problem becomes more aparent when we plot the Eaton fire.</p>
<div id="1bfb5f6d" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatially join EJI with palisades</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>eaton_eji <span class="op">=</span> gpd.sjoin(eji_ca.to_crs(eaton_perimeter.crs), eaton_perimeter) </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize <span class="op">=</span> (<span class="dv">11</span>,<span class="dv">5</span>))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>ax.axis(<span class="st">'off'</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>eaton_eji.plot(<span class="st">'TRACTCE'</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>              ax <span class="op">=</span> ax)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>eaton_perimeter.plot(ax <span class="op">=</span> ax,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>                    color <span class="op">=</span> <span class="st">'none'</span>,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>                    edgecolor <span class="op">=</span> <span class="st">'red'</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>                    linewidth <span class="op">=</span> <span class="fl">1.5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-21-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>As you can see a large census tract is completely included, despite a comparably small portion of the tract having been effected by the fire.</p>
</section>
<section id="polygon-clipping" class="level3">
<h3 class="anchored" data-anchor-id="polygon-clipping">10. Polygon clipping</h3>
<p>Instead of polygon intersection we will be using polygon clipping. If you think of cookies, polygon intersection is like the dalgona cookies from squid games. The shape is almost cut out, however the larger area is still aparent. Polygon clipping is more like using cookie cutter to only choose the area from fire perimeter, not the entire census.</p>
<p>For future plotting we are going to make new, clipped variables.</p>
<div id="4b367ae4" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>eji_ca <span class="op">=</span> eji_ca.to_crs(palisades_perimeter.crs)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>clip_eji_pali <span class="op">=</span> gpd.clip(eji_ca, palisades_perimeter)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>clip_eji_eaton <span class="op">=</span> gpd.clip(eji_ca, eaton_perimeter)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>As you can see the clipped plots show the exact areas of the census tracts which were in the fire perimeters.</p>
<div id="0f3b55e7" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>clip_eji_pali.plot(<span class="st">'TRACTCE'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-23-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cb280408" class="cell" data-execution_count="24">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>clip_eji_eaton.plot(<span class="st">'TRACTCE'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-24-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualize-fire-perimeters-with-a-basemap" class="level3">
<h3 class="anchored" data-anchor-id="visualize-fire-perimeters-with-a-basemap">11. Visualize fire perimeters with a basemap</h3>
<p>Using the package <code>contextily</code> we can add a base map to contextualize the fire areas within the greater Los Angeles Area.</p>
<div id="181d286b" class="cell" data-execution_count="25">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">12</span>))</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>ax.ticklabel_format(style<span class="op">=</span><span class="st">'plain'</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Reproject everything to EPSG:3857</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>clip_eji_pali_3857      <span class="op">=</span> clip_eji_pali.to_crs(epsg<span class="op">=</span><span class="dv">3857</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>clip_eji_eaton_3857     <span class="op">=</span> clip_eji_eaton.to_crs(epsg<span class="op">=</span><span class="dv">3857</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>palisades_perimeter_3857 <span class="op">=</span> palisades_perimeter.to_crs(epsg<span class="op">=</span><span class="dv">3857</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>eaton_perimeter_3857     <span class="op">=</span> eaton_perimeter.to_crs(epsg<span class="op">=</span><span class="dv">3857</span>)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Plot layers</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>clip_eji_pali_3857.plot(</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'red'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>, edgecolor<span class="op">=</span><span class="st">'none'</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>clip_eji_eaton_3857.plot(</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'blue'</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, edgecolor<span class="op">=</span><span class="st">'none'</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>palisades_perimeter_3857.plot(</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax, color<span class="op">=</span><span class="st">'none'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="dv">2</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>eaton_perimeter_3857.plot(</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax, color<span class="op">=</span><span class="st">'none'</span>, edgecolor<span class="op">=</span><span class="st">'purple'</span>, linewidth<span class="op">=</span><span class="dv">2</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Add basemap last</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>ctx.add_basemap(ax<span class="op">=</span>ax, source<span class="op">=</span>ctx.providers.OpenStreetMap.Mapnik)</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-25-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>This plot turns highlights the neighborhoods which were effected, as well as showing just how close to more densly populated areas the fires got.</p>
</section>
<section id="mapping-socioecomic-factors" class="level3">
<h3 class="anchored" data-anchor-id="mapping-socioecomic-factors">12. Mapping socioecomic factors</h3>
<p>For this section I chose to examine the percentage of the census tracts which were renters. I chose this because, following the fires, renters faced issues with: - Loss of homes - Rent increases (double to triple the price) - Landlords trying to push out long-term renters who pay lower rents to make way for displaced fire victims who have more money to spend - Paying out of pocket to clean and fix partially damaged rental space <span class="citation" data-cites="CBSNews_2025_WildfireSurvivors">(<a href="#ref-CBSNews_2025_WildfireSurvivors" role="doc-biblioref">CBS Los Angeles 2025</a>)</span></p>
<p>These issues compound the already devistating fire and reduce quality of life for renters.</p>
<p>To plot this I used the percentage of census tracts which are renters.</p>
<div id="8c341855" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">12</span>))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set eji variable of interest</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>eji_variable <span class="op">=</span> <span class="st">'E_RENTER'</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Find common min/max for legend range</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>vmin <span class="op">=</span> <span class="bu">min</span>(clip_eji_pali[eji_variable].<span class="bu">min</span>(), clip_eji_eaton[eji_variable].<span class="bu">min</span>())</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>vmax <span class="op">=</span> <span class="bu">max</span>(clip_eji_pali[eji_variable].<span class="bu">max</span>(), clip_eji_eaton[eji_variable].<span class="bu">max</span>())</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot census tracts within Palisades perimeter</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>clip_eji_pali.plot(</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    column<span class="op">=</span> eji_variable,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax1,</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'Palisades Fire'</span>)</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>ax1.axis(<span class="st">'off'</span>)</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot census tracts within Eaton perimeter</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>clip_eji_eaton.plot(</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    column<span class="op">=</span>eji_variable,</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax,</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax2,</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'Eaton Fire'</span>)</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>ax2.axis(<span class="st">'off'</span>)</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Add overall title</span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">'Renter occupied buildings in Palisades and Eaton Fires'</span>,</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>             y<span class="op">=</span><span class="fl">0.7</span>) <span class="co"># Y = .7 sets height of title</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Add shared colorbar at the bottom</span></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>sm <span class="op">=</span> plt.cm.ScalarMappable( norm<span class="op">=</span>plt.Normalize(vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax))</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>cbar_ax <span class="op">=</span> fig.add_axes([<span class="fl">0.25</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.02</span>])  <span class="co"># [left, bottom, width, height]</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>cbar <span class="op">=</span> fig.colorbar(sm, cax<span class="op">=</span>cbar_ax, orientation<span class="op">=</span><span class="st">'horizontal'</span>)</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>cbar.set_label(<span class="st">'Percent Renters'</span>)</span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-26-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>From the map you can see that the Palisades fire affected more renters, with a large area of close to 50% renters being found at the lower left of the perimeter (Malibu). While this is an affluent area, it has seen some of the highest level of post-fire price gouging <span class="citation" data-cites="FOXLA_2025">(<a href="#ref-FOXLA_2025" role="doc-biblioref">FOX 11 Los Angeles 2025</a>)</span>. This could alienate those who have historically lived in the communities to move elsewhere, shifting the social and demographic makeup of these areas.</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-meds_eds220_thomasfire_2025" class="csl-entry" role="listitem">
<span>“Assignment 4: Thomas Fire — MEDS-EDS-220 Course.”</span> 2025. <a href="https://meds-eds-220.github.io/MEDS-eds-220-course/assignments/assignment4-thomas-fire.html" class="uri">https://meds-eds-220.github.io/MEDS-eds-220-course/assignments/assignment4-thomas-fire.html</a>.
</div>
<div id="ref-CBSNews_2025_WildfireSurvivors" class="csl-entry" role="listitem">
CBS Los Angeles. 2025. <span>“Wildfire Survivors, Renters Face Long Road to Affordable Housing.”</span> January 2025. <a href="https://www.cbsnews.com/losangeles/news/wildfire-survivors-renters-affordable-housing/">https://www.cbsnews.com/losangeles/news/wildfire-survivors-renters-affordable-housing/</a>.
</div>
<div id="ref-cdc_eji_2021" class="csl-entry" role="listitem">
Centers for Disease Control and Prevention, and Agency for Toxic Substances and Disease Registry. 2021. <span>“Environmental Justice Index.”</span> <a href="https://atsdr.cdc.gov/place-health/php/eji/eji-data-download.html">https://atsdr.cdc.gov/place-health/php/eji/eji-data-download.html</a>.
</div>
<div id="ref-FOXLA_2025" class="csl-entry" role="listitem">
FOX 11 Los Angeles. 2025. <span>“Rent Soaring in These LA ZIP Codes After California Wildfires, Report Says.”</span> January 2025. <a href="https://www.cbsnews.com/losangeles/news/wildfire-survivors-renters-affordable-housing/">https://www.cbsnews.com/losangeles/news/wildfire-survivors-renters-affordable-housing/</a>.
</div>
<div id="ref-SHF_2025_LA_fires" class="csl-entry" role="listitem">
Guillen, Victor. 2025. <span>“Service Firefighters in the Street with a Fire Hose in Front of a House on Fire.”</span> Photograph, Flickr. <a href="https://www.npr.org/2025/01/10/g-s1-41873/la-fires-los-angeles-palisades-eaton-hurst-california">https://www.npr.org/2025/01/10/g-s1-41873/la-fires-los-angeles-palisades-eaton-hurst-california</a>.
</div>
<div id="ref-accuweather_2025" class="csl-entry" role="listitem">
<span>“Media Advisory: AccuWeather Increases Estimate of Total Damage and Economic Loss as Catastrophic Wildfires Continue to Ravage the Los Angeles Area.”</span> 2025. <em>AccuWeather</em>. AccuWeather, Inc. <a href="https://www.accuweather.com/en/press/media-advisory-accuweather-increases-estimate-of-total-damage-and-economic-loss-ascatastrophic-wildfires-in-southern-california-continue-to-ravage-the-los-angeles-area-updated-preliminary-estimate-i/1732268?campaign_id=4&amp;emc=edit_dk_20250110&amp;instance_id=144377&amp;nl=dealbook&amp;regi_id=42565251&amp;segment_id=187890&amp;user_id=d34e5f66831c9f0186bea078f383a625">https://www.accuweather.com/en/press/media-advisory-accuweather-increases-estimate-of-total-damage-and-economic-loss-ascatastrophic-wildfires-in-southern-california-continue-to-ravage-the-los-angeles-area-updated-preliminary-estimate-i/1732268?campaign_id=4&amp;emc=edit_dk_20250110&amp;instance_id=144377&amp;nl=dealbook&amp;regi_id=42565251&amp;segment_id=187890&amp;user_id=d34e5f66831c9f0186bea078f383a625</a>.
</div>
<div id="ref-la_fire_perimeters_2025" class="csl-entry" role="listitem">
<span>“Palisades and Eaton Dissolved Fire Perimeters (2025).”</span> 2025. <em>City of Los Angeles GeoHub</em>. City of Los Angeles. <a href="https://geohub.lacity.org/datasets/lacounty::palisades-and-eaton-dissolved-fire-perimeters-2025">https://geohub.lacity.org/datasets/lacounty::palisades-and-eaton-dissolved-fire-perimeters-2025</a>.
</div>
<div id="ref-landsat_c2_l2_2025" class="csl-entry" role="listitem">
U.S. Geological Survey. 2025. <span>“Landsat Collection 2 Level-2 Science Products.”</span> Microsoft Planetary Computer. <a href="https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2">https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2</a>.
</div>
<div id="ref-vanauken_2025" class="csl-entry" role="listitem">
VanAuken, Courtney. 2025. <span>“What Caused the Palisades and Eaton Fires?”</span> <em>The Tartan</em>. Carnegie Mellon’s Student Newspaper. <a href="https://the-tartan.org/2025/02/03/what-caused-the-palisades-and-eaton-fires/">https://the-tartan.org/2025/02/03/what-caused-the-palisades-and-eaton-fires/</a>.
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{vitale2025,
  author = {Vitale, Peter},
  title = {Visualizing the 2025 {California} {Wildfires}},
  date = {2025-12-01},
  url = {http://petervitale910.github.io/posts/palisades_eaton_ejscreen},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-vitale2025" class="csl-entry quarto-appendix-citeas" role="listitem">
Vitale, Peter. 2025. <span>“Visualizing the 2025 California
Wildfires.”</span> December 1, 2025. <a href="http://petervitale910.github.io/posts/palisades_eaton_ejscreen">http://petervitale910.github.io/posts/palisades_eaton_ejscreen</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Peter Vitale</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
      <i class="bi bi-reddit" role="img">
</i> 
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>